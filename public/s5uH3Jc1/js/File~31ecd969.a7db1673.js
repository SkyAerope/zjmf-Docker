(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["File~31ecd969"],{1593:function(e,a,t){},"164d":function(e,a,t){"use strict";var i=t("1593"),l=t.n(i);l.a},6671:function(e,a,t){"use strict";t.d(a,"h",(function(){return l})),t.d(a,"b",(function(){return o})),t.d(a,"f",(function(){return r})),t.d(a,"g",(function(){return s})),t.d(a,"d",(function(){return n})),t.d(a,"c",(function(){return d})),t.d(a,"i",(function(){return f})),t.d(a,"a",(function(){return m})),t.d(a,"e",(function(){return u})),t.d(a,"j",(function(){return c}));var i=t("a27e");function l(e){return Object(i["a"])({url:"downloads/list",params:{id:e}})}function o(e){return Object(i["a"])({url:"downloads/create",method:"post",data:e})}function r(e){return Object(i["a"])({url:"downloads/edit",params:{id:e}})}function s(e){return Object(i["a"])({url:"downloads/update",method:"post",data:e})}function n(e){return Object(i["a"])({url:"downloads/cat",method:"delete",params:{id:e}})}function d(e){return Object(i["a"])({url:"downloads/file",method:"delete",params:{id:e}})}function f(e){return Object(i["a"])({url:"downloads/filepage",params:{id:e}})}function m(e){return Object(i["a"])({url:"downloads/addfile",method:"post",data:e})}function u(e){return Object(i["a"])({url:"downloads/savefile",method:"post",data:e})}function c(e){return Object(i["a"])({url:"downloads/updatesort",method:"post",data:e})}},7441:function(e,a,t){e.exports=t.p+"img/pic.76b2a05b.svg"},"81cd":function(e,a,t){e.exports=t.p+"img/zip.b39f9e2a.svg"},a83a:function(e,a,t){e.exports=t.p+"img/txt.c45c8fe9.svg"},baa5:function(e,a,t){var i=t("23e7"),l=t("e58c");i({target:"Array",proto:!0,forced:l!==[].lastIndexOf},{lastIndexOf:l})},e494:function(e,a,t){"use strict";t.r(a);var i=function(){var e=this,a=e.$createElement,i=e._self._c||a;return i("div",{},[i("h2",[e._v(e._s(e.isAdd?e.$lang.add_file:e.$lang.edit_file))]),i("div",[i("el-form",{ref:"elForm",attrs:{model:e.formData,rules:e.rules,size:"medium","label-width":"120px"}},[e.isEdit?i("el-form-item",{attrs:{label:e.$lang.file_classify}},[i("span",[e._v(e._s(e.formData.category))])]):e._e(),i("el-form-item",{attrs:{label:e.$lang.file_type,prop:"type"}},[i("el-select",{style:{width:"260px"},attrs:{placeholder:e.$lang.select_file_type,clearable:""},model:{value:e.formData.type,callback:function(a){e.$set(e.formData,"type",a)},expression:"formData.type"}},e._l(e.pageData.type,(function(e,a){return i("el-option",{key:a,attrs:{label:e.name,value:e.id.toString(),disabled:e.disabled}})})),1)],1),i("el-form-item",{attrs:{label:e.$lang.title,prop:"title"}},[i("el-input",{key:e.key,style:{width:"260px"},attrs:{placeholder:e.$lang.enter_title,clearable:""},model:{value:e.formData.title,callback:function(a){e.$set(e.formData,"title",a)},expression:"formData.title"}})],1),i("el-form-item",{attrs:{label:e.$lang.describe,prop:"description"}},[i("el-input",{style:{width:"260px"},attrs:{type:"textarea",placeholder:e.$lang.enter_describe,autosize:{minRows:5,maxRows:5}},model:{value:e.formData.description,callback:function(a){e.$set(e.formData,"description",a)},expression:"formData.description"}})],1),e.isAdd||e.showUpload?i("el-form-item",{attrs:{label:e.$lang.upload_files,prop:"filetype"}},[i("el-radio-group",{attrs:{size:"medium"},model:{value:e.formData.filetype,callback:function(a){e.$set(e.formData,"filetype",a)},expression:"formData.filetype"}},e._l(e.filetypeOptions,(function(a,t){return i("el-radio",{key:t,attrs:{label:a.value,disabled:a.disabled}},[e._v(e._s(a.label))])})),1)],1):e._e(),e.isEdit&&!e.showUpload?[i("el-form-item",{attrs:{label:e.$lang.upload_files}},[i("div",{staticClass:"file_main"},[i("div",["1"===e.formData.type?i("img",{staticStyle:{"margin-bottom":"-5px"},attrs:{src:t("81cd"),alt:"",width:"50px"}}):e._e(),"2"===e.formData.type?i("img",{staticStyle:{"margin-bottom":"-5px"},attrs:{src:t("7441"),alt:"",width:"50px"}}):e._e(),"3"===e.formData.type?i("img",{staticStyle:{"margin-bottom":"-5px"},attrs:{src:t("a83a"),alt:"",width:"50px"}}):e._e(),i("i",{staticClass:"el-icon-download",staticStyle:{"font-size":"20px",color:"#2e53e9",cursor:"pointer"},on:{click:e.downLoadFile}})]),i("div",{staticClass:"file_name"},[i("span",[e._v(" "+e._s(e.formData.locationname)+" ")]),e.formData.locationname?i("i",{staticClass:"el-icon-circle-close",staticStyle:{cursor:"pointer"},on:{click:e.deleteFile}}):e._e()])])])]:e._e(),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.showFileName&&!e.isEdit||e.showFileName&&e.showUpload,expression:"(showFileName && !isEdit) || (showFileName && showUpload)"}],attrs:{label:e.$lang.import_file_name,prop:"filename"}},[i("el-input",{style:{width:"100%"},attrs:{placeholder:e.$lang.enter_import_file_name,clearable:""},on:{input:e.inputChange},model:{value:e.formData.filename,callback:function(a){e.$set(e.formData,"filename",a)},expression:"formData.filename"}})],1),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.showRemote&&!e.isEdit||e.showRemote&&e.showUpload,expression:"(showRemote && !isEdit || (showRemote && showUpload))"}],attrs:{label:e.$lang.file_download_address,prop:"filenameUrl"}},[i("el-input",{style:{width:"100%"},attrs:{placeholder:e.$lang.enter_file_download_address,clearable:""},on:{input:e.inputChange},model:{value:e.formData.filenameUrl,callback:function(a){e.$set(e.formData,"filenameUrl",a)},expression:"formData.filenameUrl"}}),i("span",[e._v(e._s(e.$lang.path_hint))])],1),!e.showRemote&&!e.showFileName&&!1===e.isEdit||!e.showRemote&&!e.showFileName&&e.showUpload?i("el-form-item",{staticStyle:{"margin-bottom":"0 !important"},attrs:{label:""}},[i("el-upload",{ref:"attachment",attrs:{"file-list":e.fileList,action:e.attachmentAction,limit:1,"before-upload":e.beforeUpload,"on-success":e.successUpload,"before-remove":e.handleRemove,"with-credentials":"",name:"uploadfile","on-exceed":e.handleExceed,accept:".rar,.zip,.png,.jpg,.jpeg,.gif,.doc,.docx,.key,.number,.pages,.pdf,.ppt,.pptx,.txt,.rtf,.vcf,.xls,.xlsx"}},[i("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-upload"}},[e._v(e._s(e.$lang.click_upload))]),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(e._s(e.$lang.upload_astrict))])],1)],1):e._e(),e.isEdit||e.showUpload?i("el-form-item",{attrs:{label:e.$lang.download_count,prop:"downloads"}},[i("el-input-number",{attrs:{size:"mini",controls:!1,min:0},model:{value:e.formData.downloads,callback:function(a){e.$set(e.formData,"downloads",a)},expression:"formData.downloads"}})],1):e._e(),i("el-form-item",{attrs:{label:e.$lang.need_to_log_to,prop:"clientsonly"}},[i("el-checkbox",{attrs:{"true-label":1,"false-label":0,label:e.$lang.need_to_log_to_check},model:{value:e.formData.clientsonly,callback:function(a){e.$set(e.formData,"clientsonly",a)},expression:"formData.clientsonly"}})],1),i("el-form-item",{attrs:{label:e.$lang.accessories_product,prop:"productdownload"}},[i("el-checkbox",{attrs:{"true-label":1,"false-label":0,label:e.$lang.accessories_product_check},model:{value:e.formData.productdownload,callback:function(a){e.$set(e.formData,"productdownload",a)},expression:"formData.productdownload"}})],1),i("el-form-item",{attrs:{label:e.$lang.conceal,prop:"hidden"}},[i("el-checkbox",{attrs:{"true-label":1,"false-label":0,label:e.$lang.conceal_check},model:{value:e.formData.hidden,callback:function(a){e.$set(e.formData,"hidden",a)},expression:"formData.hidden"}})],1),e.isEdit&&!e.showUpload?i("el-form-item",{attrs:{label:e.$lang.download_link}},[i("span",[e._v(e._s(e.formData.url))])]):e._e()],2)],1),i("div",{staticClass:"bottomOperationAdd"},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submitForm}},[e._v(e._s(e.$lang.submit))]),i("el-button",{attrs:{size:"small"},on:{click:e.resetForm}},[e._v(e._s(e.$lang.reset))])],1)])},l=[],o=(t("a4d3"),t("e01a"),t("baa5"),t("96cf"),t("1da1")),r=t("6671"),s={components:{},props:[],data:function(){return{key:1,showUpload:!1,opType:this.$route.query.type,fileInfo:{},fileList:[],pageData:{type:[]},showFileName:!1,showRemote:!1,isAdd:!1,isEdit:!1,formData:{url:"",id:0,downloads:0,cateid:0,type:void 0,title:void 0,description:void 0,filetype:"upload",filename:"",filenameUrl:"",uploadfile:"",uploadfilename:"",clientsonly:0,productdownload:0,hidden:0,category:""},rules:{type:[{required:!0,message:this.$lang.select_file_type,trigger:"change"}],title:[{required:!0,message:this.$lang.enter_file_name,trigger:"blur"}],filetype:[{required:!0,message:this.$lang.file_no_empty,trigger:"change"}],filename:[{required:!0,message:this.$lang.enter_file_name,trigger:"blur"}],filenameUrl:[{required:!0,message:this.$lang.enter_file_download_address,trigger:"blur"}],clientsonly:[],productdownload:[],hidden:[]},filetypeOptions:[{label:this.$lang.upload_files,value:"upload"},{label:this.$lang.upload_directory,value:"manual"},{label:this.$lang.enter_file_url,value:"remote"}],attachmentAction:this.$baseUrl+"/downloads/uploadfile"}},computed:{},watch:{"formData.filetype":{handler:function(e){"manual"===e?(this.showFileName=!0,this.showRemote=!1,(this.showUpload||this.isAdd)&&(this.rules.filename[0].required=!0,this.rules.filenameUrl[0].required=!1)):"upload"===e?(this.showFileName=!1,this.showRemote=!1,(this.showUpload||this.isAdd)&&(this.rules.filename[0].required=!1,this.rules.filenameUrl[0].required=!1)):"remote"===e&&(this.showRemote=!0,this.showFileName=!1,(this.showUpload||this.isAdd)&&(this.rules.filename[0].required=!1,this.rules.filenameUrl[0].required=!0))},immediate:!0,deep:!0}},created:function(){this.getData(),"add"===this.$route.query.type?(this.isAdd=!0,this.isEdit=!1):"edit"===this.$route.query.type?(this.isAdd=!1,this.isEdit=!0,this.showUpload||(this.rules.filename[0].required=!1,this.rules.filenameUrl[0].required=!1)):(this.isAdd=!1,this.isEdit=!1,this.$message.error(this.$lang.lack_necessary_data)),this.formData.id=this.$route.query.wid,this.formData.cateid=this.$route.query.wid},mounted:function(){},methods:{inputChange:function(){this.key++},deleteFile:function(){this.showUpload=!0,this.formData.uploadfile="",this.fileList=[],"upload"==this.formData.filetype?(this.formData.filename="",this.formData.filenameUrl="",this.rules.filename[0].required=!1,this.rules.filenameUrl[0].required=!1):"manual"==this.formData.filetype?(this.formData.filenameUrl="",this.formData.uploadfile="",this.formData.uploadfilename="",this.fileList=[],this.rules.filename[0].required=!0,this.rules.filenameUrl[0].required=!1):"remote"==this.formData.filetype&&(this.formData.filename="",this.formData.uploadfile="",this.formData.uploadfilename="",this.fileList=[],this.rules.filename[0].required=!1,this.rules.filenameUrl[0].required=!0)},handleExceed:function(e,a){this.$message.warning(this.$lang.upload_maximum_one_file)},downLoadFile:function(){open(this.$baseUrl+"/downloads/file/id/"+this.$route.query.wid)},handleRemove:function(e){this.formData.uploadfile=""},successUpload:function(e,a,t){200!==e.status?(this.$refs.attachment.clearFiles(),this.formData.uploadfile="",this.$message.error(e.msg)):(this.$message.success(this.$lang.successfully_upload),this.fileList=t,this.showUpload?(this.formData.location=e.data.savename,this.formData.locationname=e.data.origin_name,this.formData.uploadfile=e.data.savename,this.formData.uploadfilename=e.data.origin_name):(this.formData.uploadfile=e.data.savename,this.formData.uploadfilename=e.data.origin_name))},beforeUpload:function(e){var a=e.size/1024/1024<50;a||(this.$message.error(this.$lang.file_size_50),this.$refs.attachment.clearFiles())},getData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var t,i,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t=e.$route.query.wid?e.$route.query.wid:0,a.next=3,Object(r["i"])(t);case 3:i=a.sent,l=i.data,e.pageData=l.data,"edit"===e.$route.query.type&&(e.formData.category=l.data.file_info.category,e.formData.url=l.data.file_info.url,e.formData.id=l.data.file_info.id,e.formData.downloads=l.data.file_info.downloads,e.formData.type=l.data.file_info.type,e.formData.title=l.data.file_info.title,e.formData.description=l.data.file_info.description,e.formData.filetype=l.data.file_info.filetype,e.formData.clientsonly=l.data.file_info.clientsonly,e.formData.productdownload=l.data.file_info.productdownload,e.formData.hidden=l.data.file_info.hidden,e.formData.uploadfile=l.data.file_info.location,e.formData.uploadfilename=l.data.file_info.locationname,e.formData.filename=l.data.file_info.location,e.formData.filenameUrl=l.data.file_info.location,e.fileList=[{name:l.data.file_info.locationname,url:l.data.file_info.url}],e.formData.location=l.data.file_info.location,e.formData.locationname=l.data.file_info.locationname);case 7:case"end":return a.stop()}}),a)})))()},submitForm:function(){var e=this;"upload"===this.formData.filetype&&(this.rules.filename[0].required=!1,this.rules.filenameUrl[0].required=!1),this.$refs.elForm.validate(function(){var a=Object(o["a"])(regeneratorRuntime.mark((function a(t){var i,l,o,s,n,d,f,m;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t){a.next=2;break}return a.abrupt("return",!1);case 2:if("upload"!==e.formData.filetype||e.formData.uploadfile){a.next=5;break}return e.$message.warning(e.$lang.no_upload_file),a.abrupt("return",!1);case 5:if(!e.isAdd){a.next=16;break}return e.formData.cateid=e.$route.query.id,"remote"===e.formData.filetype&&(e.formData.filename=e.formData.filenameUrl),delete e.formData.filenameUrl,a.next=11,Object(r["a"])(e.formData);case 11:i=a.sent,l=i.data,200!==l.status?e.$message.error(l.data):(e.$message.success(l.data),e.$store.commit("fileGroupId",e.$route.query.id),e.$router.push({name:"ServiceSupport"})),a.next=39;break;case 16:if(!e.isEdit){a.next=39;break}if("manual"!==e.formData.filetype){a.next=28;break}return e.formData.cateid=e.$route.query.id,e.showUpload||(e.formData.filename=e.formData.location),delete e.formData.filenameUrl,a.next=23,Object(r["e"])(e.formData);case 23:o=a.sent,s=o.data,200!==s.status?e.$message.error(s.data):(e.$message.success(s.data),e.$store.commit("fileGroupId",e.$route.query.id),e.$router.push({name:"ServiceSupport"})),a.next=39;break;case 28:return e.formData.cateid=e.$route.query.id,"remote"===e.formData.filetype&&e.showUpload?(n=e.formData.filenameUrl.lastIndexOf("/"),d=e.formData.filenameUrl.substring(n+1,e.formData.filenameUrl.length),e.formData.uploadfile=e.formData.filenameUrl,e.formData.uploadfilename=d):(e.formData.uploadfile=e.formData.location,e.formData.uploadfilename=e.formData.locationname),delete e.formData.url,delete e.formData.location,delete e.formData.locationname,delete e.formData.filenameUrl,a.next=36,Object(r["e"])(e.formData);case 36:f=a.sent,m=f.data,200!==m.status?e.$message.error(m.data):(e.$message.success(m.data),e.$store.commit("fileGroupId",e.$route.query.id),e.$router.push({name:"ServiceSupport"}));case 39:e.$store.commit("setFileOp",e.opType);case 40:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())},resetForm:function(){this.isAdd&&(this.fileList=[],this.$refs.elForm.resetFields()),this.isEdit&&(this.getData(),this.showUpload=!1)}}},n=s,d=(t("164d"),t("2877")),f=Object(d["a"])(n,i,l,!1,null,"0e1c9f3c",null);a["default"]=f.exports},e58c:function(e,a,t){"use strict";var i=t("fc6a"),l=t("a691"),o=t("50c4"),r=t("a640"),s=t("ae40"),n=Math.min,d=[].lastIndexOf,f=!!d&&1/[1].lastIndexOf(1,-0)<0,m=r("lastIndexOf"),u=s("indexOf",{ACCESSORS:!0,1:0}),c=f||!m||!u;e.exports=c?function(e){if(f)return d.apply(this,arguments)||0;var a=i(this),t=o(a.length),r=t-1;for(arguments.length>1&&(r=n(r,l(arguments[1]))),r<0&&(r=t+r);r>=0;r--)if(r in a&&a[r]===e)return r||0;return-1}:d}}]);