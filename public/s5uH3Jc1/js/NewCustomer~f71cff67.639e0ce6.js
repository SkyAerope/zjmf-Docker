(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["NewCustomer~f71cff67"],{"48fb":function(t,e,a){"use strict";a.d(e,"e",(function(){return r})),a.d(e,"d",(function(){return i})),a.d(e,"b",(function(){return l})),a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return o}));var n=a("a27e");function r(t){return Object(n["a"])({url:"year_reports",params:t})}function i(){return Object(n["a"])({url:"year_reports_chart"})}function l(t){return Object(n["a"])({url:"new_client",params:t})}function s(t){return Object(n["a"])({url:"product_income",params:t})}function o(t){return Object(n["a"])({url:"forward_client",params:t})}},"6e88":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("h5",[t._v(t._s(t.$lang.new_customer_hint)+" ")]),a("el-row",{style:{marginBottom:"10px"}},[a("div",{staticClass:"my--col"},[a("el-select",{style:{width:"100%"},attrs:{size:"small",placeholder:t.$lang.select_year,clearable:""},on:{change:t.getMonth},model:{value:t.query.year,callback:function(e){t.$set(t.query,"year",e)},expression:"query.year"}},t._l(t.yearOptions,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value,disabled:t.disabled}})})),1)],1),a("div",{staticClass:"my--col"},[a("el-select",{style:{width:"100%"},attrs:{size:"small",placeholder:t.$lang.select_month,clearable:""},model:{value:t.query.month,callback:function(e){t.$set(t.query,"month",e)},expression:"query.month"}},t._l(t.monthOptions,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value,disabled:t.disabled}})})),1)],1),a("div",{staticClass:"my--col my--col_btn"},[a("el-button",{attrs:{disabled:!t.query.month||!t.query.year,type:"primary",size:"small"},on:{click:t.getNewClient}},[t._v(t._s(t.$lang.search)+" ")])],1)]),a("div",{staticClass:"chart-limit"},[t.loading?a("div",{staticClass:"charts_loading clearfix"},[a("div",{staticClass:"limit"},[a("svg",{staticStyle:{margin:"auto",background:"#fff",display:"block"},attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"200px",height:"200px",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid"}},[a("circle",{attrs:{cx:"27.5",cy:"51.2574",r:"5",fill:"#fe718d"}},[a("animate",{attrs:{attributeName:"cy",calcMode:"spline",keySplines:"0 0.5 0.5 1;0.5 0 1 0.5;0.5 0.5 0.5 0.5",repeatCount:"indefinite",values:"57.5;42.5;57.5;57.5",keyTimes:"0;0.3;0.6;1",dur:"1s",begin:"-0.6s"}})]),a("circle",{attrs:{cx:"42.5",cy:"43.951",r:"5",fill:"#f47e60"}},[a("animate",{attrs:{attributeName:"cy",calcMode:"spline",keySplines:"0 0.5 0.5 1;0.5 0 1 0.5;0.5 0.5 0.5 0.5",repeatCount:"indefinite",values:"57.5;42.5;57.5;57.5",keyTimes:"0;0.3;0.6;1",dur:"1s",begin:"-0.44999999999999996s"}})]),a("circle",{attrs:{cx:"57.5",cy:"42.6193",r:"5",fill:"#f8b26a"}},[a("animate",{attrs:{attributeName:"cy",calcMode:"spline",keySplines:"0 0.5 0.5 1;0.5 0 1 0.5;0.5 0.5 0.5 0.5",repeatCount:"indefinite",values:"57.5;42.5;57.5;57.5",keyTimes:"0;0.3;0.6;1",dur:"1s",begin:"-0.3s"}})]),a("circle",{attrs:{cx:"72.5",cy:"46.1283",r:"5",fill:"#abbd81"}},[a("animate",{attrs:{attributeName:"cy",calcMode:"spline",keySplines:"0 0.5 0.5 1;0.5 0 1 0.5;0.5 0.5 0.5 0.5",repeatCount:"indefinite",values:"57.5;42.5;57.5;57.5",keyTimes:"0;0.3;0.6;1",dur:"1s",begin:"-0.15s"}})])]),a("span",[t._v(t._s(t.$lang.load_data))])])]):t._e(),a("div",{staticClass:"mayChartR clearfix"}),a("div",{staticClass:"chart",staticStyle:{height:"500px"},attrs:{id:"myCanvas"}})]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("div",{attrs:{slot:"empty"},slot:"empty"},[!t.tableData.length&&t.tableLoading?a("span",[a("i",{staticClass:"el-icon-loading"}),t._v(" "+t._s(t.$lang.loading)+" ... ")]):t._e(),t.tableData.length||t.tableLoading?t._e():a("span",[t._v(t._s(t.$lang.no_data))])]),a("el-table-column",{attrs:{prop:"day_string",label:t.$lang.date}}),a("el-table-column",{attrs:{prop:"new_clients_count",label:t.$lang.new_client}}),a("el-table-column",{attrs:{prop:"new_order_count",label:t.$lang.new_order_form}}),a("el-table-column",{attrs:{prop:"complete_order_count",label:t.$lang.accomplish_order_form}}),a("el-table-column",{attrs:{prop:"new_ticket_count",label:t.$lang.new_work_order}}),a("el-table-column",{attrs:{prop:"reply_ticket_count",label:t.$lang.replied_work_order}}),a("el-table-column",{attrs:{prop:"cancel_requests_count",label:t.$lang.cancel_request}})],1)],1)},r=[],i=(a("96cf"),a("1da1")),l=a("48fb"),s={metaInfo:{title:window.zjmf_cw_lang.new_client},data:function(){return{tableLoading:!1,monthNum:0,loading:!0,timeSelect:{multiple:!1,label:"name",children:"months"},tableData:[],query:{year:"",month:parseInt(this.$moment().format("MM")),data:[]},monthList:[this.$lang.january,this.$lang.february,this.$lang.march,this.$lang.april,this.$lang.may,this.$lang.june,this.$lang.july,this.$lang.august,this.$lang.september,this.$lang.october,this.$lang.november,this.$lang.december],yearOptions:[],monthOptions:[]}},created:function(){},mounted:function(){var t=this;this.chartFunc(1,[],[],[]),this.getNewClient(),this.getMonth(),window.addEventListener("resize",this.resize),this.$once("hook:beforeDestroy",(function(){window.removeEventListener("resize",t.resize)}))},methods:{getMonth:function(){this.monthNum=parseInt(this.query.year)===parseInt(this.$moment().format("YYYY"))?parseInt(this.$moment().format("MM")):12,this.monthOptions=[];for(var t=0;t<this.monthNum;t++){var e=this.monthList[t],a={value:t+1,label:e};this.monthOptions.push(a)}},resize:function(){this.myChart.resize()},chartFunc:function(t,e,a,n){this.myChart=this.$echarts.init(document.getElementById("myCanvas"));var r={tooltip:{show:!0,backgroundColor:"#fff",borderColor:"#eee",showContent:!0,extraCssText:"box-shadow: 0 1px 9px rgba(0, 0, 0, 0.1);",textStyle:{color:"#1e1e2d",textBorderWidth:1},trigger:"axis",axisPointer:{color:"#D9DAEA"}},grid:{left:"2%",right:"2%",bottom:"10%",top:"10%",containLabel:!0},color:["#007bfc","#3fbf70"],xAxis:{splitLine:{show:!1},axisLine:{lineStyle:{color:"#333"}},axisTick:{show:!1},type:"category",boundaryGap:!1,data:e},yAxis:[{name:this.$lang.new_client,type:"value",axisTick:{show:!1},axisLine:{lineStyle:{color:"#999"}}},{name:this.$lang.accomplish_order_form,type:"value",splitLine:{show:!1},axisLine:{lineStyle:{color:"#999"}}}],series:[{name:this.$lang.new_client,type:"line",smooth:!0,data:a},{name:this.$lang.accomplish_order_form,type:"line",smooth:!0,data:n,yAxisIndex:1}]};this.myChart.setOption(r,!0)},getNewClient:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.tableLoading=!0,t.loading=!0,e.next=4,Object(l["b"])(t.query);case 4:a=e.sent,n=a.data,t.query.year=n.data.new_client_years_group[n.data.new_client_years_group.length-1].value,t.tableData=n.data.client_data,t.yearOptions=n.data.new_client_years_group,t.tableLoading=!1,t.creatEchart();case 11:case"end":return e.stop()}}),e)})))()},creatEchart:function(){var t=[],e=[],a=[];for(var n in this.tableData)t.push(this.tableData[n].day_string),e.push(this.tableData[n].new_clients_count),a.push(this.tableData[n].complete_order_count);this.loading=!1,this.chartFunc(1,t,e,a)}},computed:{},watch:{"query.year":{handler:function(t,e){this.getMonth()},deep:!0}}},o=s,c=(a("7f7c"),a("2877")),u=Object(c["a"])(o,n,r,!1,null,"49cc0dc0",null);e["default"]=u.exports},"7f7c":function(t,e,a){"use strict";var n=a("f5e6d"),r=a.n(n);r.a},f5e6d:function(t,e,a){}}]);