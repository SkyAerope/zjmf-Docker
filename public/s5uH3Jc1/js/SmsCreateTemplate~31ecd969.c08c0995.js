(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["SmsCreateTemplate~31ecd969"],{"342b":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"create"},[a("h2",[e._v(e._s(e.smsId?e.$lang.edit_template:e.$lang.create_template))]),a("h5",[e._v(e._s(e.$lang.SMS_notification))]),a("el-divider"),a("el-row",{attrs:{gutter:15}},[a("el-form",{ref:"elForm",attrs:{model:e.formData,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:e.$lang.selection_region,prop:"range_type"}},[a("el-radio-group",{on:{change:e.typeChange},model:{value:e.formData.range_type,callback:function(t){e.$set(e.formData,"range_type",t)},expression:"formData.range_type"}},e._l(e.range_typeOptions,(function(t,r){return a("el-radio",{key:r,attrs:{label:t.value,disabled:t.disabled}},[e._v(e._s(t.label))])})),1)],1),a("el-form-item",{attrs:{label:e.$lang.sms_provider,prop:"sms_operator"}},[a("el-select",{style:{width:"260px"},attrs:{size:"small",placeholder:e.$lang.select_sms_provider},on:{change:e.smsSupplierChange},model:{value:e.formData.sms_operator,callback:function(t){e.$set(e.formData,"sms_operator",t)},expression:"formData.sms_operator"}},e._l(e.sms_operatorOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.value,value:e.label}})})),1)],1),e.smsId?a("el-form-item",{attrs:{label:e.$lang.template_id,prop:"id"}},[a("el-input",{style:{width:"260px"},attrs:{size:"small",placeholder:e.$lang.enter_template_id,clearable:""},model:{value:e.formData.template_id,callback:function(t){e.$set(e.formData,"template_id",t)},expression:"formData.template_id"}})],1):e._e(),e.smsId?a("el-form-item",{attrs:{label:e.$lang.template_status,prop:"status"}},[a("el-select",{style:{width:"260px"},attrs:{size:"small",placeholder:e.$lang.select_template_status,clearable:""},model:{value:e.formData.status,callback:function(t){e.$set(e.formData,"status",t)},expression:"formData.status"}},e._l(e.statusOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id,disabled:e.disabled}})})),1)],1):e._e(),a("el-form-item",{attrs:{label:e.$lang.title,prop:"title"}},[a("el-input",{style:{width:"260px"},attrs:{size:"small",placeholder:e.$lang.enter_title,clearable:""},model:{value:e.formData.title,callback:function(t){e.$set(e.formData,"title",t)},expression:"formData.title"}})],1),a("el-form-item",{attrs:{label:e.$lang.content,prop:"content"}},[a("el-input",{style:{width:"260px"},attrs:{size:"small",type:"textarea",placeholder:e.$lang.enter_content,autosize:{minRows:5,maxRows:5}},model:{value:e.formData.content,callback:function(t){e.$set(e.formData,"content",t)},expression:"formData.content"}})],1),a("el-form-item",{attrs:{label:e.$lang.describe,prop:"describe"}},[0==e.formData.range_type?a("span",[e._v(e._s(e.descriptionTemplate["cn"]))]):e._e(),1==e.formData.range_type?a("span",[e._v(e._s(e.descriptionTemplate["global"]))]):e._e(),2==e.formData.range_type?a("span",[e._v(e._s(e.descriptionTemplate["cnpro"]))]):e._e()]),a("el-form-item",{attrs:{label:e.$lang.remark,prop:"remark"}},[a("el-input",{style:{width:"260px"},attrs:{size:"small",placeholder:e.$lang.enter_remarks,clearable:""},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",loading:e.btnLoading},on:{click:e.submitForm}},[e._v(e._s(e.$lang.submit))]),a("el-button",{attrs:{size:"small"},on:{click:e.goBack}},[e._v(e._s(e.$lang.get_back))]),a("el-button",{attrs:{size:"small"},on:{click:e.resetForm}},[e._v(e._s(e.$lang.reset))])],1)],1)],1),""!==e.areaHtml?a("h4",[e._v(e._s(e.$lang.sms_explain))]):e._e(),""!==e.areaHtml?a("div",{staticClass:"emailedit_baseArgs",domProps:{innerHTML:e._s(e.areaHtml)}}):e._e()],1)},s=[],n=(a("a4d3"),a("e01a"),a("99af"),a("4160"),a("d81d"),a("45fc"),a("b0c0"),a("ac1f"),a("5319"),a("159b"),a("96cf"),a("1da1")),o=a("6770"),i={metaInfo:{title:window.zjmf_cw_lang.create_sms_template},data:function(){return{formData:{range_type:0,sms_operator:"",title:void 0,content:void 0,remark:void 0,template_id:"",status:""},rules:{range_type:[{required:!0,message:this.$lang.type_cannot_be_empty,trigger:"change"}],sms_operator:[{required:!0,message:this.$lang.select_sms_provider,trigger:"change"}],title:[{required:!0,message:this.$lang.enter_title,trigger:"blur"}],content:[{required:!0,message:this.$lang.enter_content,trigger:"blur"}],remark:[{required:!0,message:this.$lang.enter_remarks,trigger:"blur"}],status:[{required:!0,message:this.$lang.select_template_status,trigger:"change"}]},range_typeOptions:[{label:this.$lang.domestic,value:0},{label:this.$lang.international,value:1},{label:this.$lang.marketing,value:2}],descriptionTemplate:{},sms_operatorOptions:[],sms_operatorOptionsAll:[],templateTypeOptions:[],templateMsg:"",tempCode:void 0,base_args:[],btnLoading:!1,areaHtml:"",smsId:this.$route.query.id,statusOptions:[]}},methods:{getEditTemplate:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["t"])(e.smsId);case 2:for(s in a=t.sent,r=a.data,r.temp)e.formData[s]=r.temp[s];e.sms_operatorOptions=[],e.sms_operatorOptionsAll.map((function(t){var a=t.sms_type.some((function(e){return 0==r.temp.range_type&&"cn"==e.name||(1==r.temp.range_type&&"global"==e.name||(2==r.temp.range_type&&"cnpro"==e.name||void 0))}));a&&e.sms_operatorOptions.push(t)})),e.smsSupplierChange(r.temp.sms_operator),e.statusOptions=r.status;case 9:case"end":return t.stop()}}),t)})))()},createTemplatePage:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["c"])();case 2:a=t.sent,r=a.data,e.sms_operatorOptionsAll=r.allowedSmsOperator,e.smsId?e.getEditTemplate():(e.sms_operatorOptions=[],r.allowedSmsOperator.map((function(t){var a=t.sms_type.some((function(e){if("cn"==e.name)return!0}));a&&e.sms_operatorOptions.push(t)})),e.sms_operatorOptions[0]&&e.sms_operatorOptions[0].label&&(e.formData.sms_operator=e.sms_operatorOptions[0].label,e.smsSupplierChange(e.sms_operatorOptions[0].label))),200!==r.status?e.$message.error(r.msg):function(){e.templateTypeOptions=r.data;var t=[];for(var a in r.combine)(r.combine[a]||[]).forEach((function(e){t.push(e)}));e.base_args=(r.base_args||[]).concat(t||[])}();case 7:case"end":return t.stop()}}),t)})))()},tempSelectChange:function(){var e=this;(this.templateTypeOptions||[]).forEach((function(t){e.tempCode===t.id&&("aliyun"===e.formData.sms_operator?e.templateMsg=t.var.replace(/@var/g,"$"):"submail"===e.formData.sms_operator?e.templateMsg=t.var.replace(/\$/g,"@var"):"smsbao"===e.formData.sms_operator&&(e.templateMsg=t.var.replace(/\$/g,"")))}))},submitForm:function(){var e=this;this.$refs.elForm.validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){var r,s,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return",!1);case 2:if(e.btnLoading=!0,!e.smsId){t.next=12;break}return t.next=6,Object(o["s"])(e.formData);case 6:r=t.sent,s=r.data,200!==s.status?e.$message.error(s.msg):(e.$message.success(s.msg),e.$router.go(-1)),e.btnLoading=!1,t.next=18;break;case 12:return t.next=14,Object(o["d"])(e.formData);case 14:n=t.sent,i=n.data,200!==i.status?e.$message.error(i.msg):(e.$message.success(i.msg),e.$router.go(-1)),e.btnLoading=!1;case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},resetForm:function(){this.$refs.elForm.resetFields()},goBack:function(){this.$router.go(-1)},typeChange:function(e){var t=this,a="";0==e&&(a="cn"),1==e&&(a="global"),2==e&&(a="cnpro"),this.sms_operatorOptions=[],this.sms_operatorOptionsAll.map((function(e,r){var s=e.sms_type.some((function(e){if(e.name==a)return!0}));s&&t.sms_operatorOptions.push(e)})),this.sms_operatorOptions[0]&&this.sms_operatorOptions[0].label&&(this.formData.sms_operator=this.sms_operatorOptions[0].label,this.smsSupplierChange(this.sms_operatorOptions[0].label))},smsSupplierChange:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(o["f"])({name:e});case 2:r=a.sent,s=r.data,200===s.status&&(t.areaHtml=s.description,t.descriptionTemplate=s.descriptionTemplate);case 5:case"end":return a.stop()}}),a)})))()}},created:function(){this.createTemplatePage()}},l=i,m=(a("9c00"),a("2877")),c=Object(m["a"])(l,r,s,!1,null,null,null);t["default"]=c.exports},"45fc":function(e,t,a){"use strict";var r=a("23e7"),s=a("b727").some,n=a("a640"),o=a("ae40"),i=n("some"),l=o("some");r({target:"Array",proto:!0,forced:!i||!l},{some:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}})},6770:function(e,t,a){"use strict";a.d(t,"k",(function(){return s})),a.d(t,"l",(function(){return n})),a.d(t,"o",(function(){return o})),a.d(t,"n",(function(){return i})),a.d(t,"d",(function(){return l})),a.d(t,"i",(function(){return m})),a.d(t,"m",(function(){return c})),a.d(t,"q",(function(){return u})),a.d(t,"t",(function(){return p})),a.d(t,"s",(function(){return f})),a.d(t,"a",(function(){return g})),a.d(t,"c",(function(){return d})),a.d(t,"r",(function(){return _})),a.d(t,"b",(function(){return b})),a.d(t,"j",(function(){return h})),a.d(t,"p",(function(){return v})),a.d(t,"g",(function(){return O})),a.d(t,"e",(function(){return $})),a.d(t,"h",(function(){return y})),a.d(t,"f",(function(){return k}));var r=a("a27e");function s(){return Object(r["a"])({url:"config_message/config_mobile"})}function n(e){return Object(r["a"])({url:"config_message/config_mobile_post",method:"post",data:e})}function o(e){return Object(r["a"])({url:"config_message/template_list",method:"get",params:e})}function i(e,t){return Object(r["a"])({url:"config_message/delete_template",params:{ids:e,type:t}})}function l(e){return Object(r["a"])({url:"config_message/create_template",method:"post",data:e})}function m(e,t){return Object(r["a"])({url:"config_message/set_sms",params:{sms_operator:e,range_type:t}})}function c(e){return Object(r["a"])({url:"config_message/set_sms_post",method:"post",data:e})}function u(e){return Object(r["a"])({url:"config_message/test_message_template",method:"post",data:e})}function p(e){return Object(r["a"])({url:"config_message/update_template/".concat(e)})}function f(e){return Object(r["a"])({url:"config_message/update_template_post",method:"post",data:e})}function g(e){return Object(r["a"])({url:"config_message/test_message_template_page",params:e})}function d(){return Object(r["a"])({url:"config_message/create_template_page"})}function _(e){return Object(r["a"])({url:"config_message/update_tem_status",params:e})}function b(e,t){return Object(r["a"])({url:"config_message/check_post",method:"post",data:{ids:e,type:t}})}function h(e){return Object(r["a"])({url:"config_message/send_sms",method:"post",data:e})}function v(e){return Object(r["a"])({url:"config_message/test_message_template_page",params:e})}function O(e){return Object(r["a"])({url:"config_message/mobiletemplate_list",params:e})}function $(e){return Object(r["a"])({url:"email_template/emailtemplate_list",params:e})}function y(e){return Object(r["a"])({url:"config_message/sendmessage_post",method:"post",data:e})}function k(e){return Object(r["a"])({url:"config_message/get_template_desc",params:e})}},8418:function(e,t,a){"use strict";var r=a("c04e"),s=a("9bf2"),n=a("5c6c");e.exports=function(e,t,a){var o=r(t);o in e?s.f(e,o,n(0,a)):e[o]=a}},"99af":function(e,t,a){"use strict";var r=a("23e7"),s=a("d039"),n=a("e8b5"),o=a("861d"),i=a("7b0b"),l=a("50c4"),m=a("8418"),c=a("65f0"),u=a("1dde"),p=a("b622"),f=a("2d00"),g=p("isConcatSpreadable"),d=9007199254740991,_="Maximum allowed index exceeded",b=f>=51||!s((function(){var e=[];return e[g]=!1,e.concat()[0]!==e})),h=u("concat"),v=function(e){if(!o(e))return!1;var t=e[g];return void 0!==t?!!t:n(e)},O=!b||!h;r({target:"Array",proto:!0,forced:O},{concat:function(e){var t,a,r,s,n,o=i(this),u=c(o,0),p=0;for(t=-1,r=arguments.length;t<r;t++)if(n=-1===t?o:arguments[t],v(n)){if(s=l(n.length),p+s>d)throw TypeError(_);for(a=0;a<s;a++,p++)a in n&&m(u,p,n[a])}else{if(p>=d)throw TypeError(_);m(u,p++,n)}return u.length=p,u}})},"9c00":function(e,t,a){"use strict";var r=a("faa0"),s=a.n(r);s.a},faa0:function(e,t,a){}}]);