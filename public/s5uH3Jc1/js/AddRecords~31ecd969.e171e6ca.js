(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["AddRecords~31ecd969"],{"4de4":function(t,a,e){"use strict";var l=e("23e7"),o=e("b727").filter,i=e("1dde"),r=e("ae40"),s=i("filter"),n=r("filter");l({target:"Array",proto:!0,forced:!s||!n},{filter:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},"78e3":function(t,a,e){"use strict";e.d(a,"d",(function(){return o})),e.d(a,"e",(function(){return i})),e.d(a,"b",(function(){return r})),e.d(a,"c",(function(){return s})),e.d(a,"a",(function(){return n}));var l=e("a27e");function o(t){return Object(l["a"])({url:"cerify_log_list",params:t})}function i(t){return Object(l["a"])({url:"certifi_status",method:"post",data:t})}function r(t){return Object(l["a"])({url:"cerify_history_log",method:"get",params:t})}function s(t){return Object(l["a"])({url:"authorInfo",method:"get",params:t})}function n(t){return Object(l["a"])({url:"authorSubmit",method:"post",data:t})}},9336:function(t,a,e){"use strict";var l=e("e973"),o=e.n(l);o.a},c663:function(t,a,e){"use strict";e.r(a);var l=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"add-records"},[e("h2",[t._v(t._s(t.$lang.real_name_authentication_record))]),e("el-form",{ref:"form",staticClass:"overflowX",attrs:{model:t.formData,rules:t.rules,"label-width":"120px"}},[e("el-form-item",{attrs:{label:t.$lang.select_authentication_type,prop:"type"}},[e("el-select",{staticStyle:{width:"250px"},attrs:{size:"small",placeholder:t.$lang.select_authentication_type_tip},on:{change:t.changeType},model:{value:t.formData.type,callback:function(a){t.$set(t.formData,"type",a)},expression:"formData.type"}},t._l(t.autTypes,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t.formData.type?e("el-form-item",{attrs:{label:t.$lang.select_authentication_method,prop:"certifi_type"}},[e("el-select",{staticStyle:{width:"250px"},attrs:{size:"small",placeholder:t.$lang.select_authentication_method_tip},model:{value:t.formData.certifi_type,callback:function(a){t.$set(t.formData,"certifi_type",a)},expression:"formData.certifi_type"}},t._l(t.autMethods,(function(t){return e("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})})),1)],1):t._e(),t._l(t.customer,(function(a,l){return e("div",{key:l},[t.formData.type&&"text"==a.type?e("el-form-item",{attrs:{label:a.title+"：",prop:a.field}},[e("el-input",{staticStyle:{width:"250px"},attrs:{size:"small",placeholder:a.tip},on:{input:t.inputChange},model:{value:t.formData[a.field],callback:function(e){t.$set(t.formData,a.field,e)},expression:"formData[item.field]"}})],1):t._e(),t.formData.type&&"file"==a.type?e("el-form-item",{attrs:{label:a.title+"：",prop:a.field}},[e("el-upload",{staticClass:"upload-demo",attrs:{data:{key:a.field},action:t.uploadAction,limit:1,"show-file-list":!1,"before-upload":t.beforeUpload,"on-success":t.uploadSuccess}},[e("el-button",{attrs:{size:"small",type:"primary"}},[t._v(t._s(t.$lang.upload_files))])],1)],1):t._e()],1)})),t.formData.type&&1==t.formData.type?e("el-form-item",{attrs:{label:t.$lang.real_user_name+"：",prop:"auth_real_name"}},[e("el-input",{key:t.tempIndex,staticStyle:{width:"250px"},attrs:{size:"small",placeholder:t.$lang.please_enter_real_user_name},model:{value:t.formData.auth_real_name,callback:function(a){t.$set(t.formData,"auth_real_name",a)},expression:"formData.auth_real_name"}})],1):t._e(),t.formData.type&&1==t.formData.type?e("el-form-item",{attrs:{label:t.$lang.document_type+"：",prop:"cardType"}},[e("el-input",{staticStyle:{width:"250px"},attrs:{size:"small",disabled:"",placeholder:t.$lang.document_type_tip},model:{value:t.formData.cardType,callback:function(a){t.$set(t.formData,"cardType",a)},expression:"formData.cardType"}})],1):t._e(),t.formData.type&&1==t.formData.type?e("el-form-item",{attrs:{label:t.$lang.ID_card_type+"：",prop:"auth_card_type"}},[e("el-radio-group",{model:{value:t.formData.auth_card_type,callback:function(a){t.$set(t.formData,"auth_card_type",a)},expression:"formData.auth_card_type"}},[e("el-radio",{attrs:{label:1}},[t._v(t._s(t.$lang.mainland))]),e("el-radio",{attrs:{label:0}},[t._v(t._s(t.$lang.other_regions))])],1)],1):t._e(),t.formData.type&&2==t.formData.type?e("el-form-item",{attrs:{label:t.$lang.enterprise_name+"：",prop:"company_name"}},[e("el-input",{key:t.tempIndex,staticStyle:{width:"250px"},attrs:{size:"small",placeholder:t.$lang.enterprise_name_tip},model:{value:t.formData.company_name,callback:function(a){t.$set(t.formData,"company_name",a)},expression:"formData.company_name"}})],1):t._e(),t.formData.type&&2==t.formData.type?e("el-form-item",{attrs:{label:t.$lang.business_license_of_a_corporation+"：",prop:"company_organ_code"}},[e("el-input",{staticStyle:{width:"250px"},attrs:{size:"small",placeholder:t.$lang.business_license_of_a_corporation_tip},model:{value:t.formData.company_organ_code,callback:function(a){t.$set(t.formData,"company_organ_code",a)},expression:"formData.company_organ_code"}})],1):t._e(),t.formData.type&&2==t.formData.type?e("el-form-item",{attrs:{label:t.$lang.name_author+"：",prop:"auth_real_name"}},[e("el-input",{staticStyle:{width:"250px"},attrs:{size:"small",placeholder:t.$lang.auth_real_name_tip},model:{value:t.formData.auth_real_name,callback:function(a){t.$set(t.formData,"auth_real_name",a)},expression:"formData.auth_real_name"}})],1):t._e(),t.formData.type?e("el-form-item",{attrs:{label:t.$lang.certificate_number+"：",prop:"idcard"}},[e("el-input",{staticStyle:{width:"250px"},attrs:{size:"small",placeholder:t.$lang.certificate_number_tip},model:{value:t.formData.idcard,callback:function(a){t.$set(t.formData,"idcard",a)},expression:"formData.idcard"}})],1):t._e(),t.formData.type?e("el-form-item",{attrs:{label:t.$lang.front_of_ID_card+"："}},[e("el-upload",{staticClass:"upload-demo",attrs:{data:{key:"img_one"},action:t.uploadAction,limit:1,"show-file-list":!1,"before-upload":t.beforeUpload,"on-success":t.uploadSuccess,accept:".jpg,.gif,.jpeg,.png"}},[e("el-button",{attrs:{size:"small",type:"primary"}},[t._v(t._s(t.$lang.upload_files))]),e("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(t._s(t.$lang.allow_suffixes))])],1),t.tempUrl["img_one"]?e("img",{staticClass:"img-size",attrs:{src:t.tempUrl["img_one"]}}):t._e()],1):t._e(),t.formData.type?e("el-form-item",{attrs:{label:t.$lang.back_of_ID_card+"："}},[e("el-upload",{staticClass:"upload-demo",attrs:{data:{key:"img_two"},action:t.uploadAction,limit:1,"show-file-list":!1,"before-upload":t.beforeUpload,"on-success":t.uploadSuccess,accept:".jpg,.gif,.jpeg,.png"}},[e("el-button",{attrs:{size:"small",type:"primary"}},[t._v(t._s(t.$lang.upload_files))]),e("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(t._s(t.$lang.allow_suffixes))])],1),t.tempUrl["img_two"]?e("img",{staticClass:"img-size",attrs:{src:t.tempUrl["img_two"]}}):t._e()],1):t._e(),t.formData.type&&2==t.formData.type?e("el-form-item",{attrs:{label:t.$lang.business_license+"："}},[e("el-upload",{staticClass:"upload-demo",attrs:{data:{key:"img_three"},action:t.uploadAction,limit:1,"show-file-list":!1,"before-upload":t.beforeUpload,"on-success":t.uploadSuccess,accept:".jpg,.gif,.jpeg,.png"}},[e("el-button",{attrs:{size:"small",type:"primary"}},[t._v(t._s(t.$lang.upload_files))]),e("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(t._s(t.$lang.allow_suffixes))])],1),t.tempUrl["img_three"]?e("img",{staticClass:"img-size",attrs:{src:t.tempUrl["img_three"]}}):t._e()],1):t._e(),t.formData.type&&2==t.formData.type&&1==t.config.certifi_business_is_author?e("el-form-item",{attrs:{label:t.$lang.certificate_of_authorization+"："}},[e("el-upload",{staticClass:"upload-demo",attrs:{data:{key:"img_four"},action:t.uploadAction,limit:1,"show-file-list":!1,"before-upload":t.beforeUpload,"on-success":t.uploadSuccess,accept:".jpg,.gif,.jpeg,.png"}},[e("el-button",{attrs:{size:"small",type:"primary"}},[t._v(t._s(t.$lang.upload_files))]),e("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(t._s(t.$lang.allow_suffixes))])],1),t.tempUrl["img_four"]?e("img",{staticClass:"img-size",attrs:{src:t.tempUrl["img_four"]}}):t._e()],1):t._e(),t.formData.type&&2==t.formData.type&&1==t.config.certifi_business_is_author?e("el-form-item",[t.config.certifi_business_author_path?e("span",[t._v(" "+t._s(t.tempTemplate)+" ")]):t._e(),e("el-button",{attrs:{disabled:!t.config.certifi_business_author_path,size:"small",type:"primary"},on:{click:t.downloadAuth}},[t._v(t._s(t.$lang.download_authorization_template))])],1):t._e(),t.formData.type?e("el-form-item",{attrs:{label:t.$lang.authentication_status+"：",prop:"status"}},[e("el-select",{staticStyle:{width:"250px"},attrs:{size:"small",placeholder:t.$lang.authentication_status_tip},model:{value:t.formData.status,callback:function(a){t.$set(t.formData,"status",a)},expression:"formData.status"}},t._l(t.autStatus,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1):t._e()],2),e("div",{staticClass:"bottomOperationAdd"},[e("el-button",{attrs:{size:"small",type:"primary",loading:t.btnLoading},on:{click:t.submit}},[t._v(t._s(t.$lang.submit))]),e("el-button",{attrs:{size:"small"},on:{click:t.back}},[t._v(t._s(t.$lang.get_back))]),e("el-button",{attrs:{size:"small"},on:{click:t.reset}},[t._v(t._s(t.$lang.reset))])],1)],1)},o=[],i=(e("4de4"),e("ac1f"),e("1276"),e("78e3")),r={data:function(){return{tempTemplate:"",tempIndex:1,uid:this.$route.query.uid||"",uploadAction:this.$baseUrl+"/uploadCertificate",btnLoading:!1,autTypes:[{label:this.$lang.person_certified,value:1},{label:this.$lang.enterprise_certified,value:2}],company:[],person:[],config:{},customer:[],autMethods:[],autStatus:[{label:this.$lang.have_real_name,value:1},{label:this.$lang.no_real_name,value:2}],formData:{uid:this.$route.query.uid||"",type:void 0,certifi_type:void 0,cardType:"居民身份证",auth_real_name:"",auth_card_type:1,idcard:"",img_one:"",img_two:"",status:void 0,company_name:"",company_organ_code:"",img_three:"",img_four:""},tempUrl:{},rules:{}}},created:function(){},mounted:function(){this.getData()},watch:{"formData.type":function(t){1==t?this.autMethods=this.person:2==t&&(this.autMethods=this.company)},"formData.certifi_type":function(t){if(t){var a=this.autMethods.filter((function(a){return a.value==t}));this.customer=a[0]?a[0].custom_fields:[]}}},methods:{downloadAuth:function(){location.href="/admin/config_certifi/authorDown"},inputChange:function(){this.tempIndex++},changeType:function(){this.formData.certifi_type=void 0},beforeUpload:function(t){},uploadSuccess:function(t,a,e){200===t.data.status?(this.formData[t.key]=t.data.savename,this.tempUrl[t.key]=t.path,this.$forceUpdate()):this.$message.error(t.msg)},getData:function(){var t=this;Object(i["c"])({uid:this.uid}).then((function(a){if(200===a.data.status&&(t.company=a.data.data.company||[],t.config=a.data.data.config||{},t.person=a.data.data.person||[],t.tempTemplate=a.data.data.config.certifi_business_author_path?a.data.data.config.certifi_business_author_path.split("^")[1]:"",a.data.data.log))for(var e in t.formData.type=a.data.data.log.type,t.formData.certifi_type=a.data.data.log.certifi_type,t.formData.auth_real_name=a.data.data.log.certifi_name,t.formData.idcard=a.data.data.log.idcard,t.formData.status=a.data.data.log.status,t.formData.company_name=a.data.data.log.company_name,t.formData.company_organ_code=a.data.data.log.company_organ_code,t.tempUrl["img_three"]=a.data.data.log.pic&&a.data.data.log.pic[2]?"http://"+a.data.data.log.pic[2]:"",t.tempUrl["img_four"]=a.data.data.log.pic&&a.data.data.log.pic[3]?"http://"+a.data.data.log.pic[3]:"",t.formData.img_three=a.data.data.log.pic&&a.data.data.log.pic[2]?a.data.data.log.pic[2].split("/")[a.data.data.log.pic[2].split("/").length-1]:"",t.formData.img_four=a.data.data.log.pic&&a.data.data.log.pic[3]?a.data.data.log.pic[3].split("/")[a.data.data.log.pic[3].split("/").length-1]:"",t.tempUrl["img_one"]=a.data.data.log.pic&&a.data.data.log.pic[0]?"http://"+a.data.data.log.pic[0]:"",t.tempUrl["img_two"]=a.data.data.log.pic&&a.data.data.log.pic[1]?"http://"+a.data.data.log.pic[1]:"",t.formData.img_one=a.data.data.log.pic&&a.data.data.log.pic[0]?a.data.data.log.pic[0].split("/")[a.data.data.log.pic[0].split("/").length-1]:"",t.formData.img_two=a.data.data.log.pic&&a.data.data.log.pic[1]?a.data.data.log.pic[1].split("/")[a.data.data.log.pic[1].split("/").length-1]:"",a.data.data.log.custom_fields_log_arr)t.formData[e]=a.data.data.log.custom_fields_log_arr[e].val}))},submit:function(){var t=this;this.$refs["form"].validate((function(a){a&&Object(i["a"])(t.formData).then((function(a){200===a.data.status?(t.$message.success(a.data.msg),t.getData()):t.$message.error(a.data.msg)}))}))},back:function(){this.$router.back()},reset:function(){this.tempUrl={},this.tempTemplate="",this.formData={uid:this.$route.query.uid||"",type:void 0,certifi_type:void 0,cardType:"居民身份证",auth_real_name:"",auth_card_type:1,idcard:"",img_one:"",img_two:"",status:void 0,company_name:"",company_organ_code:"",img_three:"",img_four:""}}}},s=r,n=(e("9336"),e("2877")),p=Object(n["a"])(s,l,o,!1,null,"10120036",null);a["default"]=p.exports},e973:function(t,a,e){}}]);