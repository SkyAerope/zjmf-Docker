(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["SupportTicketDetail~f71cff67"],{5394:function(t,e,a){"use strict";a.d(e,"e",(function(){return r})),a.d(e,"d",(function(){return s})),a.d(e,"a",(function(){return i})),a.d(e,"c",(function(){return o})),a.d(e,"b",(function(){return c}));var n=a("a27e");function r(){return Object(n["a"])({url:"list_ticket_status"})}function s(t){return Object(n["a"])({url:"list_ticket_status/"+t})}function i(t){return Object(n["a"])({url:"add_ticket_status",method:"post",data:t})}function o(t){return Object(n["a"])({url:"save_ticket_status",method:"post",data:t})}function c(t){return Object(n["a"])({url:"delete_ticket_status",method:"post",data:t})}},5599:function(t,e,a){},a200:function(t,e,a){"use strict";a.d(e,"j",(function(){return r})),a.d(e,"b",(function(){return s})),a.d(e,"n",(function(){return i})),a.d(e,"q",(function(){return o})),a.d(e,"i",(function(){return c})),a.d(e,"p",(function(){return l})),a.d(e,"c",(function(){return u})),a.d(e,"f",(function(){return d})),a.d(e,"a",(function(){return m})),a.d(e,"d",(function(){return f})),a.d(e,"e",(function(){return p})),a.d(e,"g",(function(){return g})),a.d(e,"m",(function(){return h})),a.d(e,"h",(function(){return _})),a.d(e,"k",(function(){return b})),a.d(e,"l",(function(){return v})),a.d(e,"o",(function(){return k})),a.d(e,"s",(function(){return y})),a.d(e,"t",(function(){return w})),a.d(e,"u",(function(){return $})),a.d(e,"r",(function(){return x}));var n=a("a27e");function r(t){return Object(n["a"])({url:"add_ticket_page",params:t})}function s(t){return Object(n["a"])({url:"add_ticket",method:"post",data:t})}function i(t){return Object(n["a"])({url:"list_ticket",params:t})}function o(t){return Object(n["a"])({url:"reply_ticket",method:"post",data:t})}function c(t){return Object(n["a"])({url:"save_ticket_reply",method:"post",data:t})}function l(t){return Object(n["a"])({url:"merge_ticket",method:"post",data:t})}function u(t){return Object(n["a"])({url:"close_ticket",method:"post",data:t})}function d(t){return Object(n["a"])({url:"delete_ticket",method:"post",data:t})}function m(t){return Object(n["a"])({url:"add_ticket_note",method:"post",data:t})}function f(t){return Object(n["a"])({url:"delete_ticket_note",method:"post",data:t})}function p(t){return Object(n["a"])({url:"delete_ticket_reply",method:"post",data:t})}function g(t){return Object(n["a"])({url:"download_ticket_attachment",params:t})}function h(t){return Object(n["a"])({url:"list_ticket/"+t})}function _(t){return Object(n["a"])({url:"save_ticket",method:"post",data:t})}function b(){return Object(n["a"])({url:"getClient"})}function v(){return Object(n["a"])({url:"getTicketDepartment"})}function k(t){return Object(n["a"])({url:"hostbyuid",params:t})}function y(t){return Object(n["a"])({url:"ticket_receive",method:"put",data:t})}function w(t){return Object(n["a"])({url:"ticket_transfer_list",params:t})}function $(t){return Object(n["a"])({url:"ticket_transfer",method:"put",data:t})}function x(t){return Object(n["a"])({url:"tastes/editUserTanstes",method:"post",data:t})}},af9c:function(t,e,a){"use strict";a.d(e,"n",(function(){return r})),a.d(e,"m",(function(){return s})),a.d(e,"j",(function(){return i})),a.d(e,"a",(function(){return o})),a.d(e,"e",(function(){return c})),a.d(e,"q",(function(){return l})),a.d(e,"c",(function(){return u})),a.d(e,"k",(function(){return d})),a.d(e,"o",(function(){return m})),a.d(e,"l",(function(){return f})),a.d(e,"d",(function(){return p})),a.d(e,"p",(function(){return g})),a.d(e,"r",(function(){return h})),a.d(e,"b",(function(){return _})),a.d(e,"i",(function(){return b})),a.d(e,"f",(function(){return v})),a.d(e,"g",(function(){return k})),a.d(e,"h",(function(){return y}));var n=a("a27e");function r(t){return Object(n["a"])({url:"order/search_page",params:t})}function s(t){return Object(n["a"])({url:"order/search",params:t})}function i(t){return Object(n["a"])({url:"order/check",params:t})}function o(t){return Object(n["a"])({url:"order/cancel",params:t})}function c(t){return Object(n["a"])({url:"orders/delete",method:"delete",params:t})}function l(t){return Object(n["a"])({url:"order/create_page",params:t})}function u(t){return Object(n["a"])({url:"order/create",method:"post",data:t})}function d(t){return Object(n["a"])({url:"orders/"+t})}function m(t){return Object(n["a"])({url:"orders/set_config",params:t})}function f(t){return Object(n["a"])({url:"get_total",method:"post",data:t})}function p(t){return Object(n["a"])({url:"order/save_promo_code",method:"post",data:t})}function g(t){return Object(n["a"])({url:"orders/active",method:"post",data:t})}function h(){return Object(n["a"])({url:"order/promo_code_page"})}function _(t){return Object(n["a"])({url:"orders/change_status",method:"post",data:t})}function b(t){return Object(n["a"])({url:"order/order_commission",method:"post",data:t})}function v(t){return Object(n["a"])({url:"order/getclients",params:{username:t}})}function k(t){return Object(n["a"])({url:"invoice/renew",method:"get",params:t})}function y(t){return Object(n["a"])({url:"zjmf_finance_api/renew",method:"get",params:t})}},f1234:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"detail"},[a("el-row",{staticClass:"detail_first",attrs:{type:"flex",justify:"space-between"}},[a("span",[a("span",{staticClass:"first_left_department"},[t._v(t._s(t.related.dpt_name))]),a("span",{staticClass:"first_left_title"},[t._v("#"+t._s(t.tid)+" - "+t._s(t.formData.title))])]),a("span",[a("span",{staticClass:"mr-10",staticStyle:{"min-width":"70px"}},[t.noPower?t._e():a("el-select",{staticClass:"mr-10",staticStyle:{width:"150px"},attrs:{size:"small",placeholder:t.$lang.please_choose},on:{change:function(e){return t.closeTicketHandleClick(t.formData.status)}},model:{value:t.formData.status,callback:function(e){t.$set(t.formData,"status",e)},expression:"formData.status"}},t._l(t.statusOptions,(function(t){return a("el-option",{key:t.id,style:{color:t.color},attrs:{label:t.title,value:t.id}})})),1)],1),a("el-button",{attrs:{size:"small"},on:{click:function(e){return t.closeTicketHandleClick(4,"confirm")}}},[t._v(t._s(t.$lang.shut_down))]),t.noPower?t._e():a("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover"}},[a("el-row",[a("el-col",{attrs:{span:24}},[t._v(t._s(t.$lang.work_order_status_hint))]),a("el-col",{staticClass:"tar",attrs:{span:24}},[a("router-link",{attrs:{to:{path:"work-order-status"},target:"_blank"}},[a("el-link",{attrs:{type:"primary"}},[t._v(t._s(t.$lang.set_work_order_status))])],1)],1)],1),a("i",{staticClass:"el-icon-question blue_qus",attrs:{slot:"reference"},slot:"reference"})],1),a("span",{staticClass:"color-999 fz-12"},[t._v(t._s(t.$lang.processing_staff)+"：")]),a("span",{staticClass:"color-333 fz-12 mr-20"},[t._v(t._s(t.related.handle_name||"-"))]),0===t.related.handle?a("el-button",{attrs:{size:"small",type:"danger",plain:"",loading:t.receiveLoading},on:{click:t.ticketReceive}},[t._v(t._s(t.$lang.order_receiving)+" ")]):4!==t.related.status?a("el-button",{attrs:{size:"small",type:"danger",plain:"",loading:t.handoverItemLoading},on:{click:t.handoverItem}},[t._v(t._s(t.$lang.turn_over_order)+" ")]):t._e(),a("span",{staticClass:"last_reply ml-20"},[t._v(t._s(t.$lang.last_reply_two)+":"+t._s(t.replyList[0]?t.$timeDiff(1e3*t.replyList[0].time):"-"))])],1)]),a("div",{staticClass:"detail_second"},[a("el-tabs",{on:{"tab-click":t.tabChange},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{staticStyle:{width:"99.5%"},attrs:{label:t.$lang.add_reply,name:"addReplyTab"}},[a("tinymce-editor",{ref:"replyEditor",on:{blur:function(e){return t.onReplyEditorBlur(e)},focus:function(e){return t.onReplyEditorFocus(e)},change:function(e){return t.onReplyEditorChange(e)}},model:{value:t.replyContent,callback:function(e){t.replyContent=e},expression:"replyContent"}}),a("el-col",{staticClass:"mt-10 flex",attrs:{span:12}},[a("el-button",{staticStyle:{"margin-right":"10px",height:"33px"},attrs:{size:"small",icon:"el-icon-edit",type:"primary",loading:t.btnLoading},on:{click:t.replyHandleClick}},[t._v(" "+t._s(t.$lang.reply))]),a("el-button",{staticStyle:{"margin-right":"10px",height:"33px"},attrs:{size:"small",icon:"el-icon-edit",type:"primary",loading:t.racBtnLoding},on:{click:t.replyAndCloseHandleClick}},[t._v(" "+t._s(t.$lang.reply_close_order))]),a("el-upload",{ref:"attachment",attrs:{action:t.attachmentAction,"on-success":t.attachmentSuccessUpload,"with-credentials":"",multiple:"",name:"file",accept:".png,.jpg,.gif"}},[a("el-button",{attrs:{size:"small",icon:"el-icon-upload"}},[t._v(t._s(t.$lang.upload_attachment))])],1)],1)],1),a("el-tab-pane",{staticStyle:{width:"99.5%"},attrs:{label:t.$lang.add_remark,name:"addRemarksTab"}},[a("tinymce-editor",{ref:"remarkEditor",staticClass:"tinymce",on:{blur:function(e){return t.onRemarkEditorBlur(e)},focus:function(e){return t.onRemarkEditorFocus(e)},change:function(e){return t.onRemarkEditorChange(e)}},model:{value:t.remarkContent,callback:function(e){t.remarkContent=e},expression:"remarkContent"}}),a("el-col",{staticClass:"mt-10",attrs:{span:24}},[a("el-button",{attrs:{size:"small",icon:"el-icon-edit",type:"primary",loading:t.btnLoading},on:{click:t.addTicketNoteHandleClick}},[t._v(t._s(t.$lang.add_remark))])],1)],1),a("el-tab-pane",{attrs:{label:t.$lang.option,name:"optionsTab"}},[a("el-form",{ref:"elForm",attrs:{model:t.formData,"label-width":"100px"}},[a("el-row",{attrs:{gutter:15}},[a("el-row",[a("el-col",{staticStyle:{opacity:"0"},attrs:{md:4,lg:4,xl:4}},[t._v(".")]),a("el-col",{attrs:{sm:24,md:8,lg:8,xl:8}},[a("el-form-item",{attrs:{label:t.$lang.department,prop:"dptid"}},[a("el-select",{style:{width:"100%"},attrs:{size:"small",placeholder:t.$lang.select_department,clearable:""},model:{value:t.formData.dptid,callback:function(e){t.$set(t.formData,"dptid",e)},expression:"formData.dptid"}},t._l(t.dptidOptions,(function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})})),1)],1)],1),a("el-col",{attrs:{xs:24,sm:24,md:8,lg:8,xl:8}},[a("el-form-item",{attrs:{label:t.$lang.client_name,prop:"uid"}},[a("el-autocomplete",{style:{width:"100%"},attrs:{"trigger-on-focus":!0,size:"small","fetch-suggestions":t.querySearchAsync,placeholder:t.$lang.enter_associated_with_user},on:{input:t.clearUid,select:t.handleSelect},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.item;return[a("el-row",[a("el-col",{attrs:{span:24}},[a("span",{staticStyle:{"font-size":"14px"}},[t._v(t._s(n.username))]),a("span",[t._v(t._s(n.companyname?" ("+n.companyname+")":""))]),a("span",[t._v(t._s(n.id?" - #"+n.id:""))])]),a("el-col",{staticStyle:{"margin-top":"-10px"},attrs:{span:24}},[a("span",{staticStyle:{"font-size":"12px",color:"#999"}},[t._v(t._s(n.email))])])],1)]}}]),model:{value:t.formData.username,callback:function(e){t.$set(t.formData,"username",e)},expression:"formData.username"}})],1)],1)],1),a("el-row",[a("el-col",{staticStyle:{opacity:"0"},attrs:{md:4,lg:4,xl:4}},[t._v(".")]),a("el-col",{attrs:{sm:24,md:8,lg:8,xl:8}},[a("el-form-item",{attrs:{label:t.$lang.work_order_title,prop:"title"}},[a("el-input",{style:{width:"100%"},attrs:{size:"small",placeholder:t.$lang.enter_work_order_title,clearable:""},model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}})],1)],1),a("el-col",{attrs:{sm:24,md:8,lg:8,xl:8}},[a("el-form-item",{attrs:{label:t.$lang.state,prop:"status"}},[a("el-select",{style:{width:"100%"},attrs:{size:"small",placeholder:t.$lang.select_state,clearable:""},model:{value:t.formData.status,callback:function(e){t.$set(t.formData,"status",e)},expression:"formData.status"}},t._l(t.statusOptions,(function(t,e){return a("el-option",{key:e,style:{color:t.color},attrs:{label:t.title,value:t.id}})})),1)],1)],1)],1),t._l(t.customfields,(function(e,n){return a("el-row",{key:n},[a("el-col",{staticStyle:{opacity:"0"},attrs:{md:4,lg:4,xl:4}},[t._v(".")]),t._l(e,(function(e,n){return a("el-col",{key:n,attrs:{sm:24,md:8,lg:8,xl:8}},[a("el-form-item",{attrs:{label:e.fieldname}},[a("el-input",{style:{width:"100%"},attrs:{size:"small",clearable:"",disabled:""},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"child.value"}})],1)],1)}))],2)})),a("el-col",{staticClass:"tac",attrs:{span:24}},[a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary",loading:t.btnLoading},on:{click:t.submitForm}},[t._v(" "+t._s(t.$lang.save_the_changes))]),a("el-button",{attrs:{size:"small"},on:{click:t.resetForm}},[t._v(t._s(t.$lang.cancel_changes))])],1)],1)],2)],1)],1),a("el-tab-pane",{attrs:{lazy:"",label:t.$lang.product_info,name:"productInfo"}},[a("ticketTable",{attrs:{uid:t.search.uid,hostid:t.search.hostid}})],1)],1)],1),a("div",{staticClass:"detail_third"},[t.associatTableData.length?a("el-table",{staticClass:"mb-10",staticStyle:{width:"100%"},attrs:{data:t.associatTableData}},[a("el-table-column",{attrs:{prop:"productname",label:t.$lang.related_product,width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("el-col",[a("router-link",{attrs:{to:{name:"productInnerpage",query:{id:n.uid,hid:n.id}},target:"_blank"}},[t._v(" "+t._s(n.productname)+" ")])],1),n.domain?a("el-col",{staticClass:"second-row"},[t._v(t._s(n.domain))]):t._e()]}}],null,!1,794405227)}),a("el-table-column",{attrs:{prop:"amount",label:t.$lang.sum,width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("el-col",[a("span",{staticStyle:{color:"#2F54EA"}},[t._v(t._s(n.amount))])]),a("el-col",{staticClass:"second-row"},[t._v(t._s(n.firstpaymentamount))])]}}],null,!1,431146676)}),a("el-table-column",{attrs:{prop:"billingcycle",label:t.$lang.payment_period}}),a("el-table-column",{attrs:{prop:"create_time",label:t.$lang.open_time},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(t.$moment(1e3*a.create_time).format("YYYY-MM-DD HH:mm:ss"))+" ")]}}],null,!1,3874438563)}),a("el-table-column",{attrs:{prop:"nextduedate",label:t.$lang.expire_date},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(t.$moment(1e3*a.nextduedate).format("YYYY-MM-DD HH:mm:ss"))+" ")]}}],null,!1,3438462250)}),a("el-table-column",{attrs:{prop:"domainstatus",label:t.$lang.state}})],1):t._e(),t.replyList.length?t._l(t.replyList,(function(e,n){return a("div",{key:n,staticClass:"dialogue",style:{background:t.backgroundColor(e)}},["log"!==e.type?[a("div",{staticClass:"dialogue_head"},[a("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},["管理员"===e.user_type?a("use",{attrs:{"xlink:href":"#icon-fuwudingyue"}}):a("use",{attrs:{"xlink:href":"#icon-gerenrenzheng"}})])]),a("div",{staticClass:"dialogue_info"},[a("div",{staticClass:"dialogue_info_first"},[a("div",{staticClass:"info_first_text"},[e.admin_id>0?a("span",{staticClass:"dialogue_info_name color-333 fz-14  mr-10"},[t._v(" "+t._s(e.realname?e.realname:e.user))]):a("router-link",{attrs:{to:{path:"/customer-view/abstract",query:{id:e.uid}}}},[a("el-link",{staticClass:"dialogue_info_name color_primary mr-10",staticStyle:{"font-size":"14px !important"}},[t._v(" "+t._s(e.realname?e.realname:e.user))])],1),a("span",{staticClass:"dialogue_info_type fz-12 color-999 mr-10"},[t._v(t._s(e.user_type)+t._s(t._f("typeFilter")(e.type,t.that)))]),a("span",{staticClass:"fz-12 color-999 mr-20"},[t._v(t._s(e.format_time))]),"r"===e.type&&e.star>0?a("span",[a("el-rate",{attrs:{disabled:"",colors:["#ffa000","#ffa000","#ffa000"],"void-color":"#e6e8f0","disabled-void-color":"#e6e8f0"},model:{value:e.star,callback:function(a){t.$set(e,"star",a)},expression:"item.star"}})],1):t._e()],1),a("div",{staticClass:"info_first_btn"},[a("i",{directives:[{name:"show",rawName:"v-show",value:e.showInfo&&"r"===e.type,expression:"item.showInfo && item.type === 'r'"}],staticClass:"el-icon-edit color_primary",on:{click:function(a){return t.editReplayHandleClick(e.id,e.content,"edit")}}}),"t"!==e.type?a("i",{staticClass:"el-icon-delete color_danger",on:{click:function(a){return t.deleteTicketReply(e.id,e.type)}}}):t._e(),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.showInfo,expression:"!item.showInfo"}],staticClass:"mini__btn_plain",on:{click:function(a){return t.editReplayHandleClick(e.id,e.content,"cancel")}}},[t._v(t._s(t.$lang.cancel))]),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.showInfo,expression:"!item.showInfo"}],staticClass:"mini__btn_suc",on:{click:function(a){return t.editTicketReplyHandleClick(e.id,e.type)}}},[t._v(t._s(t.$lang.save))])])]),a("div",{staticClass:"dialogue_info_second"},[e.showInfo?a("div",{staticClass:"fz-12 color-333"},["管理员"===e.user_type?a("div",{staticStyle:{"word-break":"break-word","font-family":"inherit"},domProps:{innerHTML:t._s(e.content)}}):a("p",{staticStyle:{"white-space":"pre-wrap","font-family":"inherit","word-break":"break-all"},domProps:{innerHTML:t._s(e.content)}})]):t._e()]),e.showInfo&&e.attachment.length?a("div",[a("h4",[t._v(t._s(t.$lang.attachment))]),t._l(e.attachment,(function(n,r){return a("div",{key:r},[a("el-link",{on:{click:function(a){return t.downAttachment(e.id,e.type,r)}}},[t._v(t._s(t._f("imgFilter")(n))+" ")])],1)}))],2):e.showInfo?t._e():a("div",[a("tinymce-editor",{ref:"myQuillEditor",refInFor:!0,attrs:{tinymceValue:t.content},on:{"update:tinymceValue":function(e){t.content=e},"update:tinymce-value":function(e){t.content=e}},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)])]:[a("div",{staticClass:"dialogue_head"},[a("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-jiaohuanshuju"}})])]),a("div",{staticClass:"dialogue_info"},[a("div",{staticClass:"dialogue_info_first"},[a("div",{staticClass:"info_first_text"},[a("span",{staticClass:"fz-12 color-999 mr-20"},[t._v(t._s(e.format_time))])])]),a("div",{staticClass:"dialogue_info_second"},[e.showInfo?a("div",{staticClass:"fz-12 color-333"},[t._v(" "+t._s(e.mode_zh+"：")+" "+t._s(t.$lang.by)),a("span",{staticClass:"color_primary"},[t._v(t._s(e.from||"-"))]),t._v(" "+t._s(t.$lang.care_of)),a("span",{staticClass:"color_primary"},[t._v(t._s(e.to||"-"))])]):t._e()]),e.remarks?a("div",{staticClass:"dialogue_info_third fz-12 color-333"},[t._v(" "+t._s(t.$lang.remarks)+"："+t._s(e.remarks)+" ")]):t._e()])]],2)})):t._e()],2),a("el-dialog",t._g(t._b({attrs:{visible:t.transferVis,title:t.$lang.turn_over_order,width:"500px"},on:{"update:visible":function(e){t.transferVis=e},open:t.onOpen,close:t.onClose}},"el-dialog",t.$attrs,!1),t.$listeners),[a("el-form",{ref:"transferForm",attrs:{model:t.transferFormData,rules:t.transferRules,size:"small","label-width":"100px"}},[a("el-form-item",{attrs:{label:t.$lang.tranfer_method,prop:"mode"}},[a("el-radio-group",{staticClass:"customRadio",attrs:{size:"medium"},model:{value:t.transferFormData.mode,callback:function(e){t.$set(t.transferFormData,"mode",e)},expression:"transferFormData.mode"}},t._l(t.modeOptions,(function(e,n){return a("el-radio",{key:n,attrs:{label:e.value,disabled:e.disabled}},[t._v(" "+t._s(e.label))])})),1)],1),0===t.transferFormData.mode?a("el-form-item",{attrs:{label:t.$lang.designated_handler,prop:"handle"}},[a("el-select",{style:{width:"100%"},attrs:{placeholder:t.$lang.select_designated_handler,clearable:""},model:{value:t.transferFormData.handle,callback:function(e){t.$set(t.transferFormData,"handle",e)},expression:"transferFormData.handle"}},t._l(t.handleOptions,(function(t,e){return a("el-option",{key:e,attrs:{label:t.user_login,value:t.id,disabled:t.disabled}})})),1)],1):t._e(),1===t.transferFormData.mode?a("el-form-item",{attrs:{label:t.$lang.processing_department,prop:"dptid"}},[a("el-select",{style:{width:"100%"},attrs:{placeholder:t.$lang.select_processing_department,clearable:""},model:{value:t.transferFormData.dptid,callback:function(e){t.$set(t.transferFormData,"dptid",e)},expression:"transferFormData.dptid"}},t._l(t.trDptidOptions,(function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id,disabled:t.disabled}})})),1)],1):t._e(),a("el-form-item",{attrs:{label:t.$lang.remarks,prop:"remarks"}},[a("el-input",{style:{width:"100%"},attrs:{type:"textarea",placeholder:t.$lang.enter_remarks,autosize:{minRows:4,maxRows:4}},model:{value:t.transferFormData.remarks,callback:function(e){t.$set(t.transferFormData,"remarks",e)},expression:"transferFormData.remarks"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.onClose}},[t._v(t._s(t.$lang.cancel))]),a("el-button",{attrs:{type:"primary",loading:t.trDiaLoading},on:{click:t.handelConfirm}},[t._v(t._s(t.$lang.confirm))])],1)],1)],1)},r=[],s=(a("4160"),a("d81d"),a("a434"),a("a9e3"),a("ac1f"),a("5319"),a("841c"),a("1276"),a("159b"),a("b85c")),i=(a("96cf"),a("1da1")),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("el-table",{staticClass:"mt-10 ticket-host",staticStyle:{width:"100%"},attrs:{data:t.ticketDetailHosts,"row-class-name":t.tableRowClassName,border:""},on:{"sort-change":t.sortChange}},[a("el-table-column",{attrs:{prop:"productname",label:t.$lang.product_service,sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("router-link",{staticClass:"product",attrs:{to:{name:"productInnerpage",query:{id:n.uid,hid:n.id}},target:"_blank"}},[a("el-row",[a("el-col",[a("el-link",[t._v(t._s(n.productname))])],1),a("el-col",[a("span",{staticClass:"second-row"},[t._v(t._s(n.domain))])])],1)],1)]}}])}),a("el-table-column",{attrs:{prop:"amount",label:t.$lang.sum,sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return["一次性"===n.billingcycle?a("span",[t._v(t._s(n.firstpaymentamount)+"/"+t._s(t.$lang.onetime))]):"免费"===n.billingcycle?a("span",[t._v(t._s(t.$lang.free_charge))]):a("span",[t._v(t._s(n.amount))])]}}])}),a("el-table-column",{attrs:{prop:"billingcycle",label:t.$lang.payment_period,sortable:""}}),a("el-table-column",{attrs:{prop:"create_time",label:t.$lang.opening_time,sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(a.create_time?t.$moment(1e3*a.create_time).format("YYYY-MM-DD HH:mm"):"-")+" ")]}}])}),a("el-table-column",{attrs:{prop:"nextduedate",label:t.$lang.due_time,sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(a.nextduedate?t.$moment(1e3*a.nextduedate).format("YYYY-MM-DD HH:mm"):"-")+" ")]}}])}),a("el-table-column",{attrs:{prop:"domainstatus",label:t.$lang.state,sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("span",{style:{color:n.status_color}},[t._v(t._s(n.domainstatus))])]}}])})],1),a("el-pagination",{staticClass:"mt-10",attrs:{"current-page":t.search.page,"page-sizes":[10,15,20,25,50,100],"page-size":t.search.limit,total:t.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange,"current-change":function(e){return t.getTicketHosts(0)},"update:currentPage":function(e){return t.$set(t.search,"page",e)},"update:current-page":function(e){return t.$set(t.search,"page",e)},"update:pageSize":function(e){return t.$set(t.search,"limit",e)},"update:page-size":function(e){return t.$set(t.search,"limit",e)}}})],1)},c=[],l=a("a200"),u={props:{uid:{type:Number,default:0},hostid:{type:Number,default:0}},data:function(){return{total:0,search:{uid:0,hostid:0,order:"id",sort:"desc",limit:Number(localStorage.getItem("limit"))||50,page:1,search_all:0,source:"ticket"},ticketDetailHosts:[]}},created:function(){this.getTicketHosts()},mounted:function(){},methods:{tableRowClassName:function(t){var e=t.row;t.rowIndex;if(e.related)return"ticket-related"},sortChange:function(t,e,a){this.search.orderby=t.prop,this.search.sort="ascending"===t.order?"asc":"desc",this.getTicketHosts()},handleSizeChange:function(t){this.search.page=1,this.getTicketHosts()},getTicketHosts:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.search.search_all=t?1:0,a.next=3,Object(l["o"])(e.search);case 3:n=a.sent,r=n.data,200!==r.status?e.$message.error(r.msg):(e.ticketDetailHosts=r.hosts,e.total=r.total);case 6:case"end":return a.stop()}}),a)})))()}},computed:{},watch:{uid:{handler:function(t){this.search.uid=t},immediate:!0},hostid:{handler:function(t){this.search.hostid=t},immediate:!0}}},d=u,m=a("2877"),f=Object(m["a"])(d,o,c,!1,null,"e20547b0",null),p=f.exports,g=a("af9c"),h=a("5394"),_=a("c4da"),b=a.n(_),v={metaInfo:{title:window.zjmf_cw_lang.support_work_order},components:{ticketTable:p},data:function(){return{that:this,customfields:[],handoverItemLoading:!1,trDiaLoading:!1,receiveLoading:!1,associatTableData:[],related:{host:""},id:this.$route.query.id,tid:this.$route.query.tid,statusOptions:[],activeName:"addReplyTab",replyContent:"",remarkContent:"",formData:{username:"",dptid:void 0,uid:void 0,title:void 0,flag:void 0,status:void 0,cc:void 0},dptidOptions:[],uidOptions:[],flagOptions:[],replyList:[],content:"",fieldname:"",attachmentAction:this.$baseUrl+"/upload_file",attachmentfileList:[],btnLoading:!1,racBtnLoding:!1,noPower:!1,ticketDetailHosts:[],search:{uid:0,hostid:0,order:"id",sort:"desc",limit:Number(localStorage.getItem("limit"))||50,page:1,search_all:0,source:"ticket"},total:0,transferVis:!1,transferFormData:{id:this.$route.query.id,mode:0,handle:void 0,dptid:void 0,remarks:void 0},transferRules:{mode:[{required:!0,message:this.$lang.tranfer_method_not_empty,trigger:"change"}],handle:[{required:!0,message:this.$lang.select_designated_handler,trigger:"change"}],dptid:[{required:!0,message:this.$lang.select_processing_department,trigger:"change"}],remarks:[]},modeOptions:[{label:this.$lang.designated_handler,value:0},{label:this.$lang.designated_processing_epartment,value:1}],handleOptions:[],trDptidOptions:[]}},filters:{typeFilter:function(t,e){switch(t){case"t":return e.$lang.work_order;case"r":return e.$lang.reply;case"n":return e.$lang.remark}},imgFilter:function(t){var e=t.split("^");return e[1]}},methods:{goProduct:function(t){this.$router.push({name:"productInnerpage",query:{id:t.uid,hid:t.id}})},backgroundColor:function(t){return"管理员"===t.user_type?"#faf8f1":"用户"===t.user_type?"#f3f6f9":"移交"===t.user_type?"#ffeccc":void 0},ticketReceive:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.receiveLoading=!0,a={id:t.$route.query.id},e.next=4,Object(l["s"])(a);case 4:if(n=e.sent,r=n.data,200===r.status){e.next=10;break}return t.$message.error(r.msg),t.receiveLoading=!1,e.abrupt("return");case 10:t.$message.success(r.msg),t.receiveLoading=!1,t.getTicketDetail();case 13:case"end":return e.stop()}}),e)})))()},onOpen:function(){},onClose:function(){var t=this;this.$nextTick((function(){t.$refs.transferForm.resetFields(),t.transferVis=!1}))},handelConfirm:function(){var t=this;this.$refs.transferForm.validate(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(a){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return t.trDiaLoading=!0,e.next=5,Object(l["u"])(t.transferFormData);case 5:if(n=e.sent,r=n.data,200===r.status){e.next=11;break}return t.$message.error(r.msg),t.trDiaLoading=!1,e.abrupt("return");case 11:t.$message.success(r.msg),t.trDiaLoading=!1,t.onClose(),t.getTicketDetail();case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},clearUid:function(){this.formData.uid=""},handleSelect:function(t){"notFound"!==t.type&&(this.formData.username=t.username,this.formData.uid=t.id)},handoverItem:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.handoverItemLoading=!0,a={id:t.$route.query.id},e.next=4,Object(l["t"])(a);case 4:if(n=e.sent,r=n.data,200===r.status){e.next=10;break}return t.$message.error(r.msg),t.handoverItemLoading=!1,e.abrupt("return");case 10:t.handleOptions=r.data.admins,t.trDptidOptions=r.data.departments,t.transferVis=!0,t.handoverItemLoading=!1;case 14:case"end":return e.stop()}}),e)})))()},querySearchAsync:function(t,e){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(g["f"])(t);case 2:if(r=n.sent,s=r.data,200===s.status){n.next=7;break}return a.$message.error(s.msg),n.abrupt("return");case 7:s.data.length?e(s.data):(i=[{username:a.$lang.no_relevant_data_could_be_found,type:"notFound"}],e(i));case 8:case"end":return n.stop()}}),n)})))()},attachmentBeforeUpload:function(t){var e=t.size/1024/1024<1;return e||this.$message.error(this.$lang.file_size_over_one_mb),e},attachmentSuccessUpload:function(t,e,a){200==t.status?this.attachmentfileList.push(t.data.savename):(e.status="error",this.$message.error(t.msg))},closeTicketHandleClick:function(t,e){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(4!==t||"confirm"!==e){n.next=4;break}a.$confirm(a.$lang.close_work_order_confirm,a.$lang.hint,{confirmButtonText:a.$lang.confirm,cancelButtonText:a.$lang.cancel,type:"warning"}).then((function(){Object(l["c"])({id:[a.id],status:t}).then((function(t){var e=t.data;200===e.status?(a.$message.success(e.msg),a.getTicketDetail()):a.$message.error(e.msg)}))})).catch((function(){})),n.next=9;break;case 4:return n.next=6,Object(l["c"])({id:[a.id],status:t});case 6:r=n.sent,s=r.data,200===s.status?(a.$message.success(s.msg),a.getTicketDetail()):a.$message.warning(s.msg);case 9:case"end":return n.stop()}}),n)})))()},tabChange:function(t){"optionsTab"===t.paneName&&this.getAddPageInfoList()},getStatus:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(h["e"])();case 2:a=e.sent,n=a.data,200===n.status?(t.statusOptions=n.data,t.noPower=!1):(t.$message.error(n.msg),t.noPower=!0);case 5:case"end":return e.stop()}}),e)})))()},getTicketDetail:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,r,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(l["m"])(t.id);case 2:if(a=e.sent,n=a.data,200===n.status){t.related=n.data.ticket,t.replyList=n.data.list.map((function(t){var e=t.content.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"');return t.content=b.a.sanitize(e),t})),t.associatTableData=n.data.ticket.host,(t.replyList||[]).forEach((function(e){e.content=t.HTMLDecode(e.content),e.showInfo=!0})),r=n.data.customfields,s=[];while(r.length>0)i=r.splice(0,2),s.push(i);t.customfields=s,t.replyContent=n.data.user.signature,t.formData=n.data.ticket,t.search.uid=n.data.ticket.uid,t.search.hostid=n.data.ticket.hostid}else t.$message.error(n.msg);case 5:case"end":return e.stop()}}),e)})))()},onReplyEditorReady:function(t){},onReplyEditorBlur:function(){},onReplyEditorFocus:function(){},onReplyEditorChange:function(){},replyHandleClick:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,r,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=Object(s["a"])(t.$refs.attachment.uploadFiles),e.prev=1,a.s();case 3:if((n=a.n()).done){e.next=9;break}if(r=n.value,"success"==r.status){e.next=7;break}return e.abrupt("return",t.$message.error(t.$lang.delete_attachment_submitting));case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),a.e(e.t0);case 14:return e.prev=14,a.f(),e.finish(14);case 17:return t.btnLoading=!0,e.next=20,Object(l["q"])({id:t.id,content:t.replyContent,attachment:t.attachmentfileList});case 20:i=e.sent,o=i.data,200===o.status?(t.getTicketDetail(),t.replyContent="",t.$message.success(o.msg),t.$refs.attachment.clearFiles(),t.attachmentfileList=[],t.$router.go(-1)):t.$message.error(o.msg),t.btnLoading=!1;case 24:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))()},replyAndCloseHandleClick:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,r,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=Object(s["a"])(t.$refs.attachment.uploadFiles),e.prev=1,a.s();case 3:if((n=a.n()).done){e.next=9;break}if(r=n.value,"success"==r.status){e.next=7;break}return e.abrupt("return",t.$message.error(t.$lang.delete_attachment_submitting));case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),a.e(e.t0);case 14:return e.prev=14,a.f(),e.finish(14);case 17:return t.racBtnLoding=!0,e.next=20,Object(l["q"])({id:t.id,content:t.replyContent,attachment:t.attachmentfileList});case 20:i=e.sent,o=i.data,200===o.status?t.closeTicketHandler():(t.$message.error(o.msg),t.racBtnLoding=!1);case 23:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))()},closeTicketHandler:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(l["c"])({id:[t.id]});case 2:a=e.sent,n=a.data,200===n.status?t.$router.go(-1):t.$message.warning(n.msg),t.racBtnLoding=!1;case 6:case"end":return e.stop()}}),e)})))()},onRemarkEditorReady:function(t){},onRemarkEditorBlur:function(){},onRemarkEditorFocus:function(){},onRemarkEditorChange:function(){},addTicketNoteHandleClick:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.btnLoading=!0,e.next=3,Object(l["a"])({id:t.id,content:t.remarkContent});case 3:a=e.sent,n=a.data,t.$message.success(n.msg),200===n.status&&(t.getTicketDetail(),t.remarkContent=""),t.btnLoading=!1;case 8:case"end":return e.stop()}}),e)})))()},getAddPageInfoList:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,r,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={tid:t.$route.query.tid},e.next=3,Object(l["j"])(a);case 3:n=e.sent,r=n.data,200===r.status?(t.dptidOptions=r.data.department,t.formData.username=null===(s=r.data)||void 0===s?void 0:s.client.username,t.formData.uid=null===(i=r.data)||void 0===i?void 0:i.client.id,t.uidOptions=r.data.client,t.flagOptions=r.data.client):t.$message.error(r.msg);case 6:case"end":return e.stop()}}),e)})))()},submitForm:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.formData.id=Number(t.id),t.btnLoading=!0,e.next=4,Object(l["h"])(t.$qs.stringify(t.formData));case 4:a=e.sent,n=a.data,200===n.status?(t.$message.success(n.msg),t.getTicketDetail(),t.getAddPageInfoList(),t.getStatus()):t.$message.error(n.msg),t.btnLoading=!1;case 8:case"end":return e.stop()}}),e)})))()},resetForm:function(){this.$refs.elForm.resetFields()},HTMLDecode:function(t){var e=document.createElement("div");e.innerHTML=t;var a=e.innerText||e.textContent;return e=null,a},editReplayHandleClick:function(t,e,a){var n=this,r=this.replyList;this.replyList=[],(r||[]).forEach((function(e){"edit"===a?e.id===t?e.showInfo=!1:e.showInfo=!0:"cancel"===a&&(e.showInfo=!0),n.replyList.push(e)})),this.content=e},editTicketReplyHandleClick:function(t,e){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(l["i"])({id:t,content:a.content,type:e});case 2:r=n.sent,s=r.data,200===s.status?(a.$message.success(a.$lang.save_successfully),a.getTicketDetail()):a.$message.error(s.msg);case 5:case"end":return n.stop()}}),n)})))()},deleteTicketReply:function(t,e){var a=this;this.$confirm(this.$lang.will_delete_data,this.$lang.hint,{confirmButtonText:this.$lang.confirm,cancelButtonText:this.$lang.cancel,type:"warning"}).then(Object(i["a"])(regeneratorRuntime.mark((function n(){var r,s,i,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("r"!==e){n.next=8;break}return n.next=3,Object(l["e"])({id:t});case 3:r=n.sent,s=r.data,200===s.status?a.getTicketDetail():a.$message.warning(s.msg),n.next=14;break;case 8:if("n"!==e){n.next=14;break}return n.next=11,Object(l["d"])({id:t});case 11:i=n.sent,o=i.data,200===o.status?a.getTicketDetail():a.$message.warning(o.msg);case 14:case"end":return n.stop()}}),n)})))).catch((function(){}))},replyIconHandleClick:function(){this.activeName="addReplyTab"},showAttachment:function(t){window.open("http://"+t)},downAttachment:function(t,e,a){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(l["g"])({id:t,type:e,index:a});case 2:s=r.sent,i=s.data,200!==i.status?n.$message.error(i.msg):open(i.data.filename);case 5:case"end":return r.stop()}}),r)})))()},getTicketHosts:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t&&(e.search.search_all=1),a.next=3,Object(l["o"])(e.search);case 3:n=a.sent,r=n.data,200!==r.status?e.$message.error(r.msg):(e.ticketDetailHosts=r.hosts,e.total=r.total);case 6:case"end":return a.stop()}}),a)})))()},sortChange:function(t,e,a){this.search.order=t.prop,"ascending"===t.order?this.search.sort="asc":this.search.sort="desc",this.getTicketHosts()},handleSizeChange:function(t){this.search.page=1,this.getTicketHosts()},handleCurrentChange:function(t){this.getTicketHosts()},tableRowClassName:function(t){var e=t.row;t.rowIndex;if(e.related)return"ticket-related"}},created:function(){this.getStatus(),this.getTicketDetail()}},k=v,y=(a("f7b1"),Object(m["a"])(k,n,r,!1,null,"f1fccb20",null));e["default"]=y.exports},f7b1:function(t,e,a){"use strict";var n=a("5599"),r=a.n(n);r.a}}]);