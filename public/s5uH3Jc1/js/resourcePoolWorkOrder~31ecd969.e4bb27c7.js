(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["resourcePoolWorkOrder~31ecd969"],{"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"422c":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h2",[t._v("工单列表")]),n("el-button",{attrs:{size:"small",type:"success",icon:"el-icon-plus"},on:{click:t.newTicketHandleClick}},[t._v(t._s(t.$lang.new_work_order))]),n("el-button",{staticClass:"ml-10",attrs:{size:"small"},on:{click:function(e){t.searchWarpper=!t.searchWarpper}}},[t._v(t._s(t.searchWarpper?t.$lang.pack_up_the_search:t.$lang.advanced_search))]),n("transition",{attrs:{name:"el-zoom-in-top"}},[t.searchWarpper?[n("el-form",{ref:"elForm",staticClass:"unfold-search mt-10 mb-20",attrs:{inline:"",model:t.search,"label-width":"90px"}},[n("el-form-item",{attrs:{prop:"uid",label:t.$lang.client}},[n("el-autocomplete",{style:{width:"160px"},attrs:{"trigger-on-focus":!0,size:"small","fetch-suggestions":t.querySearchAsync,placeholder:t.$lang.enter_associated_with_user},on:{input:t.clearUid,select:t.handleSelect},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.item;return[n("el-row",[n("el-col",{attrs:{span:24}},[n("span",{staticStyle:{"font-size":"14px"}},[t._v(t._s(r.username))]),n("span",[t._v(t._s(r.companyname?" ("+r.companyname+")":""))]),n("span",[t._v(t._s(r.id?" - #"+r.id:""))])]),n("el-col",{staticStyle:{"margin-top":"-10px"},attrs:{span:24}},[n("span",{staticStyle:{"font-size":"12px",color:"#999"}},[t._v(t._s(r.email))])])],1)]}}],null,!1,1605673202),model:{value:t.search.username,callback:function(e){t.$set(t.search,"username",e)},expression:"search.username"}})],1),n("el-form-item",{attrs:{prop:"dptid",label:t.$lang.department}},[n("el-select",{style:{width:"160px"},attrs:{size:"small",placeholder:t.$lang.unlimited,clearable:""},model:{value:t.search.dptid,callback:function(e){t.$set(t.search,"dptid",e)},expression:"search.dptid"}},t._l(t.deptOptions,(function(t,e){return n("el-option",{key:t.id+e,attrs:{label:t.name,value:t.id}})})),1)],1),n("el-form-item",{attrs:{prop:"status",label:t.$lang.state}},[n("el-select",{style:{width:"160px"},attrs:{size:"small",clearable:"",placeholder:t.$lang.select_state},model:{value:t.search.status,callback:function(e){t.$set(t.search,"status",e)},expression:"search.status"}},t._l(t.statusOptions,(function(t,e){return n("el-option",{key:t.id+e,style:{color:t.color},attrs:{label:t.title,value:t.id}})})),1)],1),n("el-form-item",{attrs:{prop:"priority",label:t.$lang.priority}},[n("el-select",{style:{width:"160px"},attrs:{size:"small",placeholder:t.$lang.unlimited,clearable:""},model:{value:t.search.priority,callback:function(e){t.$set(t.search,"priority",e)},expression:"search.priority"}},t._l(t.priorityLevelOptions,(function(t,e){return n("el-option",{key:t.id+e,attrs:{label:t.name,value:t.id}})})),1)],1),n("el-form-item",{attrs:{prop:"content",label:t.$lang.work_order_title_content}},[n("el-input",{style:{width:"160px"},attrs:{size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchHandleClick(e)}},model:{value:t.search.content,callback:function(e){t.$set(t.search,"content",e)},expression:"search.content"}})],1),n("el-form-item",{attrs:{prop:"tid",label:t.$lang.work_order_num}},[n("el-input",{style:{width:"160px"},attrs:{size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchHandleClick(e)}},model:{value:t.search.tid,callback:function(e){t.$set(t.search,"tid",e)},expression:"search.tid"}})],1),n("el-form-item",{attrs:{label:" "}},[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.searchHandleClick}},[t._v(t._s(t.$lang.demand))]),n("el-button",{attrs:{size:"mini"},on:{click:t.resetHandleClick}},[t._v(t._s(t.$lang.empty))])],1)],1)]:t._e()],2),n("el-table",{staticClass:"mt-10",attrs:{data:t.tableList,border:""}},[n("div",{attrs:{slot:"empty"},slot:"empty"},[!t.tableList.length&&t.tableLoading?n("span",[n("i",{staticClass:"el-icon-loading"}),t._v(" "+t._s(t.$lang.loading)+" ... ")]):t._e(),t.tableList.length||t.tableLoading?t._e():n("span",[t._v(t._s(t.$lang.no_data))])]),n("el-table-column",{attrs:{prop:"id",label:"id",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("router-link",{attrs:{to:{path:"/support-ticket-detail",query:{id:e.row.id,tid:e.row.tid}}}},[n("el-link",{on:{click:function(n){return t.toDetail(e.row.id,e.row.tid)}}},[t._v(t._s(e.row.tid))])],1)]}}])}),n("el-table-column",{attrs:{prop:"title",label:"主题"}}),n("el-table-column",{attrs:{prop:"active_type",label:"提交人"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.uid?n("span",[t._v(t._s(e.row.user_name))]):n("router-link",{attrs:{to:{path:"/customer-view/abstract",query:{id:e.row.uid}}}},[n("el-link",{on:{click:function(n){return t.goToView(e.row.uid)}}},[t._v(t._s(e.row.user_name))])],1),1===e.row.is_receive?n("el-tag",{staticClass:"ml-10",attrs:{type:"mini"}},[t._v(t._s(t.$lang.downstream_api_sub))]):t._e(),1===e.row.is_deliver?n("el-tag",{staticClass:"ml-10",attrs:{type:"mini"}},[t._v(t._s(t.$lang.api_upstream))]):t._e()]}}])}),n("el-table-column",{attrs:{prop:"active_type",label:"处理人",align:"center",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v(" "+t._s(n.handle_name||"-")+" ")]}}])}),n("el-table-column",{attrs:{prop:"active_type",label:"状态",align:"center",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{style:"color:"+e.row.statusColor},[t._v(t._s(e.row.status_title))])]}}])}),n("el-table-column",{attrs:{prop:"create_time",label:"提交时间",align:"center",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.create_time?t.$moment(1e3*e.row.create_time).format("YYYY-MM-DD HH:mm"):"-")+" ")]}}])}),n("el-table-column",{attrs:{prop:"last_reply_time",label:"上次回复",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.$timeDiff(1e3*e.row.last_reply_time))+" ")]}}])})],1),n("el-pagination",{attrs:{"current-page":t.search.page,"page-sizes":[10,15,20,25,50,100],"page-size":t.search.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.getList,"update:currentPage":function(e){return t.$set(t.search,"page",e)},"update:current-page":function(e){return t.$set(t.search,"page",e)},"update:pageSize":function(e){return t.$set(t.search,"limit",e)},"update:page-size":function(e){return t.$set(t.search,"limit",e)}}})],1)},a=[],u=(n("a9e3"),n("ac1f"),n("841c"),n("96cf"),n("1da1")),i=n("db75"),o=n("af9c"),c=n("a200"),s={data:function(){return{searchWarpper:!1,tableList:[],tableLoading:!1,search:{tid:void 0,email:void 0,content:void 0,priority:void 0,dptid:void 0,uid:void 0,status:void 0,limit:Number(localStorage.getItem("limit"))||50,page:1},total:0,deptOptions:[],statusOptions:[],priorityLevelOptions:[{id:"high",name:this.$lang.high},{id:"medium",name:this.$lang.centre},{id:"low",name:this.$lang.low}]}},mounted:function(){this.getList(1),this.getDepartmentData()},methods:{toDetail:function(t,e){this.$router.push({path:"/support-ticket-detail",query:{id:t,tid:e}})},newTicketHandleClick:function(){this.$router.push("/add-support-ticket")},getList:function(t){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.tableLoading=!0,n.next=3,Object(i["w"])(e.search);case 3:if(r=n.sent,e.tableLoading=!1,200===r.data.status){n.next=7;break}return n.abrupt("return",e.$message.error(r.data.msg));case 7:1==t&&(e.statusOptions=r.data.data.ticket_status),e.tableList=r.data.data.list,e.total=r.data.data.sum;case 10:case"end":return n.stop()}}),n)})))()},getDepartmentData:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["l"])();case 2:if(n=e.sent,r=n.data,200===r.status){e.next=6;break}return e.abrupt("return",!1);case 6:t.deptOptions=r.data;case 7:case"end":return e.stop()}}),e)})))()},handleSizeChange:function(){this.search.page=1,this.getList()},goToView:function(t){this.$router.push({path:"/customer-view/abstract",query:{id:t}})},searchHandleClick:function(){this.adPageFlag=!1,this.OriginalSearch=!0,this.activeName="",this.search.page=1,this.getList()},resetHandleClick:function(){this.activeName="",this.search.username=void 0,this.$refs.elForm.resetFields()},querySearchAsync:function(t,e){var n=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){var a,u,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(o["f"])(t);case 2:if(a=r.sent,u=a.data,200===u.status){r.next=7;break}return n.$message.error(u.msg),r.abrupt("return");case 7:u.data.length?e(u.data):(i=[{username:n.$lang.no_relevant_data_could_be_found,type:"notFound"}],e(i));case 8:case"end":return r.stop()}}),r)})))()},clearUid:function(){this.search.uid=""},handleSelect:function(t){"notFound"!==t.type&&(this.search.username=t.username,this.search.uid=t.id)}}},l=s,d=n("2877"),p=Object(d["a"])(l,r,a,!1,null,null,null);e["default"]=p.exports},"841c":function(t,e,n){"use strict";var r=n("d784"),a=n("825a"),u=n("1d80"),i=n("129f"),o=n("14c3");r("search",1,(function(t,e,n){return[function(e){var n=u(this),r=void 0==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var u=a(t),c=String(this),s=u.lastIndex;i(s,0)||(u.lastIndex=0);var l=o(u,c);return i(u.lastIndex,s)||(u.lastIndex=s),null===l?-1:l.index}]}))},a200:function(t,e,n){"use strict";n.d(e,"j",(function(){return a})),n.d(e,"b",(function(){return u})),n.d(e,"n",(function(){return i})),n.d(e,"q",(function(){return o})),n.d(e,"i",(function(){return c})),n.d(e,"p",(function(){return s})),n.d(e,"c",(function(){return l})),n.d(e,"f",(function(){return d})),n.d(e,"a",(function(){return p})),n.d(e,"d",(function(){return f})),n.d(e,"e",(function(){return m})),n.d(e,"g",(function(){return h})),n.d(e,"m",(function(){return g})),n.d(e,"h",(function(){return b})),n.d(e,"k",(function(){return _})),n.d(e,"l",(function(){return v})),n.d(e,"o",(function(){return k})),n.d(e,"s",(function(){return O})),n.d(e,"t",(function(){return j})),n.d(e,"u",(function(){return y})),n.d(e,"r",(function(){return w}));var r=n("a27e");function a(t){return Object(r["a"])({url:"add_ticket_page",params:t})}function u(t){return Object(r["a"])({url:"add_ticket",method:"post",data:t})}function i(t){return Object(r["a"])({url:"list_ticket",params:t})}function o(t){return Object(r["a"])({url:"reply_ticket",method:"post",data:t})}function c(t){return Object(r["a"])({url:"save_ticket_reply",method:"post",data:t})}function s(t){return Object(r["a"])({url:"merge_ticket",method:"post",data:t})}function l(t){return Object(r["a"])({url:"close_ticket",method:"post",data:t})}function d(t){return Object(r["a"])({url:"delete_ticket",method:"post",data:t})}function p(t){return Object(r["a"])({url:"add_ticket_note",method:"post",data:t})}function f(t){return Object(r["a"])({url:"delete_ticket_note",method:"post",data:t})}function m(t){return Object(r["a"])({url:"delete_ticket_reply",method:"post",data:t})}function h(t){return Object(r["a"])({url:"download_ticket_attachment",params:t})}function g(t){return Object(r["a"])({url:"list_ticket/"+t})}function b(t){return Object(r["a"])({url:"save_ticket",method:"post",data:t})}function _(){return Object(r["a"])({url:"getClient"})}function v(){return Object(r["a"])({url:"getTicketDepartment"})}function k(t){return Object(r["a"])({url:"hostbyuid",params:t})}function O(t){return Object(r["a"])({url:"ticket_receive",method:"put",data:t})}function j(t){return Object(r["a"])({url:"ticket_transfer_list",params:t})}function y(t){return Object(r["a"])({url:"ticket_transfer",method:"put",data:t})}function w(t){return Object(r["a"])({url:"tastes/editUserTanstes",method:"post",data:t})}},af9c:function(t,e,n){"use strict";n.d(e,"n",(function(){return a})),n.d(e,"m",(function(){return u})),n.d(e,"j",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"e",(function(){return c})),n.d(e,"q",(function(){return s})),n.d(e,"c",(function(){return l})),n.d(e,"k",(function(){return d})),n.d(e,"o",(function(){return p})),n.d(e,"l",(function(){return f})),n.d(e,"d",(function(){return m})),n.d(e,"p",(function(){return h})),n.d(e,"r",(function(){return g})),n.d(e,"b",(function(){return b})),n.d(e,"i",(function(){return _})),n.d(e,"f",(function(){return v})),n.d(e,"g",(function(){return k})),n.d(e,"h",(function(){return O}));var r=n("a27e");function a(t){return Object(r["a"])({url:"order/search_page",params:t})}function u(t){return Object(r["a"])({url:"order/search",params:t})}function i(t){return Object(r["a"])({url:"order/check",params:t})}function o(t){return Object(r["a"])({url:"order/cancel",params:t})}function c(t){return Object(r["a"])({url:"orders/delete",method:"delete",params:t})}function s(t){return Object(r["a"])({url:"order/create_page",params:t})}function l(t){return Object(r["a"])({url:"order/create",method:"post",data:t})}function d(t){return Object(r["a"])({url:"orders/"+t})}function p(t){return Object(r["a"])({url:"orders/set_config",params:t})}function f(t){return Object(r["a"])({url:"get_total",method:"post",data:t})}function m(t){return Object(r["a"])({url:"order/save_promo_code",method:"post",data:t})}function h(t){return Object(r["a"])({url:"orders/active",method:"post",data:t})}function g(){return Object(r["a"])({url:"order/promo_code_page"})}function b(t){return Object(r["a"])({url:"orders/change_status",method:"post",data:t})}function _(t){return Object(r["a"])({url:"order/order_commission",method:"post",data:t})}function v(t){return Object(r["a"])({url:"order/getclients",params:{username:t}})}function k(t){return Object(r["a"])({url:"invoice/renew",method:"get",params:t})}function O(t){return Object(r["a"])({url:"zjmf_finance_api/renew",method:"get",params:t})}},db75:function(t,e,n){"use strict";n.d(e,"e",(function(){return a})),n.d(e,"f",(function(){return u})),n.d(e,"d",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"z",(function(){return c})),n.d(e,"l",(function(){return s})),n.d(e,"o",(function(){return l})),n.d(e,"b",(function(){return d})),n.d(e,"x",(function(){return p})),n.d(e,"y",(function(){return f})),n.d(e,"h",(function(){return m})),n.d(e,"i",(function(){return h})),n.d(e,"k",(function(){return g})),n.d(e,"w",(function(){return b})),n.d(e,"s",(function(){return _})),n.d(e,"g",(function(){return v})),n.d(e,"t",(function(){return k})),n.d(e,"n",(function(){return O})),n.d(e,"u",(function(){return j})),n.d(e,"v",(function(){return y})),n.d(e,"p",(function(){return w})),n.d(e,"a",(function(){return $})),n.d(e,"q",(function(){return x})),n.d(e,"r",(function(){return z})),n.d(e,"m",(function(){return S})),n.d(e,"j",(function(){return C}));var r=n("a27e");function a(t){return Object(r["a"])({url:"agent/order",params:t})}function u(t){return Object(r["a"])({url:"agent/products",params:t})}function i(t){return Object(r["a"])({url:"agent/inspectionlists",params:t})}function o(t){return Object(r["a"])({url:"agent/inspectionip",params:t})}function c(t){return Object(r["a"])({url:"agent/resourceinspection",method:"post",data:t})}function s(t){return Object(r["a"])({url:"agent/inspectiondetail",params:t})}function l(t){return Object(r["a"])({url:"agent/refund",method:"post",data:t})}function d(t){return Object(r["a"])({url:"agent/aftersale",method:"post",data:t})}function p(t){return Object(r["a"])({url:"agent/unaftersale",method:"post",data:t})}function f(t){return Object(r["a"])({url:"agent/host",params:t})}function m(){return Object(r["a"])({url:"agent/baseinfo",method:"get"})}function h(t){return Object(r["a"])({url:"agent/consumption",method:"get",params:t})}function g(t){return Object(r["a"])({url:"agent/income",method:"get",params:t})}function b(t){return Object(r["a"])({url:"agent/tickets",method:"get",params:t})}function _(){return Object(r["a"])({url:"agent/resourceinfo",method:"get"})}function v(t){return Object(r["a"])({url:"agent/resourceinfo",method:"post",data:t})}function k(t){return Object(r["a"])({url:"agent/resourceticketopen",method:"post",data:t})}function O(){return Object(r["a"])({url:"agent/linktoresource",method:"post"})}function j(t){return Object(r["a"])({url:"agent/runmaplists",method:"get",params:t})}function y(){return Object(r["a"])({url:"agent/ordersearchpage"})}function w(t){return Object(r["a"])({url:"agent/refundDetail?id=".concat(t)})}function $(t){return Object(r["a"])({url:"agent/afterSaleDetail?id=".concat(t)})}function x(t){return Object(r["a"])({url:"agent/renew",params:t})}function z(){return Object(r["a"])({url:"agent/renewsearchpage"})}function S(t){return Object(r["a"])({url:"agent/agentLogs",params:t})}function C(t){return Object(r["a"])({url:"agent/evaluation",method:"POST",data:t})}}}]);