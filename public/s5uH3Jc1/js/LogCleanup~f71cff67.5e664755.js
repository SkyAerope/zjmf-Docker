(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["LogCleanup~f71cff67"],{"90ba":function(e,t,a){"use strict";a.d(t,"k",(function(){return n})),a.d(t,"a",(function(){return o})),a.d(t,"i",(function(){return i})),a.d(t,"g",(function(){return l})),a.d(t,"f",(function(){return s})),a.d(t,"j",(function(){return c})),a.d(t,"h",(function(){return u})),a.d(t,"b",(function(){return m})),a.d(t,"d",(function(){return g})),a.d(t,"c",(function(){return f})),a.d(t,"e",(function(){return d}));var r=a("a27e");function n(e){return Object(r["a"])({url:"log_record/systemlog",params:e})}function o(e){return Object(r["a"])({url:"log_record/adminlog",params:e})}function i(e){return Object(r["a"])({url:"log_record/notifylog",params:e})}function l(e){return Object(r["a"])({url:"log_record/emaillog",params:e})}function s(e){return Object(r["a"])({url:"log_record/emaildetail/"+e})}function c(e){return Object(r["a"])({url:"log_record/smslog",params:e})}function u(e){return Object(r["a"])({url:"log_record/cronsystemlog",params:e})}function m(e){return Object(r["a"])({url:"log_record/api_log",params:e})}function g(e){return Object(r["a"])({url:"log_record/delete_log_page",params:e})}function f(e){return Object(r["a"])({url:"log_record/affirm_delete_log_page",params:e})}function d(e){return Object(r["a"])({url:"log_record/delete_log",method:"delete",params:e})}},b4b7:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("h2",[e._v(e._s(e.$lang.log_cleaning))]),a("h5",[e._v(e._s(e.$lang.log_cleaning_hint))]),a("el-divider"),a("el-form",{ref:"elForm",attrs:{model:e.formData,rules:e.rules,"label-width":"auto",size:"small"}},[a("el-row",{attrs:{gutter:15}},[a("el-form-item",{attrs:{label:e.$lang.select_log,prop:"type"}},[a("el-select",{style:{width:"200px"},attrs:{placeholder:e.$lang.please_select_log},on:{change:e.getData},model:{value:e.formData.type,callback:function(t){e.$set(e.formData,"type",t)},expression:"formData.type"}},e._l(e.pageData.type,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t,disabled:e.disabled}})})),1)],1),a("el-form-item",{attrs:{label:e.$lang.log_total_num}},[e._v(" "+e._s(e.pageData.count||"-")+e._s(e.$lang.strip)+" ")]),a("el-form-item",{attrs:{label:e.$lang.delete,prop:"time_show"}},[a("el-row",[a("el-date-picker",{style:{width:"200px"},attrs:{type:"datetime","picker-options":e.pickerOptions,"value-format":"timestamp",placeholder:e.$lang.select_time},model:{value:e.formData.time_show,callback:function(t){e.$set(e.formData,"time_show",t)},expression:"formData.time_show"}}),e._v(" "),a("span",{staticStyle:{height:"30px",display:"inline-block"}},[e._v(" "+e._s(e.$lang.logging_before)+" ")])],1)],1)],1)],1),a("div",{staticClass:"bottomOperationAdd"},[a("el-button",{attrs:{size:"small",type:"primary",loading:e.subLoading},on:{click:e.submitForm}},[e._v(e._s(e.$lang.submit))]),a("el-button",{attrs:{size:"small"},on:{click:e.resetForm}},[e._v(e._s(e.$lang.reset))])],1)],1)},n=[],o=(a("96cf"),a("1da1")),i=a("90ba"),l={metaInfo:{title:window.zjmf_cw_lang.log_cleaning},data:function(){return{subLoading:!1,pageData:{},logNum:1155,pickerOptions:{shortcuts:[{text:this.$lang.today,onClick:function(e){e.$emit("pick",new Date)}},{text:this.$lang.a_week_ago,onClick:function(e){var t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}},{text:this.$lang.thirty_days_before,onClick:function(e){var t=new Date;t.setTime(t.getTime()-2592e6),e.$emit("pick",t)}},{text:this.$lang.sixty_days_before,onClick:function(e){var t=new Date;t.setTime(t.getTime()-5184e6),e.$emit("pick",t)}},{text:this.$lang.ninety_days_before,onClick:function(e){var t=new Date;t.setTime(t.getTime()-7776e6),e.$emit("pick",t)}}]},formData:{type:"system_log",time:null,time_show:null},rules:{type:[{required:!0,message:this.$lang.please_select_log,trigger:"change"}],time_show:[{required:!0,message:this.$lang.select_time,trigger:"change"}]}}},created:function(){this.getData()},mounted:function(){},methods:{getData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["d"])(e.formData);case 2:if(a=t.sent,r=a.data,200===r.status){t.next=7;break}return e.$message.error(r.msg),t.abrupt("return");case 7:e.pageData=r.data;case 8:case"end":return t.stop()}}),t)})))()},submitForm:function(){var e=this;this.$refs.elForm.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(a){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return",!1);case 2:return e.subLoading=!0,e.formData.time=Math.floor(e.formData.time_show/1e3),t.next=6,Object(i["c"])(e.formData);case 6:if(r=t.sent,n=r.data,200===n.status){t.next=11;break}return e.$message.error(n.msg),t.abrupt("return");case 11:e.subLoading=!1,e.$confirm(e.$lang.is_delete+"".concat(e.$moment(e.formData.time_show).format("YYYY-MM-DD"))+e.$lang.prevenient+"".concat(e.pageData.type[e.formData.type],",")+e.$lang.owned_by_all+"".concat(n.data.count)+e.$lang.strip_data,e.$lang.hint,{confirmButtonText:e.$lang.confirm,cancelButtonText:e.$lang.cancel,type:"warning"}).then((function(){Object(i["e"])(e.formData).then((function(t){200!==t.data.status?e.$message.error(t.data.msg):(e.formData.time=null,e.formData.time_show=null,e.$nextTick((function(){e.$refs.elForm.clearValidate()})),e.$message.success(t.data.msg),e.getData())}))})).catch((function(){}));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},resetForm:function(){this.$refs.elForm.resetFields()}},computed:{},watch:{}},s=l,c=a("2877"),u=Object(c["a"])(s,r,n,!1,null,"fd5975ea",null);t["default"]=u.exports}}]);