(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["WorkOrderRules~31ecd969"],{"06c5":function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));r("a630"),r("fb6a"),r("b0c0"),r("d3b7"),r("25f0"),r("3ca3");var a=r("6b75");function n(t,e){if(t){if("string"===typeof t)return Object(a["a"])(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Object(a["a"])(t,e):void 0}}},"13d5":function(t,e,r){"use strict";var a=r("23e7"),n=r("d58f").left,o=r("a640"),i=r("ae40"),c=o("reduce"),s=i("reduce",{1:0});a({target:"Array",proto:!0,forced:!c||!s},{reduce:function(t){return n(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"22fc":function(t,e,r){"use strict";r.d(e,"l",(function(){return n})),r.d(e,"i",(function(){return o})),r.d(e,"g",(function(){return i})),r.d(e,"k",(function(){return c})),r.d(e,"b",(function(){return s})),r.d(e,"f",(function(){return u})),r.d(e,"d",(function(){return l})),r.d(e,"m",(function(){return d})),r.d(e,"n",(function(){return f})),r.d(e,"h",(function(){return m})),r.d(e,"a",(function(){return p})),r.d(e,"j",(function(){return b})),r.d(e,"e",(function(){return g})),r.d(e,"c",(function(){return _}));var a=r("a27e");function n(){return Object(a["a"])({url:"list_ticket_department"})}function o(){return Object(a["a"])({url:"get_ticket_deliver"})}function i(){return Object(a["a"])({url:"get_ticket_department"})}function c(t){return Object(a["a"])({url:"list_ticket_department/"+t})}function s(t){return Object(a["a"])({url:"add_ticket_department",method:"post",data:t})}function u(t){return Object(a["a"])({url:"save_ticket_department",method:"post",data:t})}function l(t){return Object(a["a"])({url:"delete_ticket_department",method:"post",data:t})}function d(t){return Object(a["a"])({url:"movedown_ticket_department",method:"post",data:t})}function f(t){return Object(a["a"])({url:"moveup_ticket_department",method:"post",data:t})}function m(t){return Object(a["a"])({url:"get_custom_param_type",method:"get",params:t})}function p(t){return Object(a["a"])({url:"add_ticket_custom_param",method:"get",params:t})}function b(t){return Object(a["a"])({url:"get_ticket_param_val",method:"get",params:t})}function g(t){return Object(a["a"])({url:"edit_ticket_custom_param",method:"get",params:t})}function _(t){return Object(a["a"])({url:"del_ticket_custom_param",method:"get",params:t})}},2532:function(t,e,r){"use strict";var a=r("23e7"),n=r("5a34"),o=r("1d80"),i=r("ab13");a({target:"String",proto:!0,forced:!i("includes")},{includes:function(t){return!!~String(o(this)).indexOf(n(t),arguments.length>1?arguments[1]:void 0)}})},2909:function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var a=r("6b75");function n(t){if(Array.isArray(t))return Object(a["a"])(t)}r("a4d3"),r("e01a"),r("d28b"),r("a630"),r("e260"),r("d3b7"),r("3ca3"),r("ddb0");function o(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}var i=r("06c5");function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t){return n(t)||o(t)||Object(i["a"])(t)||c()}},"2f6a":function(t,e,r){"use strict";var a=r("a5ac"),n=r.n(a);n.a},"45fc":function(t,e,r){"use strict";var a=r("23e7"),n=r("b727").some,o=r("a640"),i=r("ae40"),c=o("some"),s=i("some");a({target:"Array",proto:!0,forced:!c||!s},{some:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},"47bf":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-row",{staticClass:"mt-10"},[r("el-col",{attrs:{md:24}},[r("el-button",{attrs:{size:"small",type:"success"},on:{click:t.addHandleClick}},[r("i",{staticClass:"el-icon-plus"}),t._v(" "+t._s(t.$lang.add_rule)+" ")])],1)],1),r("el-table",{staticClass:"mt-10",staticStyle:{width:"100%"},attrs:{data:t.workOrderRulesTableData,"default-sort":{prop:"order"},border:""}},[r("div",{attrs:{slot:"empty"},slot:"empty"},[!t.workOrderRulesTableData.length&&t.tableLoading?r("span",[r("i",{staticClass:"el-icon-loading"}),t._v(" "+t._s(t.$lang.loading)+" ... ")]):t._e(),t.workOrderRulesTableData.length||t.tableLoading?t._e():r("span",[t._v(t._s(t.$lang.no_data))])]),r("el-table-column",{attrs:{prop:"departments",label:t.$lang.department,formatter:t.formatterDepartments}}),r("el-table-column",{attrs:{prop:"products",label:t.$lang.product,formatter:t.formatterDepartments}}),r("el-table-column",{attrs:{prop:"mask_keywords",label:t.$lang.shield_key,formatter:t.formatterKeywords}}),r("el-table-column",{attrs:{prop:"is_open_auto_reply",width:"120",label:t.$lang.auto_reply,align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[r("el-switch",{attrs:{"active-value":1,"inactive-value":0,disabled:""},model:{value:a.is_open_auto_reply,callback:function(e){t.$set(a,"is_open_auto_reply",e)},expression:"row.is_open_auto_reply"}})]}}])}),r("el-table-column",{attrs:{label:t.$lang.operation,width:"130",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{staticClass:"span-primary",attrs:{size:"small",type:"text",icon:"el-icon-edit"},on:{click:function(r){return t.editHandleClick(e.row)}}},[t._v(t._s(t.$lang.edit))]),r("el-button",{staticClass:"span-danger",attrs:{size:"small",type:"text",icon:"el-icon-delete"},on:{click:function(r){return t.deleteHandleClick(e.row.id)}}},[t._v(t._s(t.$lang.delete))])]}}])})],1),r("el-dialog",{attrs:{title:""===t.rulesId?t.$lang.add_process_order_transfer_rule:t.$lang.modify_workorder_transfer_rule,visible:t.dialogFormVisible,width:"500px"},on:{"update:visible":function(e){t.dialogFormVisible=e},closed:t.dialogClosed}},[r("el-form",{ref:"elForm",attrs:{model:t.formData,rules:t.rules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:t.$lang.department,prop:"departments"}},[r("el-select",{staticStyle:{width:"85%"},attrs:{multiple:"",filterable:"",clearable:"",placeholder:t.$lang.please_choose,"collapse-tags":""},model:{value:t.formData.departments,callback:function(e){t.$set(t.formData,"departments",e)},expression:"formData.departments"}},t._l(t.departmentList,(function(t,e){return r("el-option",{key:e,attrs:{label:t.name,value:t.id}})})),1)],1),r("el-form-item",{attrs:{label:t.$lang.product,prop:"products"}},[r("el-select",{staticStyle:{width:"85%"},attrs:{multiple:"",filterable:"",clearable:"",placeholder:t.$lang.please_choose,"collapse-tags":""},model:{value:t.formData.products,callback:function(e){t.$set(t.formData,"products",e)},expression:"formData.products"}},t._l(t.productList,(function(e){return r("el-option-group",{key:e.id,staticClass:"specWarpper",attrs:{label:e.name},nativeOn:{click:function(r){return t.selectedGroup(t.productSecondArr,e.id,t.productList,"products","product")}}},[t._l(e.product,(function(e,a){return["zjmf_api"===e.api_type?r("el-option",{key:e.id+"asd"+a,attrs:{label:e.name,value:e.id}}):t._e()]}))],2)})),1)],1),r("el-form-item",{attrs:{label:t.$lang.auto_reply,prop:"is_open_auto_reply"}},[r("el-switch",{staticStyle:{width:"100%"},attrs:{"active-value":1,"inactive-value":0},model:{value:t.formData.is_open_auto_reply,callback:function(e){t.$set(t.formData,"is_open_auto_reply",e)},expression:"formData.is_open_auto_reply"}}),1===t.formData.is_open_auto_reply?r("el-input",{staticStyle:{width:"85%"},attrs:{type:"textarea",autosize:{minRows:4,maxRows:6},maxlength:"100","show-word-limit":""},model:{value:t.formData.bz,callback:function(e){t.$set(t.formData,"bz",e)},expression:"formData.bz"}}):t._e()],1),r("el-form-item",{attrs:{label:t.$lang.shield_key,prop:"mask_keywords"}},[r("el-input",{staticStyle:{width:"85%"},attrs:{type:"textarea",autosize:{minRows:4,maxRows:6},"show-word-limit":""},model:{value:t.formData.mask_keywords,callback:function(e){t.$set(t.formData,"mask_keywords",e)},expression:"formData.mask_keywords"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},on:{click:function(e){t.dialogFormVisible=!1}}},[t._v(t._s(t.$lang.cancel))]),r("el-button",{attrs:{size:"small",type:"primary",loading:t.btnLoading},on:{click:t.submitForm}},[t._v(t._s(t.$lang.confirm))])],1)],1)],1)},n=[],o=(r("99af"),r("4de4"),r("4160"),r("caad"),r("d81d"),r("13d5"),r("45fc"),r("a434"),r("b0c0"),r("d3b7"),r("ac1f"),r("6062"),r("2532"),r("3ca3"),r("1276"),r("159b"),r("ddb0"),r("96cf"),r("1da1")),i=r("2909"),c=r("a27e");function s(){return Object(c["a"])({url:"list_ticket_deliver"})}function u(t){return Object(c["a"])({url:"add_ticket_deliver",method:"post",data:t})}function l(t){return Object(c["a"])({url:"save_ticket_deliver",method:"post",data:t})}function d(t){return Object(c["a"])({url:"delete_ticket_deliver",method:"post",data:t})}var f=r("22fc"),m=r("6a8e"),p={metaInfo:{title:window.zjmf_cw_lang.process_order_transfer},data:function(){return{productSecondArr:[],rulesId:"",tableLoading:!1,workOrderRulesTableData:[],departmentList:[],productList:[],dialogFormVisible:!1,formData:{id:null,departments:[],products:[],is_open_auto_reply:0,bz:"",mask_keywords:""},rules:{departments:[{required:!0,message:this.$lang.select_department,trigger:"blur"}],products:[{required:!0,message:this.$lang.select_product,trigger:"blur"}]},btnLoading:!1}},methods:{selectedGroup:function(t,e,r,a,n){var o=this;if(t.includes(e))(function(){for(var i=[],c=0;c<r.length;c++){var s=r[c];s.id===e&&s[n].forEach((function(t){i.push(t.id)}))}var u=o.formData[a].concat(),l=u.filter((function(t){return!i.includes(t)}));o.formData[a]=l;for(var d=0;d<t.length;d++){var f=t[d];f===e&&t.splice(d,1)}})();else{t.push(e),t=Object(i["a"])(new Set(t));for(var c=r,s=0;s<c.length;s++){var u=c[s];if(e===u.id&&u[n])for(var l=0;l<u[n].length;l++){var d=u[n][l];"zjmf_api"===d.api_type&&this.formData[a].push(d.id)}}this.formData[a]=Object(i["a"])(new Set(this.formData[a]))}},clickSelectGroup:function(t,e,r){t.choose?this.formData[e]=this.formData[e].filter((function(e){return!t[r].some((function(t){return e===t.id}))})):this.formData[e]=Object(i["a"])(new Set(this.formData[e].concat(t[r].map((function(t){return t.id&&"zjmf_api"===t.api_type}))))),t.choose=!t.choose},formatterKeywords:function(t){var e=t.mask_keywords.split("\n"),r=(e||[]).reduce((function(t,r,a){return t+r+(e.length-1!==a?"/":"")}),"");return r},formatterDepartments:function(t,e){var r=(t[e.property]||[]).reduce((function(r,a,n){return r+a.name+(t[e.property].length-1!==n?"/":"")}),"");return r},addHandleClick:function(){this.dialogFormVisible=!0,this.rulesId=""},getData:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.tableLoading=!0,e.next=3,s();case 3:if(r=e.sent,a=r.data,200===a.status){e.next=9;break}return t.$message.error(a.msg),t.tableLoading=!1,e.abrupt("return");case 9:for(t.tableLoading=!1,n=0;n<a.data.length;n++)o=a.data[n],o.isEdit=!1;t.workOrderRulesTableData=a.data;case 12:case"end":return e.stop()}}),e)})))()},getFormInfoById:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(f["i"])();case 2:return r=e.sent,200===r.data.status&&(t.departmentList=r.data.data.department),e.next=6,Object(m["f"])();case 6:a=e.sent,200===a.data.status&&(t.productList=a.data.client_groups.map((function(t){return t.choose=!1,t})));case 8:case"end":return e.stop()}}),e)})))()},editHandleClick:function(t){this.rulesId=t.id,this.dialogFormVisible=!0,this.formData.id=t.id,this.formData.departments=t.departments.map((function(t){return t.id})),this.formData.products=t.products.map((function(t){return t.id})),this.formData.is_open_auto_reply=t.is_open_auto_reply,this.formData.bz=t.bz,this.formData.mask_keywords=t.mask_keywords},submitForm:function(){var t=this;this.$refs.elForm.validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(r){var a,n,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r){e.next=3;break}e.next=20;break;case 3:if(""!==t.rulesId){e.next=13;break}return t.btnLoading=!0,e.next=7,u(t.formData);case 7:a=e.sent,n=a.data,200===n.status?(t.$message({message:n.msg,type:"success"}),t.getData(),t.dialogFormVisible=!1):t.$message({message:n.msg,type:"error"}),t.btnLoading=!1,e.next=20;break;case 13:return t.btnLoading=!0,e.next=16,l(t.formData);case 16:o=e.sent,i=o.data,200===i.status?(t.$message({message:i.msg,type:"success"}),t.getData(),t.dialogFormVisible=!1):t.$message({message:i.msg,type:"error"}),t.btnLoading=!1;case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},deleteHandleClick:function(t){var e=this;this.$confirm(this.$lang.action_remove_rule,this.$lang.hint,{confirmButtonText:this.$lang.confirm,cancelButtonText:this.$lang.cancel,type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,d({id:t});case 2:a=r.sent,n=a.data,200!==n.status?e.$message.error(n.msg):(e.$message.success(n.msg),e.getData());case 5:case"end":return r.stop()}}),r)})))).catch((function(){}))},dialogClosed:function(){this.$refs.elForm.resetFields()}},created:function(){this.getData(),this.getFormInfoById()}},b=p,g=(r("2f6a"),r("2877")),_=Object(g["a"])(b,a,n,!1,null,"06ccbe80",null);e["default"]=_.exports},"4de4":function(t,e,r){"use strict";var a=r("23e7"),n=r("b727").filter,o=r("1dde"),i=r("ae40"),c=o("filter"),s=i("filter");a({target:"Array",proto:!0,forced:!c||!s},{filter:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(t,e,r){"use strict";var a=r("0366"),n=r("7b0b"),o=r("9bdd"),i=r("e95a"),c=r("50c4"),s=r("8418"),u=r("35a1");t.exports=function(t){var e,r,l,d,f,m,p=n(t),b="function"==typeof this?this:Array,g=arguments.length,_=g>1?arguments[1]:void 0,h=void 0!==_,v=u(p),y=0;if(h&&(_=a(_,g>2?arguments[2]:void 0,2)),void 0==v||b==Array&&i(v))for(e=c(p.length),r=new b(e);e>y;y++)m=h?_(p[y],y):p[y],s(r,y,m);else for(d=v.call(p),f=d.next,r=new b;!(l=f.call(d)).done;y++)m=h?o(d,_,[l.value,y],!0):l.value,s(r,y,m);return r.length=y,r}},"5a34":function(t,e,r){var a=r("44e7");t.exports=function(t){if(a(t))throw TypeError("The method doesn't accept regular expressions");return t}},"6a8e":function(t,e,r){"use strict";r.d(e,"f",(function(){return n})),r.d(e,"g",(function(){return o})),r.d(e,"d",(function(){return i})),r.d(e,"c",(function(){return c})),r.d(e,"b",(function(){return s})),r.d(e,"e",(function(){return u})),r.d(e,"h",(function(){return l})),r.d(e,"j",(function(){return d})),r.d(e,"i",(function(){return f})),r.d(e,"a",(function(){return m}));var a=r("a27e");function n(t,e){return Object(a["a"])({url:"common/get_product_list",params:{type:t,id:e}})}function o(t){return Object(a["a"])({url:"common/get_promo_code",params:{type:t}})}function i(){return Object(a["a"])({url:"common/get_getways"})}function c(t){return Object(a["a"])({url:"common/get_email_tem",params:{type:t}})}function s(){return Object(a["a"])({url:"common/get_client_groups"})}function u(t){return Object(a["a"])({url:"common/host_list",params:{uid:t}})}function l(){return Object(a["a"])({url:"common/get_sms_country"})}function d(){return Object(a["a"])({url:"common/product_config_options"})}function f(t){return Object(a["a"])({url:"common/get_upstream_ticket_department_list",params:{id:t}})}function m(t){return Object(a["a"])({url:"check_product_as",method:"post",data:t})}},"6b75":function(t,e,r){"use strict";function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}r.d(e,"a",(function(){return a}))},8418:function(t,e,r){"use strict";var a=r("c04e"),n=r("9bf2"),o=r("5c6c");t.exports=function(t,e,r){var i=a(e);i in t?n.f(t,i,o(0,r)):t[i]=r}},"99af":function(t,e,r){"use strict";var a=r("23e7"),n=r("d039"),o=r("e8b5"),i=r("861d"),c=r("7b0b"),s=r("50c4"),u=r("8418"),l=r("65f0"),d=r("1dde"),f=r("b622"),m=r("2d00"),p=f("isConcatSpreadable"),b=9007199254740991,g="Maximum allowed index exceeded",_=m>=51||!n((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),h=d("concat"),v=function(t){if(!i(t))return!1;var e=t[p];return void 0!==e?!!e:o(t)},y=!_||!h;a({target:"Array",proto:!0,forced:y},{concat:function(t){var e,r,a,n,o,i=c(this),d=l(i,0),f=0;for(e=-1,a=arguments.length;e<a;e++)if(o=-1===e?i:arguments[e],v(o)){if(n=s(o.length),f+n>b)throw TypeError(g);for(r=0;r<n;r++,f++)r in o&&u(d,f,o[r])}else{if(f>=b)throw TypeError(g);u(d,f++,o)}return d.length=f,d}})},a434:function(t,e,r){"use strict";var a=r("23e7"),n=r("23cb"),o=r("a691"),i=r("50c4"),c=r("7b0b"),s=r("65f0"),u=r("8418"),l=r("1dde"),d=r("ae40"),f=l("splice"),m=d("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,b=Math.min,g=9007199254740991,_="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!f||!m},{splice:function(t,e){var r,a,l,d,f,m,h=c(this),v=i(h.length),y=n(t,v),w=arguments.length;if(0===w?r=a=0:1===w?(r=0,a=v-y):(r=w-2,a=b(p(o(e),0),v-y)),v+r-a>g)throw TypeError(_);for(l=s(h,a),d=0;d<a;d++)f=y+d,f in h&&u(l,d,h[f]);if(l.length=a,r<a){for(d=y;d<v-a;d++)f=d+a,m=d+r,f in h?h[m]=h[f]:delete h[m];for(d=v;d>v-a+r;d--)delete h[d-1]}else if(r>a)for(d=v-a;d>y;d--)f=d+a-1,m=d+r-1,f in h?h[m]=h[f]:delete h[m];for(d=0;d<r;d++)h[d+y]=arguments[d+2];return h.length=v-a+r,l}})},a5ac:function(t,e,r){},a630:function(t,e,r){var a=r("23e7"),n=r("4df4"),o=r("1c7e"),i=!o((function(t){Array.from(t)}));a({target:"Array",stat:!0,forced:i},{from:n})},ab13:function(t,e,r){var a=r("b622"),n=a("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[n]=!1,"/./"[t](e)}catch(a){}}return!1}},caad:function(t,e,r){"use strict";var a=r("23e7"),n=r("4d64").includes,o=r("44d2"),i=r("ae40"),c=i("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:!c},{includes:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),o("includes")},d58f:function(t,e,r){var a=r("1c0b"),n=r("7b0b"),o=r("44ad"),i=r("50c4"),c=function(t){return function(e,r,c,s){a(r);var u=n(e),l=o(u),d=i(u.length),f=t?d-1:0,m=t?-1:1;if(c<2)while(1){if(f in l){s=l[f],f+=m;break}if(f+=m,t?f<0:d<=f)throw TypeError("Reduce of empty array with no initial value")}for(;t?f>=0:d>f;f+=m)f in l&&(s=r(s,l[f],f,u));return s}};t.exports={left:c(!1),right:c(!0)}},fb6a:function(t,e,r){"use strict";var a=r("23e7"),n=r("861d"),o=r("e8b5"),i=r("23cb"),c=r("50c4"),s=r("fc6a"),u=r("8418"),l=r("b622"),d=r("1dde"),f=r("ae40"),m=d("slice"),p=f("slice",{ACCESSORS:!0,0:0,1:2}),b=l("species"),g=[].slice,_=Math.max;a({target:"Array",proto:!0,forced:!m||!p},{slice:function(t,e){var r,a,l,d=s(this),f=c(d.length),m=i(t,f),p=i(void 0===e?f:e,f);if(o(d)&&(r=d.constructor,"function"!=typeof r||r!==Array&&!o(r.prototype)?n(r)&&(r=r[b],null===r&&(r=void 0)):r=void 0,r===Array||void 0===r))return g.call(d,m,p);for(a=new(void 0===r?Array:r)(_(p-m,0)),l=0;m<p;m++,l++)m in d&&u(a,l,d[m]);return a.length=l,a}})}}]);