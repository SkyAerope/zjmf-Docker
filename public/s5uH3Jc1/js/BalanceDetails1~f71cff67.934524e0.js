(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["BalanceDetails1~f71cff67"],{"65e9":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"balance",staticStyle:{padding:"20px"}},[n("h2",[e._v(e._s(e.$lang.balance_manage))]),n("h5",[e._v(e._s(e.$lang.balance_manage_tips_text))]),n("h5",[e._v(e._s(e.$lang.client)+": "+e._s(e.userInfo.username)+" ("+e._s(e.$lang.cash_surplus)+": "+e._s(e.userInfo.credit)+e._s(e.userInfo.suffix)+")")]),n("el-divider"),n("el-row",{staticStyle:{"margin-bottom":"20px"}},[n("el-button",{attrs:{size:"small",plain:"",type:"primary"},on:{click:function(t){e.czDialogVisible=!0}}},[e._v(e._s(e.$lang.recharge))]),n("el-button",{attrs:{size:"small",type:"warning"},on:{click:e.forceModify}},[e._v(e._s(e.$lang.forced_modification_balance))])],1),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[n("el-table-column",{attrs:{prop:"id",label:"ID",width:"80",align:"center"}}),n("el-table-column",{attrs:{prop:"create_time",label:e.$lang.time,width:"145",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("span",[e._v(e._s(a.create_time?e.$moment(1e3*a.create_time).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}}])}),n("el-table-column",{attrs:{prop:"description",label:e.$lang.describe},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("span",{domProps:{innerHTML:e._s(a.description)}})]}}])}),n("el-table-column",{attrs:{prop:"notes",label:e.$lang.remark,"show-overflow-tooltip":!0}}),n("el-table-column",{attrs:{prop:"amount",label:e.$lang.sum,width:"200"}}),n("el-table-column",{attrs:{prop:"detailed",label:e.$lang.remain_sum,width:"200"}}),n("el-table-column",{attrs:{label:e.$lang.operation,width:"135",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{staticClass:"span-primary",attrs:{size:"small",type:"text",icon:"el-icon-edit"},on:{click:function(n){return e.editBalance(t.row)}}},[e._v(" "+e._s(e.$lang.edit))]),n("el-button",{staticClass:"span-danger",attrs:{size:"small",type:"text",icon:"el-icon-delete"},on:{click:function(n){return e.deleteBalance(t.row)}}},[e._v(e._s(e.$lang.delete))])]}}])})],1),n("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,15,20,25,50,100],"page-size":e.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.currentChange}}),n("el-dialog",e._g(e._b({attrs:{visible:e.dialogVisible,title:e.modalTitle,width:"40%"},on:{close:e.onClose,opened:e.onOpen}},"el-dialog",e.$attrs,!1),e.$listeners),[n("el-row",{attrs:{gutter:15}},[n("el-form",{ref:"elForm",attrs:{model:e.formData,rules:e.rules,"label-width":"150px"}},[n("el-col",{attrs:{span:23}},[n("el-row",{attrs:{gutter:15}},[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:e.$lang.update_type,prop:"selectOpeartion"}},[n("el-select",{style:{width:"100%"},attrs:{placeholder:e.$lang.please_choose,disabled:e.isEdit},model:{value:e.formData.selectOpeartion,callback:function(t){e.$set(e.formData,"selectOpeartion",t)},expression:"formData.selectOpeartion"}},e._l(e.opeartions,(function(e,t){return n("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1)],1),n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"uid",prop:"uid"}},[n("el-input",{style:{width:"100%"},attrs:{size:"small",placeholder:e.$lang.if_you_see_this,readonly:""},model:{value:e.formData.uid,callback:function(t){e.$set(e.formData,"uid",t)},expression:"formData.uid"}})],1)],1),n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:e.$lang.describe,prop:"description"}},[n("el-input",{style:{width:"100%"},attrs:{size:"small",type:"textarea",placeholder:e.$lang.enter_describe,autosize:{minRows:4,maxRows:4}},model:{value:e.formData.description,callback:function(t){e.$set(e.formData,"description",t)},expression:"formData.description"}})],1)],1),n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:e.$lang.sum,prop:"amount"}},[n("el-input-number",{style:{width:"100%"},attrs:{size:"small",controls:!1,precision:2,disabled:e.isEdit,placeholder:e.$lang.please_enter_sum,clearable:""},model:{value:e.formData.amount,callback:function(t){e.$set(e.formData,"amount",t)},expression:"formData.amount"}})],1)],1)],1)],1)],1)],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:e.close}},[e._v(e._s(e.$lang.cancel))]),n("el-button",{attrs:{size:"small",type:"primary",loading:e.subLoading},on:{click:e.handelConfirm}},[e._v(e._s(e.$lang.confirm))])],1)],1),n("el-dialog",{attrs:{title:e.$lang.create_bill,visible:e.czDialogVisible,width:"30%"},on:{close:e.onCloseCz,"update:visible":function(t){e.czDialogVisible=t}}},[n("div",[e._v(e._s(e.$lang.balance_details_check_tip_text)+" "+e._s(e.$lang.balance_details_checkout_tip_text))]),n("div",{staticClass:"mt-20"},[n("label",{staticStyle:{display:"inline-block",width:"60px","text-align-last":"justify"}},[e._v(e._s(e.$lang.input_amount)+": ")]),n("el-input-number",{staticClass:"ml-10",attrs:{size:"small",controls:!1,precision:2},model:{value:e.rechargeAmount,callback:function(t){e.rechargeAmount=t},expression:"rechargeAmount"}})],1),n("div",{staticClass:"mt-20",staticStyle:{display:"flex"}},[n("label",{staticStyle:{display:"inline-block",width:"60px","text-align-last":"justify"}},[e._v(e._s(e.$lang.remark)+": ")]),n("el-input",{staticClass:"ml-10",staticStyle:{width:"260px"},attrs:{type:"textarea"},model:{value:e.rechargeNotes,callback:function(t){e.rechargeNotes=t},expression:"rechargeNotes"}})],1),n("div",{staticClass:"mt-20"},[n("el-checkbox",{model:{value:e.alreadyPayChecked,callback:function(t){e.alreadyPayChecked=t},expression:"alreadyPayChecked"}},[e._v(e._s(e.$lang.automatic_entry))])],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:function(t){e.czDialogVisible=!1}}},[e._v(e._s(e.$lang.cancel))]),n("el-button",{attrs:{size:"small",type:"primary",loading:e.subLoading},on:{click:e.creatBillHandleClick}},[e._v(e._s(e.$lang.confirm))])],1)])],1)},r=[],i=(n("a4d3"),n("e01a"),n("a9e3"),n("96cf"),n("1da1")),o=n("8879"),c=n("f6b0"),s=n("a27e");function u(e,t,n){return Object(s["a"])({url:"credit",params:{uid:e,page:t,size:n}})}function l(e){return Object(s["a"])({url:"credit",method:"post",data:e})}function d(e){return Object(s["a"])({url:"credit/reduce",method:"post",data:e})}function m(e){return Object(s["a"])({url:"credit/".concat(e)})}function f(e){return Object(s["a"])({url:"credit/".concat(e.id),method:"put",data:e})}function p(e){return Object(s["a"])({url:"credit/".concat(e),method:"delete",params:{id:e}})}var g={metaInfo:{title:window.zjmf_cw_lang.balance_manage},data:function(){return{subLoading:!1,invoiceid:void 0,opeartions:[{name:this.$lang.add_balance,id:1},{name:this.$lang.decrease_balance,id:2}],selectedTableDataIds:[],alreadyPayChecked:!0,rechargeAmount:0,rechargeNotes:"",czDialogVisible:!1,tableData:[],total:0,limit:Number(localStorage.getItem("limit"))||50,currentPage:1,userInfo:{},dialogVisible:!1,modalTitle:this.$lang.forced_modification_balance,isAdd:!1,isDel:!1,isEdit:!1,name:"",credit:"",suffix:"",temp:{},formData:{selectOpeartion:1,uid:this.$route.query.id,description:void 0,amount:void 0},rules:{selectOpeartion:[{required:!0,message:this.$lang.select_type,trigger:"change"}],uid:[],description:[],amount:[{required:!0,message:this.$lang.amount_must_greater_than_zero,trigger:"blur",pattern:/^(?!(0[0-9]{0,}$))[0-9]{1,}[.]{0,}[0-9]{0,}$/}]}}},methods:{onCloseCz:function(){this.rechargeAmount=0},getList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u(e.$route.query.id,e.currentPage,e.limit);case 2:n=t.sent,e.userInfo=n.data.user,e.total=n.data.count,e.tableData=n.data.data;case 6:case"end":return t.stop()}}),t)})))()},markPaidHandleClick:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["p"])({ids:[e.invoiceid]});case 2:n=t.sent,a=n.data,200===a.status?(e.czDialogVisible=!1,e.getList(),e.$message.success(a.msg)):e.$message.warning(a.msg);case 5:case"end":return t.stop()}}),t)})))()},creatBillHandleClick:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.subLoading=!0,t.next=3,Object(c["b"])({uid:Number(e.$route.query.id),amount:e.rechargeAmount,notes:e.rechargeNotes});case 3:n=t.sent,a=n.data,200!==a.status?(e.$message.error(a.msg),e.subLoading=!1):!0===e.alreadyPayChecked?(e.invoiceid=a.invoiceid,e.$message.success(a.msg),e.markPaidHandleClick(),e.subLoading=!1):(e.$router.push({path:"/customer-view/bill",query:{id:e.$route.query.id}}),e.$message.success(a.msg),e.czDialogVisible=!1,e.subLoading=!1);case 6:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.limit=e,n.next=3,u(t.$route.query.id,t.currentPage,t.limit);case 3:if(a=n.sent,200===a.status){n.next=7;break}return t.$message.error(a.msg),n.abrupt("return");case 7:t.userInfo=a.data.user,t.total=a.data.count,t.tableData=a.data.data;case 10:case"end":return n.stop()}}),n)})))()},currentChange:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.currentPage=e,n.next=3,u(t.$route.query.id,t.currentPage,t.limit);case 3:if(a=n.sent,200===a.status){n.next=7;break}return t.$message.error(t.$lang.something_error),n.abrupt("return");case 7:t.userInfo=a.data.user,t.total=a.data.count,t.tableData=a.data.data;case 10:case"end":return n.stop()}}),n)})))()},forceModify:function(){this.modalTitle=this.$lang.forced_modification_balance,this.dialogVisible=!0,this.isDel=!0},editBalance:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.modalTitle=t.$lang.edit,t.isEdit=!0,t.dialogVisible=!0,n.next=5,m(e.id);case 5:a=n.sent,r=a.data,t.formData=r.data,Number(e.amount)>=0?t.$set(t.formData,"selectOpeartion",1):t.$set(t.formData,"selectOpeartion",2);case 9:case"end":return n.stop()}}),n)})))()},deleteBalance:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.$confirm(t.$lang.del_this_amount_tips_text,t.$lang.hint,{confirmButtonText:t.$lang.confirm,cancelButtonText:t.$lang.cancel,type:"warning"}).then((function(){p(e.id).then((function(e){200!==e.data.status?(t.$message.error(e.data.msg),t.getList()):(t.$message.success(e.data.msg),t.getList())}))})).catch((function(){}));case 1:case"end":return n.stop()}}),n)})))()},onClose:function(){this.$refs.elForm.resetFields(),this.dialogVisible=!1,this.isAdd=!1,this.isDel=!1,this.isEdit=!1},onOpen:function(){},close:function(){this.$emit("update:visible",!1),this.dialogVisible=!1,this.isAdd=!1,this.isDel=!1,this.isEdit=!1},handelConfirm:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isEdit){t.next=10;break}return e.temp.id=e.formData.id,e.temp.description=e.formData.description,e.subLoading=!0,t.next=6,f(e.temp);case 6:n=t.sent,200!==n.data.status?(e.$message.error(n.data.msg),e.getList(),e.subLoading=!1):(e.$message.success(n.data.msg),e.getList(),e.close(),e.subLoading=!1,e.isEdit=!1),t.next=11;break;case 10:e.$refs.elForm.validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(n){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return",!1);case 2:if(1!==e.formData.selectOpeartion){t.next=10;break}return e.subLoading=!0,t.next=6,l(e.formData);case 6:a=t.sent,200!==a.data.status?(e.$message.error(a.msg),e.subLoading=!1):(e.$message.success(a.data.msg),e.getList(),e.isAdd=!1,e.close(),e.subLoading=!1),t.next=16;break;case 10:if(2!==e.formData.selectOpeartion){t.next=16;break}return e.subLoading=!0,t.next=14,d(e.formData);case 14:r=t.sent,200!==r.data.status?(e.$message.error(r.data.msg),e.getList(),e.subLoading=!1):(e.$message.success(r.data.msg),e.getList(),e.close(),e.isDel=!1,e.subLoading=!1);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 11:case"end":return t.stop()}}),t)})))()}},created:function(){this.getList()}},b=g,h=n("2877"),_=Object(h["a"])(b,a,r,!1,null,"1767fe89",null);t["default"]=_.exports},8879:function(e,t,n){"use strict";n.d(t,"x",(function(){return r})),n.d(t,"f",(function(){return i})),n.d(t,"p",(function(){return o})),n.d(t,"q",(function(){return c})),n.d(t,"o",(function(){return s})),n.d(t,"j",(function(){return u})),n.d(t,"l",(function(){return l})),n.d(t,"g",(function(){return d})),n.d(t,"d",(function(){return m})),n.d(t,"c",(function(){return f})),n.d(t,"r",(function(){return p})),n.d(t,"s",(function(){return g})),n.d(t,"e",(function(){return b})),n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return _})),n.d(t,"k",(function(){return v})),n.d(t,"t",(function(){return O})),n.d(t,"u",(function(){return $})),n.d(t,"v",(function(){return j})),n.d(t,"w",(function(){return y})),n.d(t,"y",(function(){return w})),n.d(t,"m",(function(){return x})),n.d(t,"i",(function(){return k})),n.d(t,"h",(function(){return D})),n.d(t,"n",(function(){return z}));var a=n("a27e");function r(e){return Object(a["a"])({url:"invoice/search_page",params:e})}function i(e){return Object(a["a"])({url:"invoice/index",params:e})}function o(e){return Object(a["a"])({url:"invoice/paid",params:e})}function c(e){return Object(a["a"])({url:"invoice/unpaid",params:e})}function s(e){return Object(a["a"])({url:"invoice/cancelled",params:e})}function u(e){return Object(a["a"])({url:"invoice/delete",method:"delete",params:e})}function l(e){return Object(a["a"])({url:"invoice/duplicate",params:e})}function d(e){return Object(a["a"])({url:"invoice/summary/"+e})}function m(e){return Object(a["a"])({url:"invoice/addpay_page/"+e})}function f(e){return Object(a["a"])({url:"invoice/addpay",method:"post",data:e})}function p(e){return Object(a["a"])({url:"invoice/option_page/"+e})}function g(e){return Object(a["a"])({url:"invoice/option",method:"post",data:e})}function b(e){return Object(a["a"])({url:"invoice/add_pay_invoice_page/"+e})}function h(e){return Object(a["a"])({url:"invoice/add_pay_invoice",method:"post",data:e})}function _(e){return Object(a["a"])({url:"invoice/apply_credit_limit",method:"post",data:e})}function v(e){return Object(a["a"])({url:"invoice/delete_pay_invoice",method:"post",data:e})}function O(e){return Object(a["a"])({url:"invoice/refund_page",params:e})}function $(e){return Object(a["a"])({url:"invoice/refund",method:"post",data:e})}function j(e){return Object(a["a"])({url:"invoice/notes_page",params:e})}function y(e){return Object(a["a"])({url:"invoice/notes",method:"post",data:e})}function w(e){return Object(a["a"])({url:"invoice/email",method:"post",data:e})}function x(e){return Object(a["a"])({url:"invoice/edit_item",method:"post",data:e})}function k(e){return Object(a["a"])({url:"invoice/delete_item",method:"delete",params:e})}function D(e){return Object(a["a"])({url:"invoice/delete_account/"+e,method:"delete"})}function z(e){return Object(a["a"])({url:"invoice/log_list",params:e})}},f6b0:function(e,t,n){"use strict";n.d(t,"r",(function(){return r})),n.d(t,"t",(function(){return i})),n.d(t,"o",(function(){return o})),n.d(t,"a",(function(){return c})),n.d(t,"s",(function(){return s})),n.d(t,"u",(function(){return u})),n.d(t,"n",(function(){return l})),n.d(t,"m",(function(){return d})),n.d(t,"h",(function(){return m})),n.d(t,"k",(function(){return f})),n.d(t,"i",(function(){return p})),n.d(t,"g",(function(){return g})),n.d(t,"f",(function(){return b})),n.d(t,"d",(function(){return h})),n.d(t,"w",(function(){return _})),n.d(t,"z",(function(){return v})),n.d(t,"c",(function(){return O})),n.d(t,"b",(function(){return $})),n.d(t,"q",(function(){return j})),n.d(t,"C",(function(){return y})),n.d(t,"l",(function(){return w})),n.d(t,"D",(function(){return x})),n.d(t,"v",(function(){return k})),n.d(t,"A",(function(){return D})),n.d(t,"B",(function(){return z})),n.d(t,"e",(function(){return C})),n.d(t,"x",(function(){return L})),n.d(t,"p",(function(){return R})),n.d(t,"j",(function(){return P})),n.d(t,"y",(function(){return q}));var a=n("a27e");function r(e){return Object(a["a"])({url:"client_list",method:"post",data:e})}function i(e){return Object(a["a"])({url:"summary?client_id=".concat(e)})}function o(){return Object(a["a"])({url:"create_client"})}function c(e){return Object(a["a"])({url:"create_client_post",method:"post",data:e})}function s(e){return Object(a["a"])({url:"profile/".concat(e)})}function u(e,t){return Object(a["a"])({url:"profile/getclients/".concat(e),params:t})}function l(e){return Object(a["a"])({url:"profile_post",method:"post",data:e})}function d(e){return Object(a["a"])({url:"delete_client/".concat(e)})}function m(e){return Object(a["a"])({url:"close_client/".concat(e)})}function f(e){return Object(a["a"])({url:"user_invoice",params:e})}function p(e,t){return Object(a["a"])({url:"close_client/".concat(e),params:t})}function g(e){return Object(a["a"])({url:"client_ticket",params:e})}function b(e){return Object(a["a"])({url:"log_record",params:e})}function h(e){return Object(a["a"])({url:"zjmf_finance_api/logs",params:e})}function _(e){return Object(a["a"])({url:"login_by_user/"+e})}function v(e){return Object(a["a"])({url:"certifi_person_detail/".concat(e)})}function O(e){return Object(a["a"])({url:"add_user_invoice",method:"post",data:e})}function $(e){return Object(a["a"])({url:"add_recharge_invoice/"+e.uid,method:"post",data:e})}function j(e){return Object(a["a"])({url:"get_user",params:e})}function y(e){return Object(a["a"])({url:"request_cancel_list",params:e})}function w(e){return Object(a["a"])({url:"request_cancel_list/".concat(e),method:"delete"})}function x(e){return Object(a["a"])({url:"searchlist",params:{value:e}})}function k(e){return Object(a["a"])({url:"hostbyuid",params:e})}function D(e){return Object(a["a"])({url:"clients_services/host_batch_renew_page",method:"post",data:e})}function z(e){return Object(a["a"])({url:"clients_services/host_batch_renew",method:"post",data:e})}function C(e){return Object(a["a"])({url:"clients_services/apply_credit",method:"post",data:e})}function L(e){return Object(a["a"])({url:"invoice/paid",params:e})}function R(e){return Object(a["a"])({url:"get_combine_invoices",params:e})}function P(e){return Object(a["a"])({url:"combine_invoices",method:"post",data:e})}function q(e){return Object(a["a"])({url:"post_client_notes",method:"post",data:e})}}}]);