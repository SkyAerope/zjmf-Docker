(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["CustomerCustom~f71cff67"],{9094:function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"custom"},[l("h2",[e._v("自定义客户字段")]),l("h5",{staticClass:"mt-0"},[e._v(e._s(e.$lang.set_custom_fields))]),l("el-row",[l("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[e._l(e.customfields,(function(t,a){return l("div",{key:a,staticClass:"wrapper__from h40"},[l("div",{staticClass:"product_btnGroup"},[l("el-button",{style:{color:"#fff",border:"1px solid #e64a19"},attrs:{size:"small",type:"danger"},on:{click:function(l){return e.deleteCustom(t.id,t.type)}}},[e._v(e._s(e.$lang.delete)+" ")])],1),l("el-row",[l("el-col",{attrs:{md:18,lg:12,xl:12}},[l("el-form-item",{attrs:{label:e.$lang.field_name}},[l("el-input",{attrs:{size:"small"},model:{value:t.fieldname,callback:function(l){e.$set(t,"fieldname",l)},expression:"item.fieldname"}})],1),l("el-form-item",{attrs:{label:e.$lang.filed_type}},[l("el-col",[l("el-select",{style:{width:"100%"},attrs:{size:"small",placeholder:e.$lang.select_filed_type,clearable:""},model:{value:t.fieldtype,callback:function(l){e.$set(t,"fieldtype",l)},expression:"item.fieldtype"}},e._l(e.type_list,(function(e,t,a){return l("el-option",{key:a,attrs:{label:e,value:t}})})),1)],1)],1),l("el-form-item",{attrs:{label:e.$lang.describe}},[l("el-row",[l("el-col",{attrs:{sm:24,md:15,lg:15,xl:15}},[l("el-input",{style:{width:"100%"},attrs:{size:"small",clearable:""},model:{value:t.description,callback:function(l){e.$set(t,"description",l)},expression:"item.description"}})],1),l("el-col",{style:{color:"#999"},attrs:{sm:24,md:8,lg:8,xl:8,offset:1}},[e._v(e._s(e.$lang.customer_description))])],1)],1),l("el-form-item",{attrs:{label:e.$lang.validation}},[l("el-row",[l("el-col",{attrs:{sm:24,md:15,lg:15,xl:15}},[l("el-input",{attrs:{size:"small",clearable:""},model:{value:t.regexpr,callback:function(l){e.$set(t,"regexpr",l)},expression:"item.regexpr"}})],1),l("el-col",{style:{color:"#999"},attrs:{sm:24,md:8,lg:8,xl:8,offset:1}},[e._v(e._s(e.$lang.regular_expressions_validate_string))])],1)],1),l("el-form-item",{attrs:{label:e.$lang.option}},[l("el-row",[l("el-col",{attrs:{sm:24,md:15,lg:15,xl:15}},[l("el-input",{attrs:{size:"small",disabled:"dropdown"!==t.fieldtype},model:{value:t.fieldoptions,callback:function(l){e.$set(t,"fieldoptions",l)},expression:"item.fieldoptions"}})],1),l("el-col",{style:{color:"#999"},attrs:{sm:24,md:8,lg:8,xl:8,offset:1}},[e._v(e._s(e.$lang.only_valid_dropdown)+" ")])],1)],1),l("el-form-item",{attrs:{label:e.$lang.according_to_sorting}},[l("el-input",{attrs:{size:"small"},model:{value:t.sortorder,callback:function(l){e.$set(t,"sortorder",l)},expression:"item.sortorder"}})],1),l("el-form-item",{attrs:{label:e.$lang.other_set}},[l("el-checkbox",{attrs:{label:e.$lang.visible_only_admin,"true-label":1,"false-label":0},model:{value:t.adminonly,callback:function(l){e.$set(t,"adminonly",l)},expression:"item.adminonly"}}),l("el-checkbox",{attrs:{label:e.$lang.must_fill_in,"true-label":1,"false-label":0},model:{value:t.required,callback:function(l){e.$set(t,"required",l)},expression:"item.required"}}),l("el-checkbox",{attrs:{label:e.$lang.display_at_registration,"true-label":1,"false-label":0},model:{value:t.showorder,callback:function(l){e.$set(t,"showorder",l)},expression:"item.showorder"}})],1)],1)],1)],1)})),l("div",{staticClass:"custom_new"},[l("div",{staticClass:"wrapper__from mt-20",attrs:{"data-title":e.$lang.add_a_custom_field}},[l("el-row",[l("el-col",{attrs:{md:18,lg:12,xl:12}},[l("el-form-item",{attrs:{label:e.$lang.field_name}},[l("el-input",{attrs:{size:"small"},model:{value:e.form.addfieldname,callback:function(t){e.$set(e.form,"addfieldname",t)},expression:"form.addfieldname"}})],1),l("el-form-item",{attrs:{label:e.$lang.filed_type}},[l("el-select",{style:{width:"100%"},attrs:{size:"small",placeholder:e.$lang.select_filed_type,clearable:""},model:{value:e.form.addfieldtype,callback:function(t){e.$set(e.form,"addfieldtype",t)},expression:"form.addfieldtype"}},e._l(e.type_list,(function(e,t,a){return l("el-option",{key:a,attrs:{label:e,value:t}})})),1)],1),l("el-form-item",{attrs:{label:e.$lang.describe}},[l("el-row",[l("el-col",{attrs:{sm:24,md:15,lg:15,xl:15}},[l("el-input",{attrs:{size:"small",clearable:""},model:{value:e.form.addcustomfielddesc,callback:function(t){e.$set(e.form,"addcustomfielddesc",t)},expression:"form.addcustomfielddesc"}})],1),l("el-col",{style:{color:"#999"},attrs:{sm:24,md:8,lg:8,xl:8,offset:1}},[e._v(e._s(e.$lang.customer_description))])],1)],1),l("el-form-item",{attrs:{label:e.$lang.validation}},[l("el-row",[l("el-col",{attrs:{sm:24,md:15,lg:15,xl:15}},[l("el-input",{attrs:{size:"small",clearable:""},model:{value:e.form.addregexpr,callback:function(t){e.$set(e.form,"addregexpr",t)},expression:"form.addregexpr"}})],1),l("el-col",{style:{color:"#999"},attrs:{sm:24,md:8,lg:8,xl:8,offset:1}},[e._v(e._s(e.$lang.regular_expressions_validate_string))])],1)],1),l("el-form-item",{attrs:{label:e.$lang.option}},[l("el-row",[l("el-col",{attrs:{sm:24,md:15,lg:15,xl:15}},[l("el-input",{attrs:{size:"small",disabled:"dropdown"!==e.form.addfieldtype},model:{value:e.form.addfieldoptions,callback:function(t){e.$set(e.form,"addfieldoptions",t)},expression:"form.addfieldoptions"}})],1),l("el-col",{style:{color:"#999"},attrs:{sm:24,md:8,lg:8,xl:8,offset:1}},[e._v(e._s(e.$lang.only_valid_dropdown)+" ")])],1)],1),l("el-form-item",{attrs:{label:e.$lang.according_to_sorting}},[l("el-input",{attrs:{size:"small"},model:{value:e.form.addsortorder,callback:function(t){e.$set(e.form,"addsortorder",t)},expression:"form.addsortorder"}})],1),l("el-form-item",{attrs:{label:e.$lang.other_set}},[l("el-checkbox",{attrs:{label:e.$lang.visible_only_admin,"true-label":1,"false-label":0},model:{value:e.form.addadminonly,callback:function(t){e.$set(e.form,"addadminonly",t)},expression:"form.addadminonly"}}),l("el-checkbox",{attrs:{label:e.$lang.must_fill_in,"true-label":1,"false-label":0},model:{value:e.form.addrequired,callback:function(t){e.$set(e.form,"addrequired",t)},expression:"form.addrequired"}}),l("el-checkbox",{attrs:{label:e.$lang.display_at_registration,"true-label":1,"false-label":0},model:{value:e.form.addshoworder,callback:function(t){e.$set(e.form,"addshoworder",t)},expression:"form.addshoworder"}})],1)],1)],1)],1)]),l("div",{staticClass:"bottomOperationAdd"},[l("el-col",{attrs:{span:24}},[l("el-button",{attrs:{size:"small",type:"primary",loading:e.btnLoading},on:{click:e.editCustom}},[e._v(e._s(e.$lang.submit))])],1)],1)],2)],1)],1)},o=[],r=(l("a4d3"),l("e01a"),l("4160"),l("159b"),l("96cf"),l("1da1")),s=l("a27e");function d(){return Object(s["a"])({url:"custom_fields"})}function i(e){return Object(s["a"])({url:"custom_fields",method:"post",data:e})}function n(e){return Object(s["a"])({url:"del_custom_fields",method:"post",data:e})}var m={metaInfo:{title:window.zjmf_cw_lang.custom_customer_fields},data:function(){return{type_list:{},customfields:[],form:{addfieldname:void 0,addfieldtype:"dropdown",addcustomfielddesc:void 0,addregexpr:void 0,addfieldoptions:void 0,addsortorder:void 0,addadminonly:0,addrequired:0,addshoworder:0,addshowinvoice:0},btnLoading:!1}},methods:{getData:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var l,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d();case 2:if(l=t.sent,a=l.data,200===a.status){t.next=6;break}return t.abrupt("return",!1);case 6:e.type_list=a.data.type_list,e.customfields=a.data.customfields;case 8:case"end":return t.stop()}}),t)})))()},editCustom:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var l,a,o,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.form.addfieldname){t.next=10;break}return e.btnLoading=!0,t.next=4,i(e.form);case 4:l=t.sent,a=l.data,200!==a.status?e.$message.error(a.msg):(e.$message({message:a.msg,type:"success"}),e.getData(),e.form={addfieldname:void 0,addfieldtype:"dropdown",addcustomfielddesc:void 0,addregexpr:void 0,addfieldoptions:void 0,addsortorder:void 0,addadminonly:0,addrequired:0,addshoworder:0,addshowinvoice:0}),e.btnLoading=!1,t.next=29;break;case 10:return e.form.customfieldname=[],e.form.customfieldtype=[],e.form.customfielddesc=[],e.form.customfieldregexpr=[],e.form.customfieldoptions=[],e.form.customsortorder=[],e.form.customadminonly=[],e.form.customrequired=[],e.form.customshoworder=[],e.form.customshowinvoice=[],(e.customfields||[]).forEach((function(t){e.form.customfieldname[t.id]=t.fieldname,e.form.customfieldtype[t.id]=t.fieldtype,e.form.customfielddesc[t.id]=t.description,e.form.customfieldregexpr[t.id]=t.regexpr,e.form.customfieldoptions[t.id]=t.fieldoptions,e.form.customsortorder[t.id]=t.sortorder,e.form.customadminonly[t.id]=t.adminonly,e.form.customrequired[t.id]=t.required,e.form.customshoworder[t.id]=t.showorder,e.form.customshowinvoice[t.id]=t.showinvoice})),o=e.$qs.stringify(e.form,{arrayFormat:"indices"}),e.btnLoading=!0,t.next=25,i(o);case 25:r=t.sent,s=r.data,200!==s.status?e.$message.error(s.msg):(e.$message({message:s.msg,type:"success"}),e.getData()),e.btnLoading=!1;case 29:case"end":return t.stop()}}),t)})))()},deleteCustom:function(e,t){var l=this;this.$confirm(this.$lang.will_delete_custom_field,this.$lang.hint,{confirmButtonText:this.$lang.confirm,cancelButtonText:this.$lang.cancel,type:"warning"}).then(Object(r["a"])(regeneratorRuntime.mark((function a(){var o,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,n({id:e,type:t});case 2:if(o=a.sent,r=o.data,200===r.status){a.next=6;break}return a.abrupt("return",!1);case 6:l.$message({type:"success",message:l.$lang.successfully_delete}),l.getData();case 8:case"end":return a.stop()}}),a)})))).catch((function(){}))}},created:function(){this.getData()}},c=m,f=(l("deda"),l("2877")),u=Object(f["a"])(c,a,o,!1,null,"3653e051",null);t["default"]=u.exports},deda:function(e,t,l){"use strict";var a=l("e200"),o=l.n(a);o.a},e200:function(e,t,l){}}]);