(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["DcimTraffic~31ecd969"],{"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},7823:function(e,t,a){},8418:function(e,t,a){"use strict";var r=a("c04e"),s=a("9bf2"),l=a("5c6c");e.exports=function(e,t,a){var i=r(t);i in e?s.f(e,i,l(0,a)):e[i]=a}},"841c":function(e,t,a){"use strict";var r=a("d784"),s=a("825a"),l=a("1d80"),i=a("129f"),n=a("14c3");r("search",1,(function(e,t,a){return[function(t){var a=l(this),r=void 0==t?void 0:t[e];return void 0!==r?r.call(t,a):new RegExp(t)[e](String(a))},function(e){var r=a(t,e,this);if(r.done)return r.value;var l=s(e),c=String(this),o=l.lastIndex;i(o,0)||(l.lastIndex=0);var u=n(l,c);return i(l.lastIndex,o)||(l.lastIndex=o),null===u?-1:u.index}]}))},"8e8d":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dcimTraffic"},[a("h5",{staticClass:"mt-0"},[e._v(e._s(e.$lang.data_package_hint))]),a("div",{staticClass:"dcimTraffic_title"},[a("div",[a("el-button",{attrs:{size:"small",type:"success",icon:"el-icon-plus"},on:{click:e.showDialog}},[e._v(e._s(e.$lang.add_data_package))]),a("el-input",{style:{width:"200px",marginLeft:"10px"},attrs:{size:"small",placeholder:e.$lang.search_by_name,clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("el-button",{attrs:{slot:"append",size:"small",icon:"el-icon-search"},on:{click:e.searchData},slot:"append"})],1)],1)]),a("div",{staticClass:"dcimTraffic_box"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""},on:{"sort-change":e.changeSort}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"70",sortable:"custom",align:"center"}}),a("el-table-column",{attrs:{prop:"name",label:e.$lang.data_package_name}}),a("el-table-column",{attrs:{prop:"capacity",label:e.$lang.flux_gb,sortable:"custom",width:"130"}}),a("el-table-column",{attrs:{prop:"price",label:e.$lang.price,sortable:"custom"}}),a("el-table-column",{attrs:{prop:"status",label:e.$lang.start_using,width:"90",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":0},on:{change:function(t){return e.changeSataus(t,r.id)}},model:{value:r.status,callback:function(t){e.$set(r,"status",t)},expression:"row.status"}})]}}])}),a("el-table-column",{attrs:{prop:"sale_times",label:e.$lang.sold_stocked},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.sale_times+"/"+(a.stock?a.stock:e.$lang.unlimited))+" ")]}}])}),a("el-table-column",{attrs:{prop:"create_time",label:e.$lang.create_time,width:"135",align:"center",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.create_time?e.$moment(1e3*a.create_time).format("YYYY-MM-DD HH:mm"):"-")+" ")]}}])}),a("el-table-column",{attrs:{label:e.$lang.management,width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-button",{staticClass:"span-primary",attrs:{size:"small",type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.showEditDialog(r.id)}}},[e._v(e._s(e.$lang.edit))]),a("el-button",{staticClass:"span-danger",attrs:{size:"small",type:"text",icon:"el-icon-delete"},on:{click:function(t){return e.deleteTraffic(r.id)}}},[e._v(e._s(e.$lang.delete))])]}}])})],1)],1),a("el-pagination",{attrs:{"current-page":e.page,"page-sizes":[10,15,20,25,50,100],"page-size":e.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("el-dialog",{attrs:{title:e.$lang.add_data_package,visible:e.addDialogVisible,width:"50%"},on:{"update:visible":function(t){e.addDialogVisible=t},close:function(t){return e.onClose("addTrafficFormRef")}}},[a("el-row",{attrs:{gutter:15}},[a("el-form",{ref:"addTrafficFormRef",attrs:{model:e.addTrafficFormData,rules:e.addTrafficFormRules,"label-width":"auto"}},[a("el-col",{attrs:{span:23}},[a("el-row",{attrs:{gutter:15}},[a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:e.$lang.name_designation,prop:"name"}},[a("el-input",{attrs:{size:"small",placeholder:e.$lang.please_enter_name,clearable:""},model:{value:e.addTrafficFormData.name,callback:function(t){e.$set(e.addTrafficFormData,"name",t)},expression:"addTrafficFormData.name"}})],1)],1),a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:e.$lang.flow_packet_size,prop:"capacity"}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{size:"small",min:1,controls:!1},model:{value:e.addTrafficFormData.capacity,callback:function(t){e.$set(e.addTrafficFormData,"capacity",t)},expression:"addTrafficFormData.capacity"}})],1),a("el-col",{attrs:{span:12,offset:1}},[e._v(" G ")])],1)],1)],1),a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:e.$lang.price,prop:"price"}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{size:"small",min:.01,controls:!1,precision:2},model:{value:e.addTrafficFormData.price,callback:function(t){e.$set(e.addTrafficFormData,"price",t)},expression:"addTrafficFormData.price"}})],1),a("el-col",{attrs:{span:12,offset:1}})],1)],1)],1),a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:e.$lang.state,prop:"status"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-text":e.$lang.when_selected_enabled},model:{value:e.addTrafficFormData.status,callback:function(t){e.$set(e.addTrafficFormData,"status",t)},expression:"addTrafficFormData.status"}})],1)],1),a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:e.$lang.inventory,prop:"stock"}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{size:"small",min:0,controls:!1},model:{value:e.addTrafficFormData.stock,callback:function(t){e.$set(e.addTrafficFormData,"stock",t)},expression:"addTrafficFormData.stock"}})],1),a("el-col",{attrs:{span:12,offset:1}},[e._v(" "+e._s(e.$lang.zero_means_no_restriction)+" ")])],1)],1)],1),a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:e.$lang.bindable_products,prop:"allow_products"}},[a("el-select",{style:{width:"100%"},attrs:{size:"small",filterable:"","collapse-tags":"",multiple:"",placeholder:e.$lang.please_select_bindable_products},model:{value:e.addTrafficFormData.allow_products,callback:function(t){e.$set(e.addTrafficFormData,"allow_products",t)},expression:"addTrafficFormData.allow_products"}},e._l(e.options,(function(t){return a("el-option-group",{key:t.id,attrs:{label:t.name}},e._l(t.product,(function(e,t){return a("el-option",{key:e.id+"assd"+t,attrs:{label:e.name,value:e.id}})})),1)})),1)],1)],1)],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.addCancel}},[e._v(e._s(e.$lang.cancel_changes))]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addTraffic}},[e._v(e._s(e.$lang.save_the_changes))])],1)],1),a("el-dialog",{attrs:{title:e.$lang.edit_data_package,visible:e.editDialogVisible,width:"50%"},on:{"update:visible":function(t){e.editDialogVisible=t},close:e.onCloseEdit}},[a("el-row",{attrs:{gutter:15}},[a("el-form",{ref:"editTrafficFormRef",attrs:{model:e.editTrafficFormData,rules:e.addTrafficFormRules,"label-width":"auto"}},[a("el-col",{attrs:{span:23}},[a("el-row",{attrs:{gutter:15}},[a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:e.$lang.name_designation,prop:"name"}},[a("el-input",{attrs:{size:"small",placeholder:e.$lang.please_enter_name,clearable:""},model:{value:e.editTrafficFormData.name,callback:function(t){e.$set(e.editTrafficFormData,"name",t)},expression:"editTrafficFormData.name"}})],1)],1),a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:e.$lang.flow_packet_size,prop:"capacity"}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{size:"small",min:1,controls:!1},model:{value:e.editTrafficFormData.capacity,callback:function(t){e.$set(e.editTrafficFormData,"capacity",t)},expression:"editTrafficFormData.capacity"}})],1),a("el-col",{attrs:{span:12,offset:1}},[e._v(" G ")])],1)],1)],1),a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:e.$lang.price,prop:"price"}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{size:"small",min:.01,controls:!1,precision:2},model:{value:e.editTrafficFormData.price,callback:function(t){e.$set(e.editTrafficFormData,"price",t)},expression:"editTrafficFormData.price"}})],1),a("el-col",{attrs:{span:12,offset:1}})],1)],1)],1),a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:e.$lang.state,prop:"status"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-text":e.$lang.when_selected_enabled},model:{value:e.editTrafficFormData.status,callback:function(t){e.$set(e.editTrafficFormData,"status",t)},expression:"editTrafficFormData.status"}})],1)],1),a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:e.$lang.inventory,prop:"stock"}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{size:"small",min:0,controls:!1},model:{value:e.editTrafficFormData.stock,callback:function(t){e.$set(e.editTrafficFormData,"stock",t)},expression:"editTrafficFormData.stock"}})],1),a("el-col",{attrs:{span:12,offset:1}},[e._v(" "+e._s(e.$lang.zero_means_no_restriction)+" ")])],1)],1)],1),a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:e.$lang.bindable_products,prop:"allow_products"}},[a("el-select",{style:{width:"100%"},attrs:{size:"small",filterable:"","collapse-tags":"",multiple:"",placeholder:e.$lang.please_select_bindable_products,clearable:""},model:{value:e.editTrafficFormData.allow_products,callback:function(t){e.$set(e.editTrafficFormData,"allow_products",t)},expression:"editTrafficFormData.allow_products"}},e._l(e.editOptions,(function(t){return a("el-option-group",{key:t.id,attrs:{label:t.name}},e._l(t.product,(function(e,t){return a("el-option",{key:e.id+"a2sd"+t,attrs:{label:e.name,value:e.id}})})),1)})),1)],1)],1)],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.editCancel}},[e._v(e._s(e.$lang.cancel_changes))]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.editTraffic}},[e._v(e._s(e.$lang.save_the_changes))])],1)],1)],1)},s=[],l=(a("4160"),a("a434"),a("b0c0"),a("a9e3"),a("ac1f"),a("841c"),a("1276"),a("159b"),a("96cf"),a("1da1")),i=a("a27e");function n(e,t,a,r,s){return Object(i["a"])({url:"dcim/flowpacket",params:{page:e,limit:t,orderby:a,sort:r,search:s}})}function c(){return Object(i["a"])({url:"dcim/flowpacket_page"})}function o(e){return Object(i["a"])({url:"dcim/flowpacket",method:"post",data:e})}function u(e){return Object(i["a"])({url:"dcim/flowpacket_page/".concat(e)})}function d(e){return Object(i["a"])({url:"dcim/flowpacket",method:"put",data:e})}function f(e){return Object(i["a"])({url:"dcim/flowpacket",method:"delete",data:{id:e}})}var p={metaInfo:{title:window.zjmf_cw_lang.flow_package_management},data:function(){return{tableData:[],page:1,limit:Number(localStorage.getItem("limit"))||50,total:0,orderby:"id",sort:"desc",search:"",addDialogVisible:!1,addTrafficFormData:{name:null,capacity:null,price:null,status:null,stock:null,allow_products:[]},addTrafficFormRules:{name:[{required:!0,message:this.$lang.please_enter_name,trigger:"blur"}],capacity:[{required:!0,message:this.$lang.please_enter_flow_packet_size,trigger:"blur"}],price:[{required:!0,message:this.$lang.please_enter_price,trigger:"blur"}]},options:[],editDialogVisible:!1,editTrafficFormData:{id:null,name:"",capacity:null,price:null,status:null,stock:null,allow_products:[]},editOptions:[]}},methods:{getData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$urlUpdate({search:e.search},location.href,e.$route.query),t.next=3,n(e.page,e.limit,e.orderby,e.sort,e.search);case 3:if(a=t.sent,r=a.data,200===r.status){t.next=7;break}return t.abrupt("return",!1);case 7:e.tableData=r.data.list,e.total=r.data.sum,e.orderby=r.data.orderby;case 10:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){this.limit=e,this.getData()},handleCurrentChange:function(e){this.page=e,this.getData()},changeSort:function(e){"descending"===e.order?(this.orderby=e.prop,this.sort="desc"):(this.orderby=e.prop,this.sort="asc"),this.getData()},searchData:function(){this.getData()},changeSataus:function(e,t){var a=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var s,l,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s={id:t,status:e},r.next=3,d(s);case 3:if(l=r.sent,i=l.data,200===i.status){r.next=8;break}return a.$message({message:i.msg,type:"error"}),r.abrupt("return",!1);case 8:a.$message({message:i.msg,type:"success"}),a.getData();case 10:case"end":return r.stop()}}),r)})))()},showDialog:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c();case 2:if(a=t.sent,r=a.data,200===r.status){t.next=6;break}return t.abrupt("return",!1);case 6:e.options=r.data.products,e.addDialogVisible=!0;case 8:case"end":return t.stop()}}),t)})))()},addCancel:function(){this.$refs["addTrafficFormRef"].clearValidate(),this.addDialogVisible=!1},onClose:function(){this.$refs["addTrafficFormRef"].clearValidate()},addTraffic:function(){var e=this;this.$refs.addTrafficFormRef.validate(function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(a){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=13;break}return t.next=3,o(e.addTrafficFormData);case 3:if(r=t.sent,s=r.data,200===s.status){t.next=8;break}return e.$message({message:s.msg,type:"error"}),t.abrupt("return",!1);case 8:e.addDialogVisible=!1,e.$message({message:s.msg,type:"success"}),e.getData(),t.next=14;break;case 13:return t.abrupt("return",!1);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},deleteTraffic:function(e){var t=this;this.$confirm(this.$lang.delete_data_package_hint,this.$lang.hint,{confirmButtonText:this.$lang.confirm,cancelButtonText:this.$lang.cancel,type:"warning"}).then(Object(l["a"])(regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,f(e);case 2:if(r=a.sent,s=r.data,200===s.status){a.next=7;break}return t.$message({type:"error",message:s.msg}),a.abrupt("return",!1);case 7:t.$message({type:"success",message:t.$lang.successfully_delete}),t.getData();case 9:case"end":return a.stop()}}),a)})))).catch((function(){t.$message({type:"info",message:t.$lang.cancel_operation})}))},showEditDialog:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,u(e);case 2:if(r=a.sent,s=r.data,200===s.status){a.next=7;break}return t.$message({message:s.msg,type:"error"}),a.abrupt("return",!1);case 7:t.editTrafficFormData.id=s.flowpacket.id,t.editTrafficFormData.name=s.flowpacket.name,t.editTrafficFormData.capacity=s.flowpacket.capacity,t.editTrafficFormData.price=s.flowpacket.price,t.editTrafficFormData.status=s.flowpacket.status,t.editTrafficFormData.stock=s.flowpacket.stock,(s.flowpacket.allow_products||[]).forEach((function(e,t){0===e&&s.flowpacket.allow_products.splice(t,1)})),t.editTrafficFormData.allow_products=s.flowpacket.allow_products,t.editOptions=s.products,t.editDialogVisible=!0;case 17:case"end":return a.stop()}}),a)})))()},editCancel:function(){this.$refs.editTrafficFormRef.resetFields(),this.editDialogVisible=!1},onCloseEdit:function(){this.$refs["editTrafficFormRef"].clearValidate()},editTraffic:function(){var e=this;this.$refs.editTrafficFormRef.validate(function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(a){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=13;break}return t.next=3,d(e.editTrafficFormData);case 3:if(r=t.sent,s=r.data,200===s.status){t.next=8;break}return e.$message({type:"error",message:s.msg}),t.abrupt("return",!1);case 8:e.$message({type:"success",message:s.msg}),e.editDialogVisible=!1,e.getData(),t.next=14;break;case 13:return t.abrupt("return",!1);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},created:function(){var e=location.href.split("searchObj")[1]?this.$arrangeUrl(encodeURI(location.href.split("searchObj")[1])):void 0;e&&(this.search=JSON.parse(e)["search"]),this.getData()},watch:{search:function(e){""===e&&this.getData()}}},m=p,g=(a("9365"),a("2877")),b=Object(g["a"])(m,r,s,!1,null,"0298b91a",null);t["default"]=b.exports},9365:function(e,t,a){"use strict";var r=a("7823"),s=a.n(r);s.a},a434:function(e,t,a){"use strict";var r=a("23e7"),s=a("23cb"),l=a("a691"),i=a("50c4"),n=a("7b0b"),c=a("65f0"),o=a("8418"),u=a("1dde"),d=a("ae40"),f=u("splice"),p=d("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,g=Math.min,b=9007199254740991,h="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!f||!p},{splice:function(e,t){var a,r,u,d,f,p,_=n(this),w=i(_.length),v=s(e,w),k=arguments.length;if(0===k?a=r=0:1===k?(a=0,r=w-v):(a=k-2,r=g(m(l(t),0),w-v)),w+a-r>b)throw TypeError(h);for(u=c(_,r),d=0;d<r;d++)f=v+d,f in _&&o(u,d,_[f]);if(u.length=r,a<r){for(d=v;d<w-r;d++)f=d+r,p=d+a,f in _?_[p]=_[f]:delete _[p];for(d=w;d>w-r+a;d--)delete _[d-1]}else if(a>r)for(d=w-r;d>v;d--)f=d+r-1,p=d+a-1,f in _?_[p]=_[f]:delete _[p];for(d=0;d<a;d++)_[d+v]=arguments[d+2];return _.length=w-r+a,u}})}}]);