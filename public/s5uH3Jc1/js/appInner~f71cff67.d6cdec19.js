(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["appInner~f71cff67"],{"1cc9":function(t,e,a){},"69c2":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("div",{staticClass:"app_info_box clearfix",attrs:{id:"Top"}},[a("div",{staticClass:"info_box_left fl mr-30"},[a("div",{staticClass:"box_left_appinfo mb-20",class:{"pt-100":t.pageLoading}},[t.pageLoading?a("Loading"):t._e(),t.pageLoading?t._e():a("div",{staticClass:"left_appinfo_top mb-40 clearfix"},[a("div",{staticClass:"appinfo_top_img fl mr-40"},[a("el-image",{staticClass:"w-100 h-100 flexc",attrs:{src:t.appDetail.product.icon[0],fit:"contain"}},[a("div",{staticClass:"fz-12 color-999",staticStyle:{color:"#999"},attrs:{slot:"placeholder"},slot:"placeholder"},[t._v("加载中...")]),a("div",{staticClass:"fz-12 color-999",staticStyle:{color:"#999"},attrs:{slot:"error"},slot:"error"},[t._v("加载中...")])])],1),t.appDetail.product.app_type?a("div",{staticClass:"appinfo_top_base fl"},[a("div",[a("div",{staticClass:"top_base_title mb-30"},[t._v(t._s(t.appDetail.product.name))]),a("div",{staticClass:"mb-20 color-999 fz-12 cursor-pointer",class:{top_base_collect:t.appDetail.product.in_favorite},on:{click:t.toggleFavorite}},[a("span",{staticClass:"iconfont icon-aixin",staticStyle:{"font-size":"12px"}}),a("span",{staticClass:"fz-12"},[t._v("+收藏")])]),a("div",{staticClass:"top_base_author mb-30 fz-12"},[t._v(t._s(t.appDetail.developer.name)+" "+t._s(t._f("appTypeFilter")(t.appDetail.product.app_type)))]),0===t.appDetail.product.status?a("div",{staticClass:"top_base_price"},["onetime"===t.appDetail.product.pay_type?a("span",{staticClass:"base_price_num mr-10"},[t._v(t._s(t.appDetail.currency.prefix)+" "+t._s(t.appDetail.product.pricing.onetime))]):t._e(),"recurring"===t.appDetail.product.pay_type?a("span",{staticClass:"base_price_num mr-10"},[t._v(" "+t._s(t.appDetail.currency.prefix)+" "),t.appDetail.product.pricing.annually?a("span",[t._v(t._s(t.appDetail.product.pricing.annually))]):a("span",[t._v(t._s(t.appDetail.product.pricing.monthly))])]):t._e(),a("span",{staticClass:"base_price_cycle fz-12 color-999"},["free"===t.appDetail.product.pay_type?a("span",[t._v(t._s(t.appDetail.product.pay_type_zh))]):t._e(),"onetime"===t.appDetail.product.pay_type?a("span",[t._v(t._s(t.appDetail.product.pay_type_zh))]):t._e(),"recurring"===t.appDetail.product.pay_type?a("span",[t._v(t._s(t.appDetail.product.pricing.annually?"年付":"月付"))]):t._e()])]):t._e()])]):t._e(),a("div",{staticClass:"appinfo_top_buynow fr"},[a("div",{staticClass:"appinfo_top_rate"},[a("el-rate",{attrs:{colors:["#ffa000","#ffa000","#ffa000"],"void-color":"#e6e8f0","disabled-void-color":"#e6e8f0","void-icon-class":"el-icon-star-on",disabled:""},model:{value:t.appDetail.product.app_score,callback:function(e){t.$set(t.appDetail.product,"app_score",e)},expression:"appDetail.product.app_score"}}),a("span",{staticClass:"fz-12 color-999"},[t._v(t._s(t.appDetail.product.evaluation.length)+"个评分")])],1),a("div",{staticClass:"appinfo_top_btn"},[0===t.appDetail.product.status?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.goBuy}},[t._v("立即购买 ")]):t._e(),1===t.appDetail.product.status?a("el-button",{attrs:{size:"small",type:"success",loading:t.installLoading},on:{click:t.installApp}},[t._v("立即安装 ")]):t._e(),2===t.appDetail.product.status||3===t.appDetail.product.status?a("el-button",{attrs:{size:"small",type:"default",loading:t.uniLoading},on:{click:t.uniApp}},[t._v("卸载")]):t._e(),3===t.appDetail.product.status?a("el-button",{attrs:{size:"small",type:"danger",loading:t.updateLoading},on:{click:t.update}},[t._v("更新 ")]):t._e()],1)])]),t.pageLoading?t._e():a("div",{staticClass:"left_appinfo_bottom"},[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"详情",name:"detail"}},[a("div",{staticClass:"appinfo_bottom_detail"},[t.appDetail.product.app_images.length?a("div",{staticClass:"bottom_detail_carousel mt-10 mb-10"},[a("el-carousel",{attrs:{interval:4e4,type:"card",height:t.clientWidth>768?"200px":"120px","indicator-position":"none"}},t._l(t.appDetail.product.app_images,(function(e,s){return a("el-carousel-item",{key:s+"appimages"},[a("el-image",{staticClass:"w-100 h-100",attrs:{src:e,fit:"contain"}},[a("div",{staticClass:"fz-12 color-999",staticStyle:{color:"#999"},attrs:{slot:"placeholder"},slot:"placeholder"},[t._v("加载中...")]),a("div",{staticClass:"fz-12 color-999",staticStyle:{color:"#999"},attrs:{slot:"error"},slot:"error"},[t._v("加载中...")])])],1)})),1)],1):t._e(),a("div",{staticClass:"bottom_detail_desc"},[a("div",{staticClass:"fz-12 color-333",class:{detail_desc_textall:t.showMoreDetail,detail_desc_text:!t.showMoreDetail}},[a("pre",{domProps:{innerHTML:t._s(t.appDetail.product.description)}})]),t.appDetail.product.description?a("div",{staticClass:"detail_desc_more"},[a("span",{staticClass:"cursor-pointer",on:{click:function(e){t.showMoreDetail=!t.showMoreDetail}}},[t._v(t._s(t.showMoreDetail?"收起":"阅读更多内容"))])]):t._e()])])]),a("el-tab-pane",{attrs:{label:"使用说明",name:"instruction"}},[a("pre",{domProps:{innerHTML:t._s(t.appDetail.product.instruction)}})]),a("el-tab-pane",{attrs:{label:"版本说明",name:"version_description"}},[a("pre",{domProps:{innerHTML:t._s(t.appDetail.product.version_description)}})]),a("el-tab-pane",{attrs:{label:"评价",name:"comment"}},[a("div",{staticClass:"appinfo_bottom_comment"},[a("el-select",{staticClass:"mr-10",staticStyle:{width:"100px"},attrs:{size:"mini"},on:{change:t.getCommentList},model:{value:t.search.orderby,callback:function(e){t.$set(t.search,"orderby",e)},expression:"search.orderby"}},[a("el-option",{attrs:{value:"score",label:"评分"}}),a("el-option",{attrs:{value:"create_time",label:"最新"}})],1),a("el-select",{staticStyle:{width:"100px"},attrs:{size:"mini"},on:{change:t.getCommentList},model:{value:t.search.score,callback:function(e){t.$set(t.search,"score",e)},expression:"search.score"}},[a("el-option",{attrs:{value:"",label:"所有评分"}}),a("el-option",{attrs:{value:"5",label:"5星"}}),a("el-option",{attrs:{value:"4",label:"4星"}}),a("el-option",{attrs:{value:"3",label:"3星"}}),a("el-option",{attrs:{value:"2",label:"2星"}}),a("el-option",{attrs:{value:"1",label:"1星"}})],1)],1),a("div",{staticClass:"mt-20 mb-20 fz-16"},[t._v("用户评论")]),a("div",{staticClass:"comment_all_list mt-10"},t._l(t.tabCommentList,(function(e,s){return a("div",{key:s+"comment",staticClass:"all_list_item mb-10"},[a("div",{staticClass:"list_item_title mb-20 flex-between"},[a("div",{staticClass:"item_title_userbox clearfix"},[a("div",{staticClass:"title_userbox_img fl mr-20 flexc",style:{background:e.avatarColor}},[t._v(" "+t._s(e.username.charAt(0).toUpperCase()))]),a("div",{staticClass:"title_userbox_user fl"},[a("div",{staticClass:"userbox_user_name fz-14"},[t._v(t._s(e.username))]),a("div",{staticClass:"userbox_user_rate"},[a("el-rate",{attrs:{colors:["#ffa000","#ffa000","#ffa000"],"void-color":"#e6e8f0","disabled-void-color":"#e6e8f0","void-icon-class":"el-icon-star-on",disabled:""},model:{value:e.score,callback:function(a){t.$set(e,"score",a)},expression:"commentItem.score"}})],1)])]),a("div",{staticClass:"item_title_opt"},[a("span",{staticClass:"iconfont icon-dianzan cursor-pointer",class:{is_like:e.is_like},on:{click:function(a){return t.commentLikeToggle(e,"tab")}}})])]),a("div",{staticClass:"list_item_content mb-20 fz-12 lh-18"},[t._v(t._s(e.content))]),e.reply.length?a("div",{staticClass:"list_item_reply",class:{list_item_replyOpen:"1"===e.showMoreReply}},[a("el-collapse",{attrs:{accordion:""},model:{value:e.showMoreReply,callback:function(a){t.$set(e,"showMoreReply",a)},expression:"commentItem.showMoreReply"}},[a("el-collapse-item",{attrs:{title:"",name:"1"}},["1"!==e.showMoreReply?a("div",{attrs:{slot:"title"},slot:"title"},[t._v(" "+t._s(e.reply.length)+"条回复>>")]):t._e(),t._l(e.reply,(function(e,s){return a("div",{key:s+"replyIndex",staticClass:"item_reply_item"},[a("div",{staticClass:"reply_item_title flex-between"},[a("div",{staticClass:"item_title_userbox clearfix"},[a("div",{staticClass:"title_userbox_img fl mr-20 flexc",style:{background:e.avatarColor}},[t._v(" "+t._s(e.username.charAt(0).toUpperCase()))]),a("div",{staticClass:"title_userbox_user fl flexc-v"},[a("div",{staticClass:"userbox_user_name mr-10"},[t._v(t._s(e.username))]),a("div",{staticClass:"userbox_user_time"},[t._v(" "+t._s(t.$moment(1e3*e.create_time).format("YYYY-MM-DD HH:mm")))])])]),a("div",{staticClass:"item_title_opt"})]),a("div",{staticClass:"reply_item_content mt-10 mb-10"},[t._v(t._s(e.content))])])})),"1"===e.showMoreReply?a("div",{staticClass:"cursor-pointer",staticStyle:{color:"#2f54ea"},on:{click:function(t){e.showMoreReply="-1"}}},[t._v("收起<<")]):t._e()],2)],1)],1):t._e()])})),0)])],1)],1)],1),a("div",{staticClass:"box_left_comment mb-20"},[a("div",{staticClass:"left_comment_mine"},[a("div",{staticClass:"comment_mine_title flex-between mb-20"},[a("div",[t._v("我的评论及评分")]),a("div",{staticClass:"flexc-v"},[0!==t.appDetail.product.status?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.commentDialogVis=!0}}},[t._v(t._s(t.appDetail.product.my_evaluation.username?"追加评论":"发布评论")+" ")]):t._e()],1)]),t.appDetail.product.my_evaluation.username?a("div",{staticClass:"comment_all_list mt-10"},[a("div",{staticClass:"all_list_item mb-10"},[a("div",{staticClass:"list_item_title mb-20 flex-between"},[a("div",{staticClass:"item_title_userbox clearfix"},[a("div",{staticClass:"title_userbox_img fl mr-20 flexc",style:{background:t.appDetail.product.my_evaluation.avatarColor}},[t._v(" "+t._s(t.appDetail.product.my_evaluation.username.charAt(0).toUpperCase()))]),a("div",{staticClass:"title_userbox_user fl"},[a("div",{staticClass:"userbox_user_name fz-14"},[t._v(t._s(t.appDetail.product.my_evaluation.username))]),a("div",{staticClass:"userbox_user_rate"},[a("el-rate",{attrs:{colors:["#ffa000","#ffa000","#ffa000"],"void-color":"#e6e8f0","disabled-void-color":"#e6e8f0","void-icon-class":"el-icon-star-on",disabled:""},model:{value:t.appDetail.product.my_evaluation.score,callback:function(e){t.$set(t.appDetail.product.my_evaluation,"score",e)},expression:"appDetail.product.my_evaluation.score"}})],1)])]),a("div",{staticClass:"item_title_opt"},[a("span",{staticClass:"iconfont icon-dianzan cursor-pointer",class:{is_like:t.appDetail.product.my_evaluation.is_like},on:{click:function(e){return t.commentLikeToggle(t.appDetail.product.my_evaluation)}}}),a("span",{staticClass:"iconfont icon-shanchu cursor-pointer ml-10",on:{click:t.deleteMyComment}})])]),a("div",{staticClass:"list_item_content mb-20 fz-12 lh-18"},[t._v(t._s(t.appDetail.product.my_evaluation.content))]),t.appDetail.product.my_evaluation.reply.length?a("div",{staticClass:"list_item_reply",class:{list_item_replyOpen:"1"===t.appDetail.product.my_evaluation.showMoreReply}},[a("el-collapse",{attrs:{accordion:""},model:{value:t.appDetail.product.my_evaluation.showMoreReply,callback:function(e){t.$set(t.appDetail.product.my_evaluation,"showMoreReply",e)},expression:"appDetail.product.my_evaluation.showMoreReply"}},[a("el-collapse-item",{attrs:{title:"",name:"1"}},["1"!==t.appDetail.product.my_evaluation.showMoreReply?a("div",{attrs:{slot:"title"},slot:"title"},[t._v(" "+t._s(t.appDetail.product.my_evaluation.reply.length)+"条回复>>")]):t._e(),t._l(t.appDetail.product.my_evaluation.reply,(function(e,s){return a("div",{key:s+"replyIndex",staticClass:"item_reply_item"},[a("div",{staticClass:"reply_item_title flex-between"},[a("div",{staticClass:"item_title_userbox clearfix"},[a("div",{staticClass:"title_userbox_img fl mr-20 flexc",style:{background:e.avatarColor}},[t._v(" "+t._s(e.username.charAt(0).toUpperCase()))]),a("div",{staticClass:"title_userbox_user fl flexc-v"},[a("div",{staticClass:"userbox_user_name mr-10"},[t._v(t._s(e.username))]),a("div",{staticClass:"userbox_user_time"},[t._v(" "+t._s(t.$moment(1e3*e.create_time).format("YYYY-MM-DD HH:mm")))])])]),a("div",{staticClass:"item_title_opt"})]),a("div",{staticClass:"reply_item_content mt-10 mb-10"},[t._v(t._s(e.content))])])})),"1"===t.appDetail.product.my_evaluation.showMoreReply?a("div",{staticClass:"cursor-pointer",staticStyle:{color:"#2f54ea"},on:{click:function(e){t.appDetail.product.my_evaluation.showMoreReply="-1"}}},[t._v("收起<< ")]):t._e()],2)],1)],1):t._e()])]):t._e()]),a("el-divider"),a("div",{staticClass:"left_comment_all"},[a("div",{staticClass:"comment_all_statistics clearfix"},[a("div",{staticClass:"all_statistics_text fl flex-every-v"},[a("div",{staticClass:"statistics_text_title fz-16 color-333"},[t._v("评论及评分")]),a("div",{staticClass:"statistics_text_ratenum fz-24 font-bold"},[t._v(t._s(t.appDetail.product.app_score))]),a("div",{staticClass:"statistics_text_rate"},[a("el-rate",{attrs:{colors:["#ffa000","#ffa000","#ffa000"],"void-color":"#e6e8f0","disabled-void-color":"#e6e8f0","void-icon-class":"el-icon-star-on",disabled:""},model:{value:t.appDetail.product.app_score,callback:function(e){t.$set(t.appDetail.product,"app_score",e)},expression:"appDetail.product.app_score"}})],1),a("div",{staticClass:"statistics_text_totalcommit fz-12 color-999"},[t._v("共"+t._s(t.appDetail.product.evaluation_count)+"条评论 ")])]),t.appDetail.product.evaluation_count?a("div",{staticClass:"all_statistics_chart fl ml-50"},[t.appDetail.product.scores.five?a("div",{staticClass:"statistics_chart_item"},[a("div",{staticClass:"mr-10 fz-12 color-999"},[t._v("5")]),a("el-progress",{staticClass:"progress-clear",attrs:{percentage:t.appDetail.product.scores.five/t.appDetail.product.evaluation_count*100,color:"#ffa000","show-text":!1}})],1):t._e(),t.appDetail.product.scores.four?a("div",{staticClass:"statistics_chart_item"},[a("div",{staticClass:"mr-10 fz-12 color-999"},[t._v("4")]),a("el-progress",{staticClass:"progress-clear",attrs:{percentage:t.appDetail.product.scores.four/t.appDetail.product.evaluation_count*100,color:"#009944","show-text":!1}})],1):t._e(),t.appDetail.product.scores.three?a("div",{staticClass:"statistics_chart_item"},[a("div",{staticClass:"mr-10 fz-12 color-999"},[t._v("3")]),a("el-progress",{staticClass:"progress-clear",attrs:{percentage:t.appDetail.product.scores.three/t.appDetail.product.evaluation_count*100,color:"#2f54ea","show-text":!1}})],1):t._e(),t.appDetail.product.scores.two?a("div",{staticClass:"statistics_chart_item"},[a("div",{staticClass:"mr-10 fz-12 color-999"},[t._v("2")]),a("el-progress",{staticClass:"progress-clear",attrs:{percentage:t.appDetail.product.scores.two/t.appDetail.product.evaluation_count*100,color:"#e64a19","show-text":!1}})],1):t._e(),t.appDetail.product.scores.one?a("div",{staticClass:"statistics_chart_item"},[a("div",{staticClass:"mr-10 fz-12 color-999"},[t._v("1")]),a("el-progress",{staticClass:"progress-clear",attrs:{percentage:t.appDetail.product.scores.one/t.appDetail.product.evaluation_count*100,color:"#333333","show-text":!1}})],1):t._e()]):t._e()]),a("div",{staticClass:"comment_all_list mt-10"},t._l(t.appDetail.product.evaluation,(function(e,s){return a("div",{key:s+"comment",staticClass:"all_list_item mb-10"},[a("div",{staticClass:"list_item_title mb-20 flex-between"},[a("div",{staticClass:"item_title_userbox clearfix"},[a("div",{staticClass:"title_userbox_img fl mr-20 flexc",style:{background:e.avatarColor}},[t._v(" "+t._s(e.username.charAt(0).toUpperCase()))]),a("div",{staticClass:"title_userbox_user fl"},[a("div",{staticClass:"userbox_user_name fz-14"},[t._v(t._s(e.username))]),a("div",{staticClass:"userbox_user_rate"},[a("el-rate",{attrs:{colors:["#ffa000","#ffa000","#ffa000"],"void-color":"#e6e8f0","disabled-void-color":"#e6e8f0","void-icon-class":"el-icon-star-on",disabled:""},model:{value:e.score,callback:function(a){t.$set(e,"score",a)},expression:"commentItem.score"}})],1)])]),a("div",{staticClass:"item_title_opt"},[a("span",{staticClass:"iconfont icon-dianzan cursor-pointer",class:{is_like:e.is_like},on:{click:function(a){return t.commentLikeToggle(e)}}}),a("span",{staticClass:"el-icon-edit cursor-pointer ml-10 mr-10",on:{click:function(a){return t.replyComment(e)}}})])]),a("div",{staticClass:"list_item_content mb-20 fz-12 lh-18"},[t._v(t._s(e.content))]),e.reply.length?a("div",{staticClass:"list_item_reply",class:{list_item_replyOpen:"1"===e.showMoreReply}},[a("el-collapse",{attrs:{accordion:""},model:{value:e.showMoreReply,callback:function(a){t.$set(e,"showMoreReply",a)},expression:"commentItem.showMoreReply"}},[a("el-collapse-item",{attrs:{title:"",name:"1"}},["1"!==e.showMoreReply?a("div",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.reply.length)+"条回复>> ")]):t._e(),t._l(e.reply,(function(e,s){return a("div",{key:s+"replyIndex",staticClass:"item_reply_item"},[a("div",{staticClass:"reply_item_title flex-between"},[a("div",{staticClass:"item_title_userbox clearfix"},[a("div",{staticClass:"title_userbox_img fl mr-20 flexc",style:{background:e.avatarColor}},[t._v(" "+t._s(e.username.charAt(0).toUpperCase()))]),a("div",{staticClass:"title_userbox_user fl flexc-v"},[a("div",{staticClass:"userbox_user_name mr-10"},[t._v(t._s(e.username))]),a("div",{staticClass:"userbox_user_time"},[t._v(" "+t._s(t.$moment(1e3*e.create_time).format("YYYY-MM-DD HH:mm")))])])]),a("div",{staticClass:"item_title_opt"})]),a("div",{staticClass:"reply_item_content mt-10 mb-10"},[t._v(t._s(e.content))])])})),"1"===e.showMoreReply?a("div",{staticClass:"cursor-pointer",staticStyle:{color:"#2f54ea"},on:{click:function(t){e.showMoreReply="-1"}}},[t._v("收起<<")]):t._e()],2)],1)],1):t._e()])})),0)]),a("div",{staticClass:"fz-12 cursor-pointer",staticStyle:{color:"#2f54ea"},on:{click:t.readMoreComment}},[t._v("阅读所有评论")])],1),a("div",{staticClass:"box_left_other"},[a("div",{staticClass:"left_other_title mb-30 fz-16 font-bold"},[t._v("其他信息")]),a("div",{staticClass:"left_other_content"},[a("div",{staticClass:"other_content_item mb-30"},[a("div",{staticClass:"content_item_label fz-12 color-999"},[t._v("更新日期")]),a("div",{staticClass:"content_item_value font-bold"},[t._v(" "+t._s(t.$moment(1e3*t.appDetail.product.update_time).format("YYYY-MM-DD HH:mm")))])]),a("div",{staticClass:"other_content_item mb-30"},[a("div",{staticClass:"content_item_label fz-12 color-999"},[t._v("大小")]),a("div",{staticClass:"content_item_value font-bold"},[t._v(t._s(t.appDetail.product.filesize))])]),a("div",{staticClass:"other_content_item mb-30"},[a("div",{staticClass:"content_item_label fz-12 color-999"},[t._v("购买次数")]),a("div",{staticClass:"content_item_value font-bold"},[t._v(t._s(t.appDetail.product.purchases))])]),a("div",{staticClass:"other_content_item mb-30"},[a("div",{staticClass:"content_item_label fz-12 color-999"},[t._v("当前版本")]),a("div",{staticClass:"content_item_value font-bold"},[t._v(t._s(t.appDetail.product.version))])]),a("div",{staticClass:"other_content_item mb-30"},[a("div",{staticClass:"content_item_label fz-12 color-999"},[t._v("开发者")]),a("div",{staticClass:"content_item_value font-bold"},[t._v(t._s(t.appDetail.developer.name))])])])])]),t.clientWidth>768?a("div",{staticClass:"info_box_right fl"},[a("div",{staticClass:"box_right_title flex-between"},[t.appDetail.other_app.length?a("span",{staticClass:"fz-14"},[t._v("相似应用")]):t._e(),t.appDetail.other_app.length>=6?a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:t.seeMore}},[t._v("查看更多 ")]):t._e()],1),a("div",{staticClass:"box_right_recommend"},t._l(t.appDetail.other_app,(function(e,s){return a("div",{key:s+"recom",staticClass:"right_recommend_item mb-20 cursor-pointer",on:{click:function(a){return t.toAnotherApp(e)}}},[a("div",{staticClass:"recommend_item_title clearfix"},[a("div",{staticClass:"item_title_img fl mr-20"},[a("el-image",{staticClass:"w-100 h-100",attrs:{src:e.icon[0],fit:"contain"}},[a("div",{staticClass:"fz-12 color-999",staticStyle:{color:"#999"},attrs:{slot:"placeholder"},slot:"placeholder"},[t._v("加载中...")]),a("div",{staticClass:"fz-12 color-999",staticStyle:{color:"#999"},attrs:{slot:"error"},slot:"error"},[t._v("加载中...")])])],1),a("div",{staticClass:"item_title_box fl"},[a("div",[a("div",{staticClass:"title_box_name mb-10"},[t._v(t._s(e.name))]),a("div",{staticClass:"title_box_rate"},[a("el-rate",{attrs:{colors:["#ffa000","#ffa000","#ffa000"],"void-color":"#e6e8f0","disabled-void-color":"#e6e8f0","void-icon-class":"el-icon-star-on",disabled:""},model:{value:e.app_score,callback:function(a){t.$set(e,"app_score",a)},expression:"item.app_score"}})],1)])])]),a("div",{staticClass:"recommend_item_desc fz-12 color-999"},[t._v(t._s(e.info))])])})),0)]):t._e()]),a("loginDia",{ref:"loginDia",attrs:{visible:t.loginVis,title:"使用智简魔方官网账号登录"},on:{"update:visible":function(e){t.loginVis=e},"login-success":t.loginCallBack,"user-name":t.getUserName}}),a("configDia",{ref:"configDia",attrs:{visible:t.configVis,title:"配置"},on:{"update:visible":function(e){t.configVis=e},"config-success":t.configCallBack}}),a("orderDia",{ref:"orderDia",attrs:{visible:t.orderVis,title:"支付订单"},on:{"update:visible":function(e){t.orderVis=e},"order-success":t.orderCallBack}}),a("payDia",{ref:"payDia",attrs:{visible:t.payVis,title:"结算"},on:{"update:visible":function(e){t.payVis=e},"pay-success":t.payCallBack}}),a("el-dialog",{attrs:{title:t.appDetail.product.my_evaluation.username?"追加评论":"发布评论",visible:t.commentDialogVis,width:"500px"},on:{"update:visible":function(e){t.commentDialogVis=e},close:t.commentDialogClose}},[a("el-form",{ref:"addComment",attrs:{model:t.addCommentFormData,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"评论",prop:"content",rules:[{required:!0,message:"评论内容不能为空",trigger:"blur"}]}},[a("el-input",{style:{width:"260px"},attrs:{type:"textarea",autosize:{minRows:5,maxRows:5},placeholder:"请输入"},model:{value:t.addCommentFormData.content,callback:function(e){t.$set(t.addCommentFormData,"content",e)},expression:"addCommentFormData.content"}})],1),t.appDetail.product.my_evaluation.username?t._e():a("el-form-item",{attrs:{label:"星级",prop:"content"}},[a("el-rate",{staticStyle:{"margin-top":"10px"},attrs:{colors:["#ffa000","#ffa000","#ffa000"],"void-color":"#e6e8f0","disabled-void-color":"#e6e8f0","void-icon-class":"el-icon-star-on"},model:{value:t.addCommentFormData.score,callback:function(e){t.$set(t.addCommentFormData,"score",e)},expression:"addCommentFormData.score"}})],1)],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.commentDialogVis=!1}}},[t._v("取 消")]),a("el-button",{attrs:{size:"small",type:"primary",loading:t.btnLoading},on:{click:t.addCommentSubmit}},[t._v("发布")])],1)],1),a("el-dialog",{attrs:{title:"回复评论",visible:t.replyDialogVis,width:"500px"},on:{"update:visible":function(e){t.replyDialogVis=e},close:t.replyDialogClose}},[a("el-form",{ref:"replyCommentRef",attrs:{model:t.addCommentFormData,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"评论",prop:"content",rules:[{required:!0,message:"评论内容不能为空",trigger:"blur"}]}},[a("el-input",{style:{width:"260px"},attrs:{type:"textarea",autosize:{minRows:5,maxRows:5},placeholder:"请输入"},model:{value:t.addCommentFormData.content,callback:function(e){t.$set(t.addCommentFormData,"content",e)},expression:"addCommentFormData.content"}})],1)],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.replyDialogVis=!1}}},[t._v("取 消")]),a("el-button",{attrs:{size:"small",type:"primary",loading:t.btnLoading},on:{click:t.replySubmit}},[t._v("回复")])],1)],1)],1)},i=[],o=(a("4160"),a("a9e3"),a("ac1f"),a("841c"),a("159b"),a("96cf"),a("1da1")),r=a("7ce2"),l=a.n(r),n=a("a27e");function c(t){return Object(n["a"])({url:"app_store/app/".concat(t)})}function p(t){return Object(n["a"])({url:"app_store/favorite/app/".concat(t),method:"post"})}function m(t){return Object(n["a"])({url:"app_store/favorite/app/".concat(t),method:"delete"})}function d(t,e){return Object(n["a"])({url:"app_store/app/".concat(t,"/evaluation"),params:e})}function u(t){return Object(n["a"])({url:"app_store/app/".concat(t.id,"/evaluation"),method:"post",data:t})}function _(t){return Object(n["a"])({url:"app_store/evaluation/".concat(t),method:"delete"})}function v(t){return Object(n["a"])({url:"app_store/evaluation/".concat(t.id,"/evaluate"),method:"post",data:t})}function f(t){return Object(n["a"])({url:"app_store/evaluation/".concat(t,"/like"),method:"post"})}function g(t){return Object(n["a"])({url:"app_store/evaluation/".concat(t,"/like"),method:"delete"})}var b=a("a3ab"),C=a("4360"),h=a("b8c7"),y=a("42f7"),D=a("43b4"),x=a("1169"),w=a("9146"),k=a("7ac2"),$={inject:["reload"],components:{loginDia:y["a"],configDia:D["a"],orderDia:x["a"],payDia:w["a"],Loading:k["a"]},filters:{appTypeFilter:function(t){switch(t){case"addons":return"插件";case"gateways":return"支付接口";case"servers":return"模块";case"systems":return"官方应用"}}},data:function(){return{updateLoading:!1,uniLoading:!1,installLoading:!1,appId:this.$route.query.id,loginVis:!1,configVis:!1,orderVis:!1,payVis:!1,loginInfo:{isLogin:!1,username:""},appDetail:{currency:{},developer:{},other_app:[],product:{app_images:[],evaluation:[],my_evaluation:{showMoreReply:"-1",reply:[]},icon:[],pricing:{annually:"",monthly:""},scores:{five:0,four:0,one:0,three:0,two:0}},product_type:{}},search:{page:1,limit:Number(localStorage.getItem("limit"))||50,orderby:"score",score:""},tabCommentList:[],activeName:"detail",showMoreDetail:!1,commentDialogVis:!1,addCommentFormData:{content:"",score:1},btnLoading:!1,replyDialogVis:!1,avatarColor:"",pageLoading:!1}},created:function(){this.getAppDetail()},mounted:function(){},methods:{getAppDetail:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.pageLoading=!0,e.next=3,c(t.appId);case 3:a=e.sent,s=a.data,t.pageLoading=!1,200!==s.status?t.$message.error(s.msg):((s.data.product.evaluation||[]).forEach((function(t){t.reply=t.reply||[],t.showMoreReply="-1",t.avatarColor=Object(h["a"])(t.username),(t.reply||[]).forEach((function(t){t.avatarColor=Object(h["a"])(t.username)}))})),Array.isArray(s.data.product.my_evaluation)?s.data.product.my_evaluation={showMoreReply:"-1",reply:[]}:(s.data.product.my_evaluation.showMoreReply="-1",s.data.product.my_evaluation.avatarColor=Object(h["a"])(s.data.product.my_evaluation.username),(s.data.product.my_evaluation.reply||[]).forEach((function(t){t.avatarColor=Object(h["a"])(t.username)}))),t.appDetail=s.data,t.loginInfo.isLogin=s.is_login,t.loginInfo.username=s.username,C["b"].setLogin(s.is_login),C["b"].setUserName(s.username));case 7:case"end":return e.stop()}}),e)})))()},toggleFavorite:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,s,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.appDetail.product.in_favorite){e.next=8;break}return e.next=3,m(t.appId);case 3:a=e.sent,s=a.data,200!==s.status?t.$message.error(s.msg):(t.getAppDetail(),t.$message.success(s.msg)),e.next=13;break;case 8:return e.next=10,p(t.appId);case 10:i=e.sent,o=i.data,200!==o.status?t.$message.error(o.msg):(t.getAppDetail(),t.$message.success(o.msg));case 13:case"end":return e.stop()}}),e)})))()},loginCallBack:function(t){t&&(C["b"].setLogin(!0),this.loginVis=!1,this.$refs.loginDia.formData.username="",this.$refs.loginDia.formData.password="",this.getAppDetail())},getUserName:function(t){C["b"].setUserName(t),this.avatarColor=Object(h["a"])(t)},configCallBack:function(t){var e=this;t&&(this.orderVis=!0,setTimeout((function(){e.configVis=!1,Object.assign(e.$refs.configDia,e.$refs.configDia.$options.data())}),200))},orderCallBack:function(t,e){var a=this;if(1===e)return this.orderVis=!1,this.getAppDetail(),void Object.assign(this.$refs.orderDia,this.$refs.orderDia.$options.data());t&&(this.payVis=!0,setTimeout((function(){a.orderVis=!1,Object.assign(a.$refs.orderDia,a.$refs.orderDia.$options.data())}),100))},payCallBack:function(t){t&&(this.$refs.payDia.close(),this.payVis=!1,Object.assign(this.$refs.payDia,this.$refs.payDia.$options.data()),this.getAppDetail())},goBuy:function(){this.storeIsLogin?(this.$refs.configDia.id=this.appId,this.configVis=!0):(this.$message.error("请先登录再购买"),this.loginVis=!0)},installApp:function(){var t=this;this.$confirm("将安装此应用, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.installLoading=!0,Object(b["g"])(t.appId).then((function(e){200!==e.data.status?t.$message.error(e.data.msg):t.$message.success(e.data.msg),t.installLoading=!1,t.getAppDetail()}))})).catch((function(){}))},uniApp:function(){var t=this;this.$confirm("将卸载此应用, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.uniLoading=!0,Object(b["k"])(t.appId).then((function(e){200!==e.data.status?t.$message.error(e.data.msg):t.$message.success(e.data.msg),t.getAppDetail(),t.uniLoading=!1}))})).catch((function(){}))},update:function(){var t=this;this.$confirm("将更新此应用, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.updateLoading=!0,Object(b["l"])(t.appId).then((function(e){200!==e.data.status?(t.$message.error(e.data.msg),t.updateLoading=!1):(t.$message.success(e.data.msg),t.updateLoading=!1),t.getAppDetail()}))})).catch((function(){}))},commentDialogClose:function(){this.$refs.addComment.resetFields(),this.$refs.addComment.clearValidate()},addCommentSubmit:function(){var t=this;this.$refs.addComment.validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(a){var s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return",!1);case 2:if(t.appDetail.product.my_evaluation.username){e.next=13;break}return t.btnLoading=!0,t.addCommentFormData.id=t.appId,e.next=7,u(t.addCommentFormData);case 7:s=e.sent,i=s.data,t.btnLoading=!1,200!==i.status?t.$message.error(i.msg):(t.getAppDetail(),t.$message.success(i.msg),t.commentDialogVis=!1),e.next=15;break;case 13:t.addCommentFormData.id=t.appDetail.product.my_evaluation.id,t.addCommentAgain();case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},addCommentAgain:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.addCommentFormData.score=void 0,t.btnLoading=!0,e.next=4,v(t.addCommentFormData);case 4:a=e.sent,s=a.data,t.btnLoading=!1,200!==s.status?t.$message.error(s.msg):(t.getAppDetail(),t.$message.success(s.msg),t.commentDialogVis=!1,t.replyDialogVis=!1);case 8:case"end":return e.stop()}}),e)})))()},getCommentList:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d(t.appId,t.search);case 2:a=e.sent,s=a.data,200!==s.status?t.$message.error(s.msg):((s.data.evaluation||[]).forEach((function(t){t.showMoreReply="-1",t.avatarColor=Object(h["a"])(t.username),(t.reply||[]).forEach((function(t){t.avatarColor=Object(h["a"])(t.username)}))})),t.tabCommentList=s.data.evaluation);case 5:case"end":return e.stop()}}),e)})))()},readMoreComment:function(){this.activeName="comment",document.getElementById("Top").scrollIntoView()},editMyComment:function(){this.addCommentFormData.content=this.appDetail.product.my_evaluation.content,this.addCommentFormData.score=this.appDetail.product.my_evaluation.score,this.commentDialogVis=!0},deleteMyComment:function(){var t=this;this.$confirm("确定删除此评论？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){_(t.appDetail.product.my_evaluation.id).then((function(e){200!==e.data.status?t.$message.error(e.data.msg):t.$message.success(e.data.msg),t.getAppDetail()}))})).catch((function(){}))},commentLikeToggle:function(t,e){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function s(){var i,o,r,l;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!t.is_like){s.next=8;break}return s.next=3,g(t.id);case 3:i=s.sent,o=i.data,200!==o.status?a.$message.error(o.msg):("tab"===e?a.getCommentList():a.getAppDetail(),a.$message.success(o.msg)),s.next=13;break;case 8:return s.next=10,f(t.id);case 10:r=s.sent,l=r.data,200!==l.status?a.$message.error(l.msg):("tab"===e?a.getCommentList():a.getAppDetail(),a.$message.success(l.msg));case 13:case"end":return s.stop()}}),s)})))()},replyComment:function(t){this.addCommentFormData.id=t.id,this.replyDialogVis=!0},replySubmit:function(){var t=this;this.$refs.replyCommentRef.validate((function(e){if(!e)return!1;t.addCommentAgain()}))},replyDialogClose:function(){this.addCommentFormData.content="",this.$refs.replyCommentRef.clearValidate()},seeMore:function(){this.$router.push({name:"appList",params:{seeMore:this.appDetail.product.app_type}})},toAnotherApp:function(t){this.$router.push({query:l()(this.$route.query,{id:t.id})}).catch((function(){})),this.appId=t.id,this.getAppDetail()},load:function(){var t=this;(this.tabCommentList||[]).forEach((function(e){t.tabCommentList.push(e)})),this.testNum+=1}},computed:{clientWidth:function(){return document.body.clientWidth},storeName:function(){return C["c"].username||this.loginInfo.username},storeIsLogin:function(){return C["c"].isLogin||this.loginInfo.isLogin}},watch:{activeName:function(t){"comment"===t&&this.getCommentList()}}},z=$,L=(a("977d"),a("2877")),M=Object(L["a"])(z,s,i,!1,null,"1c81148c",null);e["default"]=M.exports},"977d":function(t,e,a){"use strict";var s=a("1cc9"),i=a.n(s);i.a}}]);