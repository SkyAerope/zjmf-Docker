(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["vendors~app~2dd9c52e"],{"94ce":function(t,e){(function(){(function(t){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(){},r=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t(e.apply(null,n))}},o=function(t){return function(){return t}},i=function(t){return t};function u(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=e.concat(n);return t.apply(null,o)}}var a=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return!t.apply(null,e)}},c=function(t){return function(){throw new Error(t)}},l=o(!1),f=o(!0),s=function(){return d},d=function(){var t=function(t){return t.isNone()},e=function(t){return t()},r=function(t){return t},i={fold:function(t,e){return t()},is:l,isSome:l,isNone:f,getOr:r,getOrThunk:e,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:o(null),getOrUndefined:o(void 0),or:r,orThunk:e,map:s,each:n,bind:s,exists:l,forall:f,filter:s,equals:t,equals_:t,toArray:function(){return[]},toString:o("none()")};return Object.freeze&&Object.freeze(i),i}(),m=function(t){var e=o(t),n=function(){return i},r=function(e){return e(t)},i={fold:function(e,n){return n(t)},is:function(e){return t===e},isSome:f,isNone:l,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:n,orThunk:n,map:function(e){return m(e(t))},each:function(e){e(t)},bind:r,exists:r,forall:r,filter:function(e){return e(t)?i:d},toArray:function(){return[t]},toString:function(){return"some("+t+")"},equals:function(e){return e.is(t)},equals_:function(e,n){return e.fold(l,(function(e){return n(t,e)}))}};return i},g=function(t){return null===t||void 0===t?d:m(t)},h={some:m,none:s,from:g},v=function(t){if(null===t)return"null";var e=typeof t;return"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e},p=function(t){return function(e){return v(e)===t}},b=p("string"),w=p("array"),y=p("boolean"),x=p("function"),C=p("number"),R=Array.prototype.slice,S=Array.prototype.indexOf,T=Array.prototype.push,D=function(t,e){return S.call(t,e)},A=function(t,e){return D(t,e)>-1},O=function(t,e){for(var n=0,r=t.length;n<r;n++){var o=t[n];if(e(o,n))return!0}return!1},E=function(t,e){for(var n=t.length,r=new Array(n),o=0;o<n;o++){var i=t[o];r[o]=e(i,o)}return r},k=function(t,e){for(var n=0,r=t.length;n<r;n++){var o=t[n];e(o,n)}},N=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];e(r,n)}},B=function(t,e){for(var n=[],r=0,o=t.length;r<o;r++){var i=t[r];e(i,r)&&n.push(i)}return n},P=function(t,e,n){return N(t,(function(t){n=e(n,t)})),n},I=function(t,e,n){return k(t,(function(t){n=e(n,t)})),n},W=function(t,e){for(var n=0,r=t.length;n<r;n++){var o=t[n];if(e(o,n))return h.some(o)}return h.none()},M=function(t,e){for(var n=0,r=t.length;n<r;n++){var o=t[n];if(e(o,n))return h.some(n)}return h.none()},_=function(t){for(var e=[],n=0,r=t.length;n<r;++n){if(!w(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);T.apply(e,t[n])}return e},L=function(t,e){var n=E(t,e);return _(n)},F=function(t,e){for(var n=0,r=t.length;n<r;++n){var o=t[n];if(!0!==e(o,n))return!1}return!0},j=function(t){var e=R.call(t,0);return e.reverse(),e},H=function(t){return 0===t.length?h.none():h.some(t[t.length-1])},z=(x(Array.from)&&Array.from,Object.keys),U=function(t,e){for(var n=z(t),r=0,o=n.length;r<o;r++){var i=n[r],u=t[i];e(u,i)}},q=function(t,e){return G(t,(function(t,n){return{k:n,v:e(t,n)}}))},G=function(t,e){var n={};return U(t,(function(t,r){var o=e(t,r);n[o.k]=o.v})),n},V=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(t.length!==e.length)throw new Error('Wrong number of arguments to struct. Expected "['+t.length+']", got '+e.length+" arguments");var r={};return k(t,(function(t,n){r[t]=o(e[n])})),r}},Y=function(t){return t.slice(0).sort()},X=function(t,e){throw new Error("All required keys ("+Y(t).join(", ")+") were not specified. Specified keys were: "+Y(e).join(", ")+".")},J=function(t){throw new Error("Unsupported keys for object: "+Y(t).join(", "))},K=function(t,e){if(!w(e))throw new Error("The "+t+" fields must be an array. Was: "+e+".");k(e,(function(e){if(!b(e))throw new Error("The value "+e+" in the "+t+" fields was not a string.")}))},$=function(t,e){throw new Error("All values need to be of type: "+e+". Keys ("+Y(t).join(", ")+") were not.")},Q=function(t){var e=Y(t),n=W(e,(function(t,n){return n<e.length-1&&t===e[n+1]}));n.each((function(t){throw new Error("The field: "+t+" occurs more than once in the combined fields: ["+e.join(", ")+"].")}))},Z=function(t,e){var n=t.concat(e);if(0===n.length)throw new Error("You must specify at least one required or optional field.");return K("required",t),K("optional",e),Q(n),function(r){var i=z(r),u=F(t,(function(t){return A(i,t)}));u||X(t,i);var a=B(i,(function(t){return!A(n,t)}));a.length>0&&J(a);var c={};return k(t,(function(t){c[t]=o(r[t])})),k(e,(function(t){c[t]=o(Object.prototype.hasOwnProperty.call(r,t)?h.some(r[t]):h.none())})),c}},tt=(t.Node.ATTRIBUTE_NODE,t.Node.CDATA_SECTION_NODE,t.Node.COMMENT_NODE),et=t.Node.DOCUMENT_NODE,nt=(t.Node.DOCUMENT_TYPE_NODE,t.Node.DOCUMENT_FRAGMENT_NODE,t.Node.ELEMENT_NODE),rt=t.Node.TEXT_NODE,ot=(t.Node.PROCESSING_INSTRUCTION_NODE,t.Node.ENTITY_REFERENCE_NODE,t.Node.ENTITY_NODE,t.Node.NOTATION_NODE,"undefined"!==typeof t.window?t.window:Function("return this;")()),it=function(t,e){for(var n=void 0!==e&&null!==e?e:ot,r=0;r<t.length&&void 0!==n&&null!==n;++r)n=n[t[r]];return n},ut=function(t,e){var n=t.split(".");return it(n,e)},at=function(t,e){return ut(t,e)},ct=function(t,e){var n=at(t,e);if(void 0===n||null===n)throw new Error(t+" not available on this browser");return n},lt={getOrDie:ct},ft=function(t){var e=t.dom().nodeName;return e.toLowerCase()},st=function(t){return t.dom().nodeType},dt=function(t){return function(e){return st(e)===t}},mt=function(t){return st(t)===tt||"#comment"===ft(t)},gt=dt(nt),ht=dt(rt),vt=function(e,n,r){if(!(b(r)||y(r)||C(r)))throw t.console.error("Invalid call to Attr.set. Key ",n,":: Value ",r,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(n,r+"")},pt=function(t,e,n){vt(t.dom(),e,n)},bt=function(t,e){var n=t.dom();U(e,(function(t,e){vt(n,e,t)}))},wt=function(t,e){var n=t.dom().getAttribute(e);return null===n?void 0:n},yt=function(t,e){var n=t.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(e)},xt=function(t,e){t.dom().removeAttribute(e)},Ct=function(t){return I(t.dom().attributes,(function(t,e){return t[e.name]=e.value,t}),{})},Rt=function(t,e,n){if(""===e)return!0;if(t.length<e.length)return!1;var r=t.substr(n,n+e.length);return r===e},St=function(t,e){return-1!==t.indexOf(e)},Tt=function(t,e){return Rt(t,e,t.length-e.length)},Dt=function(t){return t.replace(/^\s+|\s+$/g,"")},At=function(t){return void 0!==t.style&&x(t.style.getPropertyValue)},Ot=function(t){var e,n=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return n||(n=!0,e=t.apply(null,r)),e}},Et=function(e,n){var r=n||t.document,o=r.createElement("div");if(o.innerHTML=e,!o.hasChildNodes()||o.childNodes.length>1)throw t.console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return Bt(o.childNodes[0])},kt=function(e,n){var r=n||t.document,o=r.createElement(e);return Bt(o)},Nt=function(e,n){var r=n||t.document,o=r.createTextNode(e);return Bt(o)},Bt=function(t){if(null===t||void 0===t)throw new Error("Node cannot be null or undefined");return{dom:o(t)}},Pt=function(t,e,n){var r=t.dom();return h.from(r.elementFromPoint(e,n)).map(Bt)},It={fromHtml:Et,fromTag:kt,fromText:Nt,fromDom:Bt,fromPoint:Pt},Wt=function(t){var e=ht(t)?t.dom().parentNode:t.dom();return void 0!==e&&null!==e&&e.ownerDocument.body.contains(e)},Mt=Ot((function(){return _t(It.fromDom(t.document))})),_t=function(t){var e=t.dom().body;if(null===e||void 0===e)throw new Error("Body is not available yet");return It.fromDom(e)},Lt=function(e,n,r){if(!b(r))throw t.console.error("Invalid call to CSS.set. Property ",n,":: Value ",r,":: Element ",e),new Error("CSS value must be a string: "+r);At(e)&&e.style.setProperty(n,r)},Ft=function(t,e){At(t)&&t.style.removeProperty(e)},jt=function(t,e,n){var r=t.dom();Lt(r,e,n)},Ht=function(t,e){var n=t.dom();U(e,(function(t,e){Lt(n,e,t)}))},zt=function(e,n){var r=e.dom(),o=t.window.getComputedStyle(r),i=o.getPropertyValue(n),u=""!==i||Wt(e)?i:Ut(r,n);return null===u?void 0:u},Ut=function(t,e){return At(t)?t.style.getPropertyValue(e):""},qt=function(t,e){var n=t.dom(),r=Ut(n,e);return h.from(r).filter((function(t){return t.length>0}))},Gt=function(t,e){var n=t.dom();Ft(n,e),yt(t,"style")&&""===Dt(wt(t,"style"))&&xt(t,"style")},Vt=function(t,e){var n=t.dom(),r=e.dom();At(n)&&At(r)&&(r.style.cssText=n.style.cssText)},Yt=function(){var t=lt.getOrDie("Node");return t},Xt=function(t,e,n){return 0!==(t.compareDocumentPosition(e)&n)},Jt=function(t,e){return Xt(t,e,Yt().DOCUMENT_POSITION_PRECEDING)},Kt=function(t,e){return Xt(t,e,Yt().DOCUMENT_POSITION_CONTAINED_BY)},$t={documentPositionPreceding:Jt,documentPositionContainedBy:Kt},Qt=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.test(e))return r}},Zt=function(t,e){var n=Qt(t,e);if(!n)return{major:0,minor:0};var r=function(t){return Number(e.replace(n,"$"+t))};return ne(r(1),r(2))},te=function(t,e){var n=String(e).toLowerCase();return 0===t.length?ee():Zt(t,n)},ee=function(){return ne(0,0)},ne=function(t,e){return{major:t,minor:e}},re={nu:ne,detect:te,unknown:ee},oe="Edge",ie="Chrome",ue="IE",ae="Opera",ce="Firefox",le="Safari",fe=function(t,e){return function(){return e===t}},se=function(){return de({current:void 0,version:re.unknown()})},de=function(t){var e=t.current,n=t.version;return{current:e,version:n,isEdge:fe(oe,e),isChrome:fe(ie,e),isIE:fe(ue,e),isOpera:fe(ae,e),isFirefox:fe(ce,e),isSafari:fe(le,e)}},me={unknown:se,nu:de,edge:o(oe),chrome:o(ie),ie:o(ue),opera:o(ae),firefox:o(ce),safari:o(le)},ge="Windows",he="iOS",ve="Android",pe="Linux",be="OSX",we="Solaris",ye="FreeBSD",xe=function(t,e){return function(){return e===t}},Ce=function(){return Re({current:void 0,version:re.unknown()})},Re=function(t){var e=t.current,n=t.version;return{current:e,version:n,isWindows:xe(ge,e),isiOS:xe(he,e),isAndroid:xe(ve,e),isOSX:xe(be,e),isLinux:xe(pe,e),isSolaris:xe(we,e),isFreeBSD:xe(ye,e)}},Se={unknown:Ce,nu:Re,windows:o(ge),ios:o(he),android:o(ve),linux:o(pe),osx:o(be),solaris:o(we),freebsd:o(ye)},Te=function(t,e,n){var r=t.isiOS()&&!0===/ipad/i.test(n),i=t.isiOS()&&!r,u=t.isAndroid()&&3===t.version.major,a=t.isAndroid()&&4===t.version.major,c=r||u||a&&!0===/mobile/i.test(n),l=t.isiOS()||t.isAndroid(),f=l&&!c,s=e.isSafari()&&t.isiOS()&&!1===/safari/i.test(n);return{isiPad:o(r),isiPhone:o(i),isTablet:o(c),isPhone:o(f),isTouch:o(l),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:o(s)}},De=function(t,e){var n=String(e).toLowerCase();return W(t,(function(t){return t.search(n)}))},Ae=function(t,e){return De(t,e).map((function(t){var n=re.detect(t.versionRegexes,e);return{current:t.name,version:n}}))},Oe=function(t,e){return De(t,e).map((function(t){var n=re.detect(t.versionRegexes,e);return{current:t.name,version:n}}))},Ee={detectBrowser:Ae,detectOs:Oe},ke=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ne=function(t){return function(e){return St(e,t)}},Be=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return St(t,"edge/")&&St(t,"chrome")&&St(t,"safari")&&St(t,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ke],search:function(t){return St(t,"chrome")&&!St(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return St(t,"msie")||St(t,"trident")}},{name:"Opera",versionRegexes:[ke,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ne("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ne("firefox")},{name:"Safari",versionRegexes:[ke,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(St(t,"safari")||St(t,"mobile/"))&&St(t,"applewebkit")}}],Pe=[{name:"Windows",search:Ne("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return St(t,"iphone")||St(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ne("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Ne("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ne("linux"),versionRegexes:[]},{name:"Solaris",search:Ne("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ne("freebsd"),versionRegexes:[]}],Ie={browsers:o(Be),oses:o(Pe)},We=function(t){var e=Ie.browsers(),n=Ie.oses(),r=Ee.detectBrowser(e,t).fold(me.unknown,me.nu),o=Ee.detectOs(n,t).fold(Se.unknown,Se.nu),i=Te(o,r,t);return{browser:r,os:o,deviceType:i}},Me={detect:We},_e=Ot((function(){var e=t.navigator.userAgent;return Me.detect(e)})),Le={detect:_e},Fe=nt,je=et,He=function(t,e){var n=t.dom();if(n.nodeType!==Fe)return!1;var r=n;if(void 0!==r.matches)return r.matches(e);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(e);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(e);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},ze=function(t){return t.nodeType!==Fe&&t.nodeType!==je||0===t.childElementCount},Ue=function(e,n){var r=void 0===n?t.document:n.dom();return ze(r)?[]:E(r.querySelectorAll(e),It.fromDom)},qe=function(e,n){var r=void 0===n?t.document:n.dom();return ze(r)?h.none():h.from(r.querySelector(e)).map(It.fromDom)},Ge=function(t,e){return t.dom()===e.dom()},Ve=function(t,e){var n=t.dom(),r=e.dom();return n!==r&&n.contains(r)},Ye=function(t,e){return $t.documentPositionContainedBy(t.dom(),e.dom())},Xe=Le.detect().browser,Je=Xe.isIE()?Ye:Ve,Ke=He,$e=function(t){return It.fromDom(t.dom().ownerDocument)},Qe=function(t){return It.fromDom(t.dom().ownerDocument.defaultView)},Ze=function(t){return h.from(t.dom().parentNode).map(It.fromDom)},tn=function(t,e){var n=x(e)?e:l,r=t.dom(),o=[];while(null!==r.parentNode&&void 0!==r.parentNode){var i=r.parentNode,u=It.fromDom(i);if(o.push(u),!0===n(u))break;r=i}return o},en=function(t){return h.from(t.dom().previousSibling).map(It.fromDom)},nn=function(t){return h.from(t.dom().nextSibling).map(It.fromDom)},rn=function(t){return E(t.dom().childNodes,It.fromDom)},on=function(t,e){var n=t.dom().childNodes;return h.from(n[e]).map(It.fromDom)},un=function(t){return on(t,0)},an=(V("element","offset"),function(t,e){var n=Ze(t);n.each((function(n){n.dom().insertBefore(e.dom(),t.dom())}))}),cn=function(t,e){var n=nn(t);n.fold((function(){var n=Ze(t);n.each((function(t){fn(t,e)}))}),(function(t){an(t,e)}))},ln=function(t,e){var n=un(t);n.fold((function(){fn(t,e)}),(function(n){t.dom().insertBefore(e.dom(),n.dom())}))},fn=function(t,e){t.dom().appendChild(e.dom())},sn=function(t,e){an(t,e),fn(e,t)},dn=function(t,e){k(e,(function(e){an(t,e)}))},mn=function(t,e){k(e,(function(n,r){var o=0===r?t:e[r-1];cn(o,n)}))},gn=function(t,e){k(e,(function(e){fn(t,e)}))},hn=function(t){t.dom().textContent="",k(rn(t),(function(t){vn(t)}))},vn=function(t){var e=t.dom();null!==e.parentNode&&e.parentNode.removeChild(e)},pn=function(t){var e=rn(t);e.length>0&&dn(t,e),vn(t)},bn=(V("width","height"),V("width","height"),V("rows","columns")),wn=V("row","column"),yn=(V("x","y"),V("element","rowspan","colspan")),xn=V("element","rowspan","colspan","isNew"),Cn=V("element","rowspan","colspan","row","column"),Rn=V("element","cells","section"),Sn=V("element","isNew"),Tn=V("element","cells","section","isNew"),Dn=V("cells","section"),An=V("details","section"),On=V("startRow","startCol","finishRow","finishCol"),En=function(t,e,n){return B(tn(t,n),e)},kn=function(t,e){return B(rn(t),e)},Nn=function(t,e){var n=[];return k(rn(t),(function(t){e(t)&&(n=n.concat([t])),n=n.concat(Nn(t,e))})),n},Bn=function(t,e,n){return En(t,(function(t){return He(t,e)}),n)},Pn=function(t,e){return kn(t,(function(t){return He(t,e)}))},In=function(t,e){return Ue(e,t)};function Wn(t,e,n,r,o){return t(n,r)?h.some(n):x(o)&&o(n)?h.none():e(n,r,o)}var Mn=function(t,e,n){var r=t.dom(),i=x(n)?n:o(!1);while(r.parentNode){r=r.parentNode;var u=It.fromDom(r);if(e(u))return h.some(u);if(i(u))break}return h.none()},_n=function(t,e,n){var r=function(t,e){return e(t)};return Wn(r,Mn,t,e,n)},Ln=function(t,e){var n=function(t){return e(It.fromDom(t))},r=W(t.dom().childNodes,n);return r.map(It.fromDom)},Fn=function(t,e){var n=function(t){for(var r=0;r<t.childNodes.length;r++){var o=It.fromDom(t.childNodes[r]);if(e(o))return h.some(o);var i=n(t.childNodes[r]);if(i.isSome())return i}return h.none()};return n(t.dom())},jn=function(t,e,n){return Mn(t,(function(t){return He(t,e)}),n)},Hn=function(t,e){return Ln(t,(function(t){return He(t,e)}))},zn=function(t,e){return qe(e,t)},Un=function(t,e,n){return Wn(He,jn,t,e,n)},qn=function(t,e){return Gn(t,e,o(!0))},Gn=function(t,e,n){return L(rn(t),(function(t){return He(t,e)?n(t)?[t]:[]:Gn(t,e,n)}))},Vn={firstLayer:qn,filterFirstLayer:Gn},Yn=function(t,e,n){if(void 0===n&&(n=l),n(e))return h.none();if(A(t,ft(e)))return h.some(e);var r=function(t){return He(t,"table")||n(t)};return jn(e,t.join(","),r)},Xn=function(t,e){return Yn(["td","th"],t,e)},Jn=function(t){return Vn.firstLayer(t,"th,td")},Kn=function(t,e){return Yn(["caption","tr","tbody","tfoot","thead"],t,e)},$n=function(t,e){return Ze(e).map((function(e){return Pn(e,t)}))},Qn=u($n,"th,td"),Zn=u($n,"tr"),tr=function(t){return zn(t,"th,td")},er=function(t,e){return Un(t,"table",e)},nr=function(t,e){return Yn(["tr"],t,e)},rr=function(t){return Vn.firstLayer(t,"tr")},or=function(t,e){return parseInt(wt(t,e),10)},ir=function(t,e,n){var r=or(t,e),o=or(t,n);return bn(r,o)},ur={cell:Xn,firstCell:tr,cells:Jn,neighbourCells:Qn,table:er,row:nr,rows:rr,notCell:Kn,neighbourRows:Zn,attr:or,grid:ir},ar=function(t){var e=ur.rows(t);return E(e,(function(t){var e=t,n=Ze(e),r=n.map((function(t){var e=ft(t);return"tfoot"===e||"thead"===e||"tbody"===e?e:"tbody"})).getOr("tbody"),o=E(ur.cells(t),(function(t){var e=yt(t,"rowspan")?parseInt(wt(t,"rowspan"),10):1,n=yt(t,"colspan")?parseInt(wt(t,"colspan"),10):1;return yn(t,e,n)}));return Rn(e,o,r)}))},cr=function(t,e){return E(t,(function(t){var n=E(ur.cells(t),(function(t){var e=yt(t,"rowspan")?parseInt(wt(t,"rowspan"),10):1,n=yt(t,"colspan")?parseInt(wt(t,"colspan"),10):1;return yn(t,e,n)}));return Rn(t,n,e.section())}))},lr={fromTable:ar,fromPastedRows:cr},fr=function(t,e){return t+","+e},sr=function(t,e,n){var r=t.access()[fr(e,n)];return void 0!==r?h.some(r):h.none()},dr=function(t,e,n){var r=mr(t,(function(t){return n(e,t.element())}));return r.length>0?h.some(r[0]):h.none()},mr=function(t,e){var n=L(t.all(),(function(t){return t.cells()}));return B(n,e)},gr=function(t){var e={},n=[],r=t.length,i=0;k(t,(function(t,r){var o=[];k(t.cells(),(function(t){var n=0;while(void 0!==e[fr(r,n)])n++;for(var u=Cn(t.element(),t.rowspan(),t.colspan(),r,n),a=0;a<t.colspan();a++)for(var c=0;c<t.rowspan();c++){var l=r+c,f=n+a,s=fr(l,f);e[s]=u,i=Math.max(i,f+1)}o.push(u)})),n.push(Rn(t.element(),o,t.section()))}));var u=bn(r,i);return{grid:o(u),access:o(e),all:o(n)}},hr=function(t){var e=E(t.all(),(function(t){return t.cells()}));return _(e)},vr={generate:gr,getAt:sr,findItem:dr,filterItems:mr,justCells:hr},pr=V("minRow","minCol","maxRow","maxCol"),br=function(t,e){var n=t.grid().columns(),r=t.grid().rows(),o=r,i=n,u=0,a=0;return U(t.access(),(function(t){if(e(t)){var n=t.row(),r=n+t.rowspan()-1,c=t.column(),l=c+t.colspan()-1;n<o?o=n:r>u&&(u=r),c<i?i=c:l>a&&(a=l)}})),pr(o,i,u,a)},wr=function(t,e,n){var r=t[n].element(),o=It.fromTag("td");fn(o,It.fromTag("br"));var i=e?fn:ln;i(r,o)},yr=function(t,e,n,r){for(var o=e.grid().columns(),i=e.grid().rows(),u=0;u<i;u++)for(var a=!1,c=0;c<o;c++)if(!(u<n.minRow()||u>n.maxRow()||c<n.minCol()||c>n.maxCol())){var l=vr.getAt(e,u,c).filter(r).isNone();l?wr(t,a,u):a=!0}},xr=function(t,e){var n=B(Vn.firstLayer(t,"tr"),(function(t){return 0===t.dom().childElementCount}));k(n,vn),e.minCol()!==e.maxCol()&&e.minRow()!==e.maxRow()||k(Vn.firstLayer(t,"th,td"),(function(t){xt(t,"rowspan"),xt(t,"colspan")})),xt(t,"width"),xt(t,"height"),Gt(t,"width"),Gt(t,"height")},Cr=function(t,e){var n=function(t){return He(t.element(),e)},r=lr.fromTable(t),o=vr.generate(r),i=br(o,n),u="th:not("+e+"),td:not("+e+")",a=Vn.filterFirstLayer(t,"th,td",(function(t){return He(t,u)}));return k(a,vn),yr(r,o,i,n),xr(t,i),t},Rr={extract:Cr};function Sr(t,e){var n=function(n){if(!t(n))throw new Error("Can only get "+e+" value of a "+e+" node");return r(n).getOr("")},r=function(e){return t(e)?h.from(e.dom().nodeValue):h.none()},o=function(n,r){if(!t(n))throw new Error("Can only set raw "+e+" value of a "+e+" node");n.dom().nodeValue=r};return{get:n,getOption:r,set:o}}var Tr=Sr(ht,"text"),Dr=function(t){return Tr.get(t)},Ar=function(t){return Tr.getOption(t)},Or=function(t,e){Tr.set(t,e)},Er=function(t){return"img"===ft(t)?1:Ar(t).fold((function(){return rn(t).length}),(function(t){return t.length}))},kr=" ",Nr=function(t){return Ar(t).filter((function(t){return 0!==t.trim().length||t.indexOf(kr)>-1})).isSome()},Br=["img","br"],Pr=function(t){var e=Nr(t);return e||A(Br,ft(t))},Ir=function(t){return Fn(t,Pr)},Wr=function(t){return Mr(t,Pr)},Mr=function(t,e){var n=function(t){for(var r=rn(t),o=r.length-1;o>=0;o--){var i=r[o];if(e(i))return h.some(i);var u=n(i);if(u.isSome())return u}return h.none()};return n(t)},_r=function(t,e){return It.fromDom(t.dom().cloneNode(e))},Lr=function(t){return _r(t,!1)},Fr=function(t){return _r(t,!0)},jr=function(t,e){var n=It.fromTag(e),r=Ct(t);return bt(n,r),n},Hr=function(t,e){var n=jr(t,e),r=rn(Fr(t));return gn(n,r),n},zr=function(){var t=It.fromTag("td");return fn(t,It.fromTag("br")),t},Ur=function(t,e,n){var r=Hr(t,e);return U(n,(function(t,e){null===t?xt(r,e):pt(r,e,t)})),r},qr=function(t){return t},Gr=function(t){return function(){return It.fromTag("tr",t.dom())}},Vr=function(t,e,n){var r=Ir(t);return r.map((function(r){var o=n.join(","),i=Bn(r,o,(function(e){return Ge(e,t)}));return P(i,(function(t,e){var n=Lr(e);return xt(n,"contenteditable"),fn(t,n),n}),e)})).getOr(e)},Yr=function(t,e,n){var r=function(e){var r=$e(e.element()),o=It.fromTag(ft(e.element()),r.dom()),i=n.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),u=i.length>0?Vr(e.element(),o,i):o;return fn(u,It.fromTag("br")),Vt(e.element(),o),Gt(o,"height"),1!==e.colspan()&&Gt(e.element(),"width"),t(e.element(),o),o};return{row:Gr(e),cell:r,replace:Ur,gap:zr}},Xr=function(t){return{row:Gr(t),cell:zr,replace:qr,gap:zr}},Jr={cellOperations:Yr,paste:Xr},Kr=function(e,n){var r=n||t.document,o=r.createElement("div");return o.innerHTML=e,rn(It.fromDom(o))},$r=function(t,e){var n=e.column(),r=e.column()+e.colspan()-1,o=e.row(),i=e.row()+e.rowspan()-1;return n<=t.finishCol()&&r>=t.startCol()&&o<=t.finishRow()&&i>=t.startRow()},Qr=function(t,e){return e.column()>=t.startCol()&&e.column()+e.colspan()-1<=t.finishCol()&&e.row()>=t.startRow()&&e.row()+e.rowspan()-1<=t.finishRow()},Zr=function(t,e){for(var n=!0,r=u(Qr,e),o=e.startRow();o<=e.finishRow();o++)for(var i=e.startCol();i<=e.finishCol();i++)n=n&&vr.getAt(t,o,i).exists(r);return n?h.some(e):h.none()},to={inSelection:$r,isWithin:Qr,isRectangular:Zr},eo=function(t,e){return On(Math.min(t.row(),e.row()),Math.min(t.column(),e.column()),Math.max(t.row()+t.rowspan()-1,e.row()+e.rowspan()-1),Math.max(t.column()+t.colspan()-1,e.column()+e.colspan()-1))},no=function(t,e,n){var r=vr.findItem(t,e,Ge),o=vr.findItem(t,n,Ge);return r.bind((function(t){return o.map((function(e){return eo(t,e)}))}))},ro=function(t,e,n){return no(t,e,n).bind((function(e){return to.isRectangular(t,e)}))},oo={getAnyBox:no,getBox:ro},io=function(t,e,n,r){return vr.findItem(t,e,Ge).bind((function(e){var o=n>0?e.row()+e.rowspan()-1:e.row(),i=r>0?e.column()+e.colspan()-1:e.column(),u=vr.getAt(t,o+n,i+r);return u.map((function(t){return t.element()}))}))},uo=function(t,e,n){return oo.getAnyBox(t,e,n).map((function(e){var n=vr.filterItems(t,u(to.inSelection,e));return E(n,(function(t){return t.element()}))}))},ao=function(t,e){var n=function(t,e){return Je(e,t)};return vr.findItem(t,e,n).map((function(t){return t.element()}))},co={moveBy:io,intercepts:uo,parentCell:ao},lo=function(t,e,n){return ur.table(t).bind((function(r){var o=go(r);return co.moveBy(o,t,e,n)}))},fo=function(t,e,n){var r=go(t);return co.intercepts(r,e,n)},so=function(t,e,n,r,o){var i=go(t),u=Ge(t,n)?h.some(e):co.parentCell(i,e),a=Ge(t,o)?h.some(r):co.parentCell(i,r);return u.bind((function(t){return a.bind((function(e){return co.intercepts(i,t,e)}))}))},mo=function(t,e,n){var r=go(t);return oo.getBox(r,e,n)},go=function(t){var e=lr.fromTable(t);return vr.generate(e)},ho={moveBy:lo,intercepts:fo,nestedIntercepts:so,getBox:mo},vo=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function po(){var t=function(t){return It.fromDom(t.dom().cloneNode(!1))},e=function(t){return t.dom().ownerDocument},n=function(t){return!!gt(t)&&("body"===ft(t)||A(vo,ft(t)))},r=function(t){return!!gt(t)&&A(["br","img","hr","input"],ft(t))},i=function(t,e){return t.dom().compareDocumentPosition(e.dom())},u=function(t,e){var n=Ct(t);bt(e,n)};return{up:o({selector:jn,closest:Un,predicate:Mn,all:tn}),down:o({selector:In,predicate:Nn}),styles:o({get:zt,getRaw:qt,set:jt,remove:Gt}),attrs:o({get:wt,set:pt,remove:xt,copyTo:u}),insert:o({before:an,after:cn,afterAll:mn,append:fn,appendAll:gn,prepend:ln,wrap:sn}),remove:o({unwrap:pn,remove:vn}),create:o({nu:It.fromTag,clone:t,text:It.fromText}),query:o({comparePosition:i,prevSibling:en,nextSibling:nn}),property:o({children:rn,name:ft,parent:Ze,document:e,isText:ht,isComment:mt,isElement:gt,getText:Dr,setText:Or,isBoundary:n,isEmptyTag:r}),eq:Ge,is:Ke}}var bo=V("left","right"),wo=V("first","second","splits"),yo=function(t,e,n){var r=t.property().children(e),i=M(r,u(t.eq,n));return i.map((function(t){return{before:o(r.slice(0,t)),after:o(r.slice(t+1))}}))},xo=function(t,e,n){return yo(t,e,n).map((function(n){var r=t.create().clone(e);return t.insert().appendAll(r,n.after()),t.insert().after(e,r),bo(e,r)}))},Co=function(t,e,n){return yo(t,e,n).map((function(r){var o=t.create().clone(e);return t.insert().appendAll(o,r.before().concat([n])),t.insert().appendAll(e,r.after()),t.insert().before(e,o),bo(o,e)}))},Ro=function(t,e,n,r){var o=function(e,i,u){var a=wo(e,h.none(),u);return n(e)?wo(e,i,u):t.property().parent(e).bind((function(i){return r(t,i,e).map((function(t){var e=[{first:t.left,second:t.right}],r=n(i)?i:t.left();return o(r,h.some(t.right()),u.concat(e))}))})).getOr(a)};return o(e,h.none(),[])},So=function(t,e,n,r){var o=n[0],i=n.slice(1);return r(t,e,o,i)},To=function(t,e,n){return n.length>0?So(t,e,n,Do):h.none()},Do=function(t,e,n,r){var o=e(t,n);return P(r,(function(n,r){var o=e(t,r);return Ao(t,n,o)}),o)},Ao=function(t,e,n){return e.bind((function(e){return n.filter(u(t.eq,e))}))},Oo=function(t,e){return u(t.eq,e)},Eo=function(t,e,n,r){var o=t.property().children(e);if(t.eq(e,n[0]))return h.some([n[0]]);if(t.eq(e,r[0]))return h.some([r[0]]);var i=function(n){var r=j(n),i=M(r,Oo(t,e)).getOr(-1),u=i<r.length-1?r[i+1]:r[i];return M(o,Oo(t,u))},u=i(n),a=i(r);return u.bind((function(t){return a.map((function(e){var n=Math.min(t,e),r=Math.max(t,e);return o.slice(n,r+1)}))}))},ko=function(t,e,n,r){void 0===r&&(r=l);var i=[e].concat(t.up().all(e)),u=[n].concat(t.up().all(n)),a=function(t){var e=M(t,r);return e.fold((function(){return t}),(function(e){return t.slice(0,e+1)}))},c=a(i),f=a(u),s=W(c,(function(e){return O(f,Oo(t,e))}));return{firstpath:o(c),secondpath:o(f),shared:o(s)}},No=function(t,e,n){var r=ko(t,e,n);return r.shared().bind((function(e){return Eo(t,e,r.firstpath(),r.secondpath())}))},Bo={subset:No,ancestors:ko},Po=To,Io=Bo.subset,Wo=Bo.ancestors,Mo=Co,_o=xo,Lo=Ro,Fo={sharedOne:Po,subset:Io,ancestors:Wo,breakToLeft:Mo,breakToRight:_o,breakPath:Lo},jo=po(),Ho=function(t,e){return Fo.sharedOne(jo,(function(e,n){return t(n)}),e)},zo=function(t,e){return Fo.subset(jo,t,e)},Uo=function(t,e,n){return Fo.ancestors(jo,t,e,n)},qo=function(t,e){return Fo.breakToLeft(jo,t,e)},Go=function(t,e){return Fo.breakToRight(jo,t,e)},Vo=function(t,e,n){return Fo.breakPath(jo,t,e,(function(t,e,r){return n(e,r)}))},Yo={sharedOne:Ho,subset:zo,ancestors:Uo,breakToLeft:qo,breakToRight:Go,breakPath:Vo},Xo=Z(["boxes","start","finish"],[]),Jo={create:Xo},Ko=function(t){return jn(t,"table")},$o=function(t,e,n){var r=function(t){return function(e){return void 0!==n&&n(e)||Ge(e,t)}};return Ge(t,e)?h.some(Jo.create({boxes:h.some([t]),start:t,finish:e})):Ko(t).bind((function(o){return Ko(e).bind((function(i){if(Ge(o,i))return h.some(Jo.create({boxes:ho.intercepts(o,t,e),start:t,finish:e}));if(Je(o,i)){var u=Bn(e,"td,th",r(o)),a=u.length>0?u[u.length-1]:e;return h.some(Jo.create({boxes:ho.nestedIntercepts(o,t,o,e,i),start:t,finish:a}))}if(Je(i,o)){u=Bn(t,"td,th",r(i));var c=u.length>0?u[u.length-1]:t;return h.some(Jo.create({boxes:ho.nestedIntercepts(i,t,o,e,i),start:t,finish:c}))}return Yo.ancestors(t,e).shared().bind((function(u){return Un(u,"table",n).bind((function(n){var u=Bn(e,"td,th",r(n)),a=u.length>0?u[u.length-1]:e,c=Bn(t,"td,th",r(n)),l=c.length>0?c[c.length-1]:t;return h.some(Jo.create({boxes:ho.nestedIntercepts(n,t,o,e,i),start:l,finish:a}))}))}))}))}))},Qo=function(t,e){var n=In(t,e);return n.length>0?h.some(n):h.none()},Zo=function(t,e){return W(t,(function(t){return He(t,e)}))},ti=function(t,e,n){return zn(t,e).bind((function(e){return zn(t,n).bind((function(t){return Yo.sharedOne(Ko,[e,t]).map((function(n){return{first:o(e),last:o(t),table:o(n)}}))}))}))},ei=function(t,e){return jn(t,"table").bind((function(n){return zn(n,e).bind((function(e){return $o(e,t).bind((function(t){return t.boxes().map((function(e){return{boxes:o(e),start:o(t.start()),finish:o(t.finish())}}))}))}))}))},ni=function(t,e,n,r,o){return Zo(t,o).bind((function(t){return ho.moveBy(t,e,n).bind((function(t){return ei(t,r)}))}))},ri={identify:$o,retrieve:Qo,shiftSelection:ni,getEdges:ti},oi=function(t,e){return ri.retrieve(t,e)},ii=function(t,e,n){return ri.getEdges(t,e,n).bind((function(e){var n=function(e){return Ge(t,e)},r=jn(e.first(),"thead,tfoot,tbody,table",n),o=jn(e.last(),"thead,tfoot,tbody,table",n);return r.bind((function(t){return o.bind((function(n){return Ge(t,n)?ho.getBox(e.table(),e.first(),e.last()):h.none()}))}))}))},ui={retrieve:oi,retrieveBox:ii},ai="data-mce-selected",ci="td["+ai+"],th["+ai+"]",li="["+ai+"]",fi="data-mce-first-selected",si="td["+fi+"],th["+fi+"]",di="data-mce-last-selected",mi="td["+di+"],th["+di+"]",gi={selected:o(ai),selectedSelector:o(ci),attributeSelector:o(li),firstSelected:o(fi),firstSelectedSelector:o(si),lastSelected:o(di),lastSelectedSelector:o(mi)},hi=function(e){if(!w(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var n=[],r={};return k(e,(function(o,i){var u=z(o);if(1!==u.length)throw new Error("one and only one name per case");var a=u[0],c=o[a];if(void 0!==r[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!w(c))throw new Error("case arguments must be an array");n.push(a),r[a]=function(){var r=arguments.length;if(r!==c.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+c.length+" ("+c+"), got "+r);for(var o=new Array(r),u=0;u<o.length;u++)o[u]=arguments[u];var l=function(t){var e=z(t);if(n.length!==e.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+"\nActual: "+e.join(","));var r=F(n,(function(t){return A(e,t)}));if(!r)throw new Error("Not all branches were specified when using match. Specified: "+e.join(", ")+"\nRequired: "+n.join(", "));return t[a].apply(null,o)};return{fold:function(){if(arguments.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+arguments.length);var t=arguments[i];return t.apply(null,o)},match:l,log:function(e){t.console.log(e,{constructors:n,constructor:a,params:o})}}}})),r},vi={generate:hi},pi=vi.generate([{none:[]},{multiple:["elements"]},{single:["selection"]}]),bi=function(t,e,n,r){return t.fold(e,n,r)},wi={cata:bi,none:pi.none,multiple:pi.multiple,single:pi.single},yi=function(t,e){return wi.cata(e.get(),o([]),i,o([t]))},xi=function(t,e){var n=function(t){return yt(t,"rowspan")&&parseInt(wt(t,"rowspan"),10)>1||yt(t,"colspan")&&parseInt(wt(t,"colspan"),10)>1},r=yi(t,e);return r.length>0&&F(r,n)?h.some(r):h.none()},Ci=function(t,e){return wi.cata(e.get(),h.none,(function(e,n){return 0===e.length?h.none():ui.retrieveBox(t,gi.firstSelectedSelector(),gi.lastSelectedSelector()).bind((function(t){return e.length>1?h.some({bounds:o(t),cells:o(e)}):h.none()}))}),h.none)},Ri={mergable:Ci,unmergable:xi,selection:yi},Si=function(t){return{element:o(t),mergable:h.none,unmergable:h.none,selection:o([t])}},Ti=function(t,e,n){return{element:o(n),mergable:o(Ri.mergable(e,t)),unmergable:o(Ri.unmergable(n,t)),selection:o(Ri.selection(n,t))}},Di=function(t){return Si(t)},Ai=V("element","clipboard","generators"),Oi=function(t,e,n,r,i){return{element:o(n),mergable:h.none,unmergable:h.none,selection:o(Ri.selection(n,t)),clipboard:o(r),generators:o(i)}},Ei={noMenu:Si,forMenu:Ti,notCell:Di,paste:Ai,pasteRows:Oi},ki=function(t){return ur.table(t[0]).map(Fr).map((function(t){return[Rr.extract(t,gi.attributeSelector())]}))},Ni=function(t,e){return E(e,(function(e){return t.selection.serializer.serialize(e.dom(),{})})).join("")},Bi=function(t){return E(t,(function(t){return t.dom().innerText})).join("")},Pi=function(t,e,r,o){t.on("BeforeGetContent",(function(r){var o=function(e){r.preventDefault(),ki(e).each((function(e){r.content="text"===r.format?Bi(e):Ni(t,e)}))};!0===r.selection&&wi.cata(e.get(),n,o,n)})),t.on("BeforeSetContent",(function(e){if(!0===e.selection&&!0===e.paste){var n=h.from(t.dom.getParent(t.selection.getStart(),"th,td"));n.each((function(n){var i=It.fromDom(n);ur.table(i).each((function(n){var u=B(Kr(e.content),(function(t){return"meta"!==ft(t)}));if(1===u.length&&"table"===ft(u[0])){e.preventDefault();var a=It.fromDom(t.getDoc()),c=Jr.paste(a),l=Ei.paste(i,u[0],c);r.pasteCells(n,l).each((function(e){t.selection.setRng(e),t.focus(),o.clear(n)}))}}))}))}}))},Ii={registerEvents:Pi};function Wi(t,e){var n=function(e,n){if(!C(n)&&!n.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+n);var r=e.dom();At(r)&&(r.style[t]=n+"px")},r=function(n){var r=e(n);if(r<=0||null===r){var o=zt(n,t);return parseFloat(o)||0}return r},o=r,i=function(t,e){return I(e,(function(e,n){var r=zt(t,n),o=void 0===r?0:parseInt(r,10);return isNaN(o)?e:e+o}),0)},u=function(t,e,n){var r=i(t,n),o=e>r?e-r:0;return o};return{set:n,get:r,getOuter:o,aggregate:i,max:u}}var Mi=Wi("height",(function(t){var e=t.dom();return Wt(t)?e.getBoundingClientRect().height:e.offsetHeight})),_i=function(t){return Mi.get(t)},Li=function(t){return Mi.getOuter(t)},Fi=Wi("width",(function(t){return t.dom().offsetWidth})),ji=function(t){return Fi.get(t)},Hi=function(t){return Fi.getOuter(t)},zi=Le.detect(),Ui=function(){return zi.browser.isIE()||zi.browser.isEdge()},qi=function(t,e){var n=parseFloat(t);return isNaN(n)?e:n},Gi=function(t,e,n){return qi(zt(t,e),n)},Vi=function(t){var e=Gi(t,"padding-top",0),n=Gi(t,"padding-bottom",0),r=Gi(t,"border-top-width",0),o=Gi(t,"border-bottom-width",0),i=t.dom().getBoundingClientRect().height,u=zt(t,"box-sizing"),a=r+o;return"border-box"===u?i:i-e-n-a},Yi=function(t){return Gi(t,"width",ji(t))},Xi=function(t){return Ui()?Vi(t):Gi(t,"height",_i(t))},Ji={getWidth:Yi,getHeight:Xi},Ki=/(\d+(\.\d+)?)(\w|%)*/,$i=/(\d+(\.\d+)?)%/,Qi=/(\d+(\.\d+)?)px|em/,Zi=function(t,e){jt(t,"width",e+"px")},tu=function(t,e){jt(t,"width",e+"%")},eu=function(t,e){jt(t,"height",e+"px")},nu=function(t){return qt(t,"height").getOrThunk((function(){return Ji.getHeight(t)+"px"}))},ru=function(t,e,n,r){var o=ur.table(t).map((function(t){var r=n(t);return Math.floor(e/100*r)})).getOr(e);return r(t,o),o},ou=function(t,e,n,r){var o=parseInt(t,10);return Tt(t,"%")&&"table"!==ft(e)?ru(e,o,n,r):o},iu=function(t){var e=nu(t);return e?ou(e,t,_i,eu):_i(t)},uu=function(t,e,n){var r=n(t),o=au(t,e);return r/o},au=function(t,e){return yt(t,e)?parseInt(wt(t,e),10):1},cu=function(t){var e=qt(t,"width");return e.fold((function(){return h.from(wt(t,"width"))}),(function(t){return h.some(t)}))},lu=function(t,e){return t/e.pixelWidth()*100},fu=function(t,e,n){var r=$i.exec(e);if(null!==r)return parseFloat(r[1]);var o=ji(t);return lu(o,n)},su=function(t,e){var n=cu(t);return n.fold((function(){var n=ji(t);return lu(n,e)}),(function(n){return fu(t,n,e)}))},du=function(t,e){return t/100*e.pixelWidth()},mu=function(t,e,n){var r=Qi.exec(e);if(null!==r)return parseInt(r[1],10);var o=$i.exec(e);if(null!==o){var i=parseFloat(o[1]);return du(i,n)}return ji(t)},gu=function(t,e){var n=cu(t);return n.fold((function(){return ji(t)}),(function(n){return mu(t,n,e)}))},hu=function(t){return uu(t,"rowspan",iu)},vu=function(t){var e=cu(t);return e.bind((function(t){var e=Ki.exec(t);return null!==e?h.some({width:o(parseFloat(e[1])),unit:o(e[3])}):h.none()}))},pu=function(t,e,n){jt(t,"width",e+n)},bu={percentageBasedSizeRegex:o($i),pixelBasedSizeRegex:o(Qi),setPixelWidth:Zi,setPercentageWidth:tu,setHeight:eu,getPixelWidth:gu,getPercentageWidth:su,getGenericWidth:vu,setGenericWidth:pu,getHeight:hu,getRawWidth:cu},wu=function(t,e){var n=bu.getGenericWidth(t);n.each((function(n){var r=n.width()/2;bu.setGenericWidth(t,r,n.unit()),bu.setGenericWidth(e,r,n.unit())}))},yu={halve:wu},xu=function(t,e){var n=function(n,r){return xu(t+n,e+r)};return{left:o(t),top:o(e),translate:n}},Cu=xu,Ru=function(t){var e=t.getBoundingClientRect();return Cu(e.left,e.top)},Su=function(t,e){return void 0!==t?t:void 0!==e?e:0},Tu=function(t){var e=t.dom().ownerDocument,n=e.body,r=e.defaultView,o=e.documentElement,i=Su(r.pageYOffset,o.scrollTop),u=Su(r.pageXOffset,o.scrollLeft),a=Su(o.clientTop,n.clientTop),c=Su(o.clientLeft,n.clientLeft);return Du(t).translate(u-c,i-a)},Du=function(t){var e=t.dom(),n=e.ownerDocument,r=n.body;return r===e?Cu(r.offsetLeft,r.offsetTop):Wt(t)?Ru(e):Cu(0,0)},Au=V("row","y"),Ou=V("col","x"),Eu=function(t){var e=Tu(t);return e.left()+Hi(t)},ku=function(t){return Tu(t).left()},Nu=function(t,e){return Ou(t,ku(e))},Bu=function(t,e){return Ou(t,Eu(e))},Pu=function(t){return Tu(t).top()},Iu=function(t,e){return Au(t,Pu(e))},Wu=function(t,e){return Au(t,Pu(e)+Li(e))},Mu=function(t,e,n){if(0===n.length)return[];var r=E(n.slice(1),(function(e,n){return e.map((function(e){return t(n,e)}))})),o=n[n.length-1].map((function(t){return e(n.length-1,t)}));return r.concat([o])},_u=function(t){return-t},Lu={delta:i,positions:function(t){return Mu(Iu,Wu,t)},edge:Pu},Fu={delta:i,edge:ku,positions:function(t){return Mu(Nu,Bu,t)}},ju={delta:_u,edge:Eu,positions:function(t){return Mu(Bu,Nu,t)}},Hu={height:Lu,rtl:ju,ltr:Fu},zu={ltr:Hu.ltr,rtl:Hu.rtl};function Uu(t){var e=function(e){return t(e).isRtl()?zu.rtl:zu.ltr},n=function(t,n){return e(n).delta(t,n)},r=function(t,n){return e(n).positions(t,n)},o=function(t){return e(t).edge(t)};return{delta:n,edge:o,positions:r}}var qu=function(t){var e=lr.fromTable(t),n=vr.generate(e);return n.grid()},Gu={getGridSize:qu},Vu=function(){return Vu=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Vu.apply(this,arguments)},Yu=function(t){for(var e=[],n=function(t){e.push(t)},r=0;r<t.length;r++)t[r].each(n);return e},Xu=function(t,e){for(var n=0;n<t.length;n++){var r=e(t[n],n);if(r.isSome())return r}return h.none()},Ju=function(t,e,n,r){n===r?xt(t,e):pt(t,e,n)},Ku=function(t,e){var n=[],r=[],i=function(e,o){var i=Hn(t,o).getOrThunk((function(){var e=It.fromTag(o,$e(t).dom());return fn(t,e),e}));hn(i);var u=E(e,(function(t){t.isNew()&&n.push(t.element());var e=t.element();return hn(e),k(t.cells(),(function(t){t.isNew()&&r.push(t.element()),Ju(t.element(),"colspan",t.colspan(),1),Ju(t.element(),"rowspan",t.rowspan(),1),fn(e,t.element())})),e}));gn(i,u)},u=function(e){Hn(t,e).each(vn)},a=function(t,e){t.length>0?i(t,e):u(e)},c=[],l=[],f=[];return k(e,(function(t){switch(t.section()){case"thead":c.push(t);break;case"tbody":l.push(t);break;case"tfoot":f.push(t);break}})),a(c,"thead"),a(l,"tbody"),a(f,"tfoot"),{newRows:o(n),newCells:o(r)}},$u=function(t){var e=E(t,(function(t){var e=Lr(t.element());return k(t.cells(),(function(t){var n=Fr(t.element());Ju(n,"colspan",t.colspan(),1),Ju(n,"rowspan",t.rowspan(),1),fn(e,n)})),e}));return e},Qu={render:Ku,copy:$u},Zu=function(t,e){var n=wt(t,e);return void 0===n||""===n?[]:n.split(" ")},ta=function(t,e,n){var r=Zu(t,e),o=r.concat([n]);return pt(t,e,o.join(" ")),!0},ea=function(t,e,n){var r=B(Zu(t,e),(function(t){return t!==n}));return r.length>0?pt(t,e,r.join(" ")):xt(t,e),!1},na=function(t){return void 0!==t.dom().classList},ra=function(t){return Zu(t,"class")},oa=function(t,e){return ta(t,"class",e)},ia=function(t,e){return ea(t,"class",e)},ua=function(t,e){na(t)?t.dom().classList.add(e):oa(t,e)},aa=function(t){var e=na(t)?t.dom().classList:ra(t);0===e.length&&xt(t,"class")},ca=function(t,e){if(na(t)){var n=t.dom().classList;n.remove(e)}else ia(t,e);aa(t)},la=function(t,e){return na(t)&&t.dom().classList.contains(e)},fa=function(t,e){for(var n=[],r=0;r<t;r++)n.push(e(r));return n},sa=function(t,e){for(var n=[],r=t;r<e;r++)n.push(r);return n},da=function(t,e){if(e<0||e>=t.length-1)return h.none();var n=t[e].fold((function(){var n=j(t.slice(0,e));return Xu(n,(function(t,e){return t.map((function(t){return{value:t,delta:e+1}}))}))}),(function(t){return h.some({value:t,delta:0})})),r=t[e+1].fold((function(){var n=t.slice(e+1);return Xu(n,(function(t,e){return t.map((function(t){return{value:t,delta:e+1}}))}))}),(function(t){return h.some({value:t,delta:1})}));return n.bind((function(t){return r.map((function(e){var n=e.delta+t.delta;return Math.abs(e.value-t.value)/n}))}))},ma=function(t){var e=t.grid(),n=sa(0,e.columns()),r=sa(0,e.rows());return E(n,(function(e){var n=function(){return L(r,(function(n){return vr.getAt(t,n,e).filter((function(t){return t.column()===e})).fold(o([]),(function(t){return[t]}))}))},i=function(t){return 1===t.colspan()},u=function(){return vr.getAt(t,0,e)};return ga(n,i,u)}))},ga=function(t,e,n){var r=t(),o=W(r,e),i=o.orThunk((function(){return h.from(r[0]).orThunk(n)}));return i.map((function(t){return t.element()}))},ha=function(t){var e=t.grid(),n=sa(0,e.rows()),r=sa(0,e.columns());return E(n,(function(e){var n=function(){return L(r,(function(n){return vr.getAt(t,e,n).filter((function(t){return t.row()===e})).fold(o([]),(function(t){return[t]}))}))},i=function(t){return 1===t.rowspan()},u=function(){return vr.getAt(t,e,0)};return ga(n,i,u)}))},va={columns:ma,rows:ha},pa=function(t){var e=t.replace(/\./g,"-"),n=function(t){return e+"-"+t};return{resolve:n}},ba=pa("ephox-snooker"),wa={resolve:ba.resolve},ya=function(t,e,n,r,o){var i=It.fromTag("div");return Ht(i,{position:"absolute",left:e-r/2+"px",top:n+"px",height:o+"px",width:r+"px"}),bt(i,{"data-column":t,role:"presentation"}),i},xa=function(t,e,n,r,o){var i=It.fromTag("div");return Ht(i,{position:"absolute",left:e+"px",top:n-o/2+"px",height:o+"px",width:r+"px"}),bt(i,{"data-row":t,role:"presentation"}),i},Ca={col:ya,row:xa},Ra=wa.resolve("resizer-bar"),Sa=wa.resolve("resizer-rows"),Ta=wa.resolve("resizer-cols"),Da=7,Aa=function(t){var e=In(t.parent(),"."+Ra);k(e,vn)},Oa=function(t,e,n){var r=t.origin();k(e,(function(e,o){e.each((function(e){var o=n(r,e);ua(o,Ra),fn(t.parent(),o)}))}))},Ea=function(t,e,n,r){Oa(t,e,(function(t,e){var o=Ca.col(e.col(),e.x()-t.left(),n.top()-t.top(),Da,r);return ua(o,Ta),o}))},ka=function(t,e,n,r){Oa(t,e,(function(t,e){var o=Ca.row(e.row(),n.left()-t.left(),e.y()-t.top(),r,Da);return ua(o,Sa),o}))},Na=function(t,e,n,r,o,i){var u=Tu(e),a=n.length>0?o.positions(n,e):[];ka(t,a,u,Hi(e));var c=r.length>0?i.positions(r,e):[];Ea(t,c,u,Li(e))},Ba=function(t,e,n,r){Aa(t);var o=lr.fromTable(e),i=vr.generate(o),u=va.rows(i),a=va.columns(i);Na(t,e,u,a,n,r)},Pa=function(t,e){var n=In(t.parent(),"."+Ra);k(n,e)},Ia=function(t){Pa(t,(function(t){jt(t,"display","none")}))},Wa=function(t){Pa(t,(function(t){jt(t,"display","block")}))},Ma=function(t){return la(t,Sa)},_a=function(t){return la(t,Ta)},La={refresh:Ba,hide:Ia,show:Wa,destroy:Aa,isRowBar:Ma,isColBar:_a},Fa=function(t,e,n){var r=t.cells(),o=r.slice(0,e),i=r.slice(e),u=o.concat([n]).concat(i);return Ha(t,u)},ja=function(t,e,n){var r=t.cells();r[e]=n},Ha=function(t,e){return Dn(e,t.section())},za=function(t,e){var n=t.cells(),r=E(n,e);return Dn(r,t.section())},Ua=function(t,e){return t.cells()[e]},qa=function(t,e){return Ua(t,e).element()},Ga=function(t){return t.cells().length},Va={addCell:Fa,setCells:Ha,mutateCell:ja,getCell:Ua,getCellElement:qa,mapCells:za,cellLength:Ga},Ya=function(t,e){return E(t,(function(t){return Va.getCell(t,e)}))},Xa=function(t,e){return t[e]},Ja=function(t,e){if(0===t.length)return 0;var n=t[0],r=M(t,(function(t){return!e(n.element(),t.element())}));return r.fold((function(){return t.length}),(function(t){return t}))},Ka=function(t,e,n,r){var i=Xa(t,e).cells().slice(n),u=Ja(i,r),a=Ya(t,n).slice(e),c=Ja(a,r);return{colspan:o(u),rowspan:o(c)}},$a={subgrid:Ka},Qa=function(t,e){var n=E(t,(function(t,e){return E(t.cells(),(function(t,e){return!1}))})),r=function(t,e,r,o){for(var i=t;i<t+r;i++)for(var u=e;u<e+o;u++)n[i][u]=!0};return E(t,(function(o,i){var u=L(o.cells(),(function(o,u){if(!1===n[i][u]){var a=$a.subgrid(t,i,u,e);return r(i,u,a.rowspan(),a.colspan()),[xn(o.element(),a.rowspan(),a.colspan(),o.isNew())]}return[]}));return An(u,o.section())}))},Za=function(t,e,n){for(var r=[],o=0;o<t.grid().rows();o++){for(var i=[],u=0;u<t.grid().columns();u++){var a=vr.getAt(t,o,u).map((function(t){return Sn(t.element(),n)})).getOrThunk((function(){return Sn(e.gap(),!0)}));i.push(a)}var c=Dn(i,t.all()[o].section());r.push(c)}return r},tc={toDetails:Qa,toGrid:Za},ec=function(t,e){return tc.toGrid(t,e,!1)},nc=function(t,e){var n=function(t){var n=Xu(t,(function(t){return Ze(t.element()).map((function(t){var e=Ze(t).isNone();return Sn(t,e)}))}));return n.getOrThunk((function(){return Sn(e.row(),!0)}))};return E(t,(function(t){var e=n(t.details());return Tn(e.element(),t.details(),t.section(),e.isNew())}))},rc=function(t,e){var n=tc.toDetails(t,Ge);return nc(n,e)},oc=function(t,e){var n=_(E(t.all(),(function(t){return t.cells()})));return W(n,(function(t){return Ge(e,t.element())}))},ic=function(t,e,n,r,i){return function(u,a,c,l,f){var s=lr.fromTable(a),d=vr.generate(s),m=e(d,c).map((function(e){var n=ec(d,l),r=t(n,e,Ge,i(l)),u=rc(r.grid(),l);return{grid:o(u),cursor:r.cursor}}));return m.fold((function(){return h.none()}),(function(t){var e=Qu.render(a,t.grid());return n(a,t.grid(),f),r(a),La.refresh(u,a,Hu.height,f),h.some({cursor:t.cursor,newRows:e.newRows,newCells:e.newCells})}))}},uc=function(t,e){return ur.cell(e.element()).bind((function(e){return oc(t,e)}))},ac=function(t,e){return ur.cell(e.element()).bind((function(n){return oc(t,n).map((function(t){var n=Vu(Vu({},t),{generators:e.generators,clipboard:e.clipboard});return n}))}))},cc=function(t,e){var n=E(e.selection(),(function(e){return ur.cell(e).bind((function(e){return oc(t,e)}))})),r=Yu(n);return r.length>0?h.some({cells:r,generators:e.generators,clipboard:e.clipboard}):h.none()},lc=function(t,e){return e.mergable()},fc=function(t,e){return e.unmergable()},sc=function(t,e){var n=E(e.selection(),(function(e){return ur.cell(e).bind((function(e){return oc(t,e)}))})),r=Yu(n);return r.length>0?h.some(r):h.none()},dc=function(t){var e=function(e){return t===e},n=function(e){return dc(t)},r=function(e){return dc(t)},i=function(e){return dc(e(t))},u=function(e){return dc(t)},a=function(e){e(t)},c=function(e){return e(t)},s=function(e,n){return n(t)},d=function(e){return e(t)},m=function(e){return e(t)},g=function(){return h.some(t)};return{is:e,isValue:f,isError:l,getOr:o(t),getOrThunk:o(t),getOrDie:o(t),or:n,orThunk:r,fold:s,map:i,mapError:u,each:a,bind:c,exists:d,forall:m,toOption:g}},mc=function(t){var e=function(t){return t()},r=function(){return c(String(t))()},o=function(t){return t},u=function(t){return t()},a=function(e){return mc(t)},s=function(e){return mc(e(t))},d=function(e){return mc(t)},m=function(e,n){return e(t)};return{is:l,isValue:l,isError:f,getOr:i,getOrThunk:e,getOrDie:r,or:o,orThunk:u,fold:m,map:a,mapError:s,each:n,bind:d,exists:l,forall:f,toOption:h.none}},gc=function(t,e){return t.fold((function(){return mc(e)}),dc)},hc={value:dc,error:mc,fromOption:gc},vc=function(t,e,n){if(t.row()>=e.length||t.column()>Va.cellLength(e[0]))return hc.error("invalid start address out of table bounds, row: "+t.row()+", column: "+t.column());var r=e.slice(t.row()),i=r[0].cells().slice(t.column()),u=Va.cellLength(n[0]),a=n.length;return hc.value({rowDelta:o(r.length-a),colDelta:o(i.length-u)})},pc=function(t,e){var n=Va.cellLength(t[0]),r=Va.cellLength(e[0]);return{rowDelta:o(0),colDelta:o(n-r)}},bc=function(t,e){return E(t,(function(){return Sn(e.cell(),!0)}))},wc=function(t,e,n){return t.concat(fa(e,(function(e){return Va.setCells(t[t.length-1],bc(t[t.length-1].cells(),n))})))},yc=function(t,e,n){return E(t,(function(t){return Va.setCells(t,t.cells().concat(bc(sa(0,e),n)))}))},xc=function(t,e,n){var r=e.colDelta()<0?yc:i,o=e.rowDelta()<0?wc:i,u=r(t,Math.abs(e.colDelta()),n),a=o(u,Math.abs(e.rowDelta()),n);return a},Cc={measure:vc,measureWidth:pc,tailor:xc},Rc=function(t,e,n,r){if(0===t.length)return t;for(var o=e.startRow();o<=e.finishRow();o++)for(var i=e.startCol();i<=e.finishCol();i++)Va.mutateCell(t[o],i,Sn(r(),!1));return t},Sc=function(t,e,n,r){for(var o=!0,i=0;i<t.length;i++)for(var u=0;u<Va.cellLength(t[0]);u++){var a=Va.getCellElement(t[i],u),c=n(a,e);!0===c&&!1===o?Va.mutateCell(t[i],u,Sn(r(),!0)):!0===c&&(o=!1)}return t},Tc=function(t,e){return I(t,(function(t,n){return O(t,(function(t){return e(t.element(),n.element())}))?t:t.concat([n])}),[])},Dc=function(t,e,n,r){if(e>0&&e<t.length){var o=t[e-1].cells(),i=Tc(o,n);k(i,(function(o){for(var i=h.none(),u=function(e){for(var u=function(u){var a=t[e].cells()[u],c=n(a.element(),o.element());c&&(i.isNone()&&(i=h.some(r())),i.each((function(n){Va.mutateCell(t[e],u,Sn(n,!0))})))},a=0;a<Va.cellLength(t[0]);a++)u(a)},a=e;a<t.length;a++)u(a)}))}return t},Ac={merge:Rc,unmerge:Sc,splitRows:Dc},Oc=function(t,e,n,r){var o=Va.getCell(t[e],n),i=u(r,o.element()),a=t[e];return t.length>1&&Va.cellLength(a)>1&&(n>0&&i(Va.getCellElement(a,n-1))||n<a.cells().length-1&&i(Va.getCellElement(a,n+1))||e>0&&i(Va.getCellElement(t[e-1],n))||e<t.length-1&&i(Va.getCellElement(t[e+1],n)))},Ec=function(t,e,n,r,o){for(var i=t.row(),u=t.column(),a=n.length,c=Va.cellLength(n[0]),l=i+a,f=u+c,s=i;s<l;s++)for(var d=u;d<f;d++){Oc(e,s,d,o)&&Ac.unmerge(e,Va.getCellElement(e[s],d),o,r.cell);var m=Va.getCellElement(n[s-i],d-u),g=r.replace(m);Va.mutateCell(e[s],d,Sn(g,!0))}return e},kc=function(t,e,n,r,o){var i=Cc.measure(t,e,n);return i.map((function(i){var u=Cc.tailor(e,i,r);return Ec(t,u,n,r,o)}))},Nc=function(t,e,n,r,o){Ac.splitRows(e,t,o,r.cell);var i=Cc.measureWidth(n,e),u=Cc.tailor(n,i,r),a=Cc.measureWidth(e,u),c=Cc.tailor(e,a,r);return c.slice(0,t).concat(u).concat(c.slice(t,c.length))},Bc={merge:kc,insert:Nc},Pc=function(t,e,n,r,o){var i=t.slice(0,e),u=t.slice(e),a=Va.mapCells(t[n],(function(n,i){var u=e>0&&e<t.length&&r(Va.getCellElement(t[e-1],i),Va.getCellElement(t[e],i)),a=u?Va.getCell(t[e],i):Sn(o(n.element(),r),!0);return a}));return i.concat([a]).concat(u)},Ic=function(t,e,n,r,o){return E(t,(function(t){var i=e>0&&e<Va.cellLength(t)&&r(Va.getCellElement(t,e-1),Va.getCellElement(t,e)),u=i?Va.getCell(t,e):Sn(o(Va.getCellElement(t,n),r),!0);return Va.addCell(t,e,u)}))},Wc=function(t,e,n,r,o){var i=n+1;return E(t,(function(t,u){var a=u===e,c=a?Sn(o(Va.getCellElement(t,n),r),!0):Va.getCell(t,n);return Va.addCell(t,i,c)}))},Mc=function(t,e,n,r,o){var i=e+1,u=t.slice(0,i),a=t.slice(i),c=Va.mapCells(t[e],(function(t,e){var i=e===n;return i?Sn(o(t.element(),r),!0):t}));return u.concat([c]).concat(a)},_c=function(t,e,n){var r=E(t,(function(t){var r=t.cells().slice(0,e).concat(t.cells().slice(n+1));return Dn(r,t.section())}));return B(r,(function(t){return t.cells().length>0}))},Lc=function(t,e,n){return t.slice(0,e).concat(t.slice(n+1))},Fc={insertRowAt:Pc,insertColumnAt:Ic,splitCellIntoColumns:Wc,splitCellIntoRows:Mc,deleteRowsAt:Lc,deleteColumnsAt:_c},jc=function(t,e,n,r){var o=function(t){return O(e,(function(e){return n(t.element(),e.element())}))};return E(t,(function(t){return Va.mapCells(t,(function(t){return o(t)?Sn(r(t.element(),n),!0):t}))}))},Hc=function(t,e,n,r){return void 0!==Va.getCellElement(t[e],n)&&e>0&&r(Va.getCellElement(t[e-1],n),Va.getCellElement(t[e],n))},zc=function(t,e,n){return e>0&&n(Va.getCellElement(t,e-1),Va.getCellElement(t,e))},Uc=function(t,e,n,r){var o=L(t,(function(r,o){var i=Hc(t,o,e,n)||zc(r,e,n);return i?[]:[Va.getCell(r,e)]}));return jc(t,o,n,r)},qc=function(t,e,n,r){var o=t[e],i=L(o.cells(),(function(r,i){var u=Hc(t,e,i,n)||zc(o,i,n);return u?[]:[r]}));return jc(t,i,n,r)},Gc={replaceColumn:Uc,replaceRow:qc},Vc=vi.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),Yc=Vu({},Vc),Xc=function(t,e){return 0===t.length?Yc.none():1===t.length?Yc.only(0):0===e?Yc.left(0,1):e===t.length-1?Yc.right(e-1,e):e>0&&e<t.length-1?Yc.middle(e-1,e,e+1):Yc.none()},Jc=function(t,e,n,r){var i=t.slice(0),u=Xc(t,e),a=function(t){return E(t,o(0))},c=o(a(i)),l=function(t){return r.singleColumnWidth(i[t],n)},f=function(t,e){if(n>=0){var o=Math.max(r.minCellWidth(),i[e]-n);return a(i.slice(0,t)).concat([n,o-i[e]]).concat(a(i.slice(e+1)))}var u=Math.max(r.minCellWidth(),i[t]+n),c=i[t]-u;return a(i.slice(0,t)).concat([u-i[t],c]).concat(a(i.slice(e+1)))},s=f,d=function(t,e,n){return f(e,n)},m=function(t,e){if(n>=0)return a(i.slice(0,e)).concat([n]);var o=Math.max(r.minCellWidth(),i[e]+n);return a(i.slice(0,e)).concat([o-i[e]])};return u.fold(c,l,s,d,m)},Kc={determine:Jc},$c=function(t,e){return yt(t,e)&&parseInt(wt(t,e),10)>1},Qc=function(t){return $c(t,"colspan")},Zc=function(t){return $c(t,"rowspan")},tl=function(t,e){return parseInt(zt(t,e),10)},el={hasColspan:Qc,hasRowspan:Zc,minWidth:o(10),minHeight:o(10),getInt:tl},nl=function(t,e,n){return qt(t,e).fold((function(){return n(t)+"px"}),(function(t){return t}))},rl=function(t,e){return nl(t,"width",(function(t){return bu.getPixelWidth(t,e)}))},ol=function(t){return nl(t,"height",bu.getHeight)},il=function(t,e,n,r,o){var i=va.columns(t),u=E(i,(function(t){return t.map(e.edge)}));return E(i,(function(t,e){var i=t.filter(a(el.hasColspan));return i.fold((function(){var t=da(u,e);return r(t)}),(function(t){return n(t,o)}))}))},ul=function(t){return t.map((function(t){return t+"px"})).getOr("")},al=function(t,e,n){return il(t,e,rl,ul,n)},cl=function(t,e,n){return il(t,e,bu.getPercentageWidth,(function(t){return t.fold((function(){return n.minCellWidth()}),(function(t){return t/n.pixelWidth()*100}))}),n)},ll=function(t,e,n){return il(t,e,bu.getPixelWidth,(function(t){return t.getOrThunk(n.minCellWidth)}),n)},fl=function(t,e,n,r){var o=va.rows(t),i=E(o,(function(t){return t.map(e.edge)}));return E(o,(function(t,e){var o=t.filter(a(el.hasRowspan));return o.fold((function(){var t=da(i,e);return r(t)}),(function(t){return n(t)}))}))},sl=function(t,e){return fl(t,e,bu.getHeight,(function(t){return t.getOrThunk(el.minHeight)}))},dl=function(t,e){return fl(t,e,ol,ul)},ml={getRawWidths:al,getPixelWidths:ll,getPercentageWidths:cl,getPixelHeights:sl,getRawHeights:dl},gl=function(t,e,n){for(var r=0,o=t;o<e;o++)r+=void 0!==n[o]?n[o]:0;return r},hl=function(t,e){var n=vr.justCells(t);return E(n,(function(t){var n=gl(t.column(),t.column()+t.colspan(),e);return{element:t.element,width:o(n),colspan:t.colspan}}))},vl=function(t,e){var n=vr.justCells(t);return E(n,(function(t){var n=gl(t.row(),t.row()+t.rowspan(),e);return{element:t.element,height:o(n),rowspan:t.rowspan}}))},pl=function(t,e){return E(t.all(),(function(t,n){return{element:t.element,height:o(e[n])}}))},bl={recalculateWidth:hl,recalculateHeight:vl,matchRowHeight:pl},wl=function(t,e){var n=parseFloat(t),r=ji(e),i=function(t){return t/r*100},u=function(t,e){return[100-t]},a=function(){return el.minWidth()/r*100},c=function(t,e,r){var o=r/100,i=o*n;bu.setPercentageWidth(t,n+i)};return{width:o(n),pixelWidth:o(r),getWidths:ml.getPercentageWidths,getCellDelta:i,singleColumnWidth:u,minCellWidth:a,setElementWidth:bu.setPercentageWidth,setTableWidth:c}},yl=function(t){var e=i,n=function(t,e){var n=Math.max(el.minWidth(),t+e);return[n-t]},r=function(t,e,n){var r=P(e,(function(t,e){return t+e}),0);bu.setPixelWidth(t,r)};return{width:o(t),pixelWidth:o(t),getWidths:ml.getPixelWidths,getCellDelta:e,singleColumnWidth:n,minCellWidth:el.minWidth,setElementWidth:bu.setPixelWidth,setTableWidth:r}},xl=function(t,e){var n=bu.percentageBasedSizeRegex().exec(e);if(null!==n)return wl(n[1],t);var r=bu.pixelBasedSizeRegex().exec(e);if(null!==r){var o=parseInt(r[1],10);return yl(o)}var i=ji(t);return yl(i)},Cl=function(t){var e=bu.getRawWidth(t);return e.fold((function(){var e=ji(t);return yl(e)}),(function(e){return xl(t,e)}))},Rl={getTableSize:Cl},Sl=function(t){return vr.generate(t)},Tl=function(t){return P(t,(function(t,e){return t+e}),0)},Dl=function(t){var e=lr.fromTable(t);return Sl(e)},Al=function(t,e,n,r){var o=Rl.getTableSize(t),i=o.getCellDelta(e),u=Dl(t),a=o.getWidths(u,r,o),c=Kc.determine(a,n,i,o),l=E(c,(function(t,e){return t+a[e]})),f=bl.recalculateWidth(u,l);k(f,(function(t){o.setElementWidth(t.element(),t.width())})),n===u.grid().columns()-1&&o.setTableWidth(t,l,i)},Ol=function(t,e,n,r){var o=Dl(t),i=ml.getPixelHeights(o,r),u=E(i,(function(t,r){return n===r?Math.max(e+t,el.minHeight()):t})),a=bl.recalculateHeight(o,u),c=bl.matchRowHeight(o,u);k(c,(function(t){bu.setHeight(t.element(),t.height())})),k(a,(function(t){bu.setHeight(t.element(),t.height())}));var l=Tl(u);bu.setHeight(t,l)},El=function(t,e,n){var r=Rl.getTableSize(t),o=Sl(e),i=r.getWidths(o,n,r),u=bl.recalculateWidth(o,i);k(u,(function(t){r.setElementWidth(t.element(),t.width())})),u.length>0&&r.setTableWidth(t,i,r.getCellDelta(0))},kl={adjustWidth:Al,adjustHeight:Ol,adjustWidthTo:El},Nl=function(t){var e=t,n=function(){return e},r=function(t){e=t},o=function(){return Nl(n())};return{get:n,set:r,clone:o}},Bl=function(t,e){return Pl(t,e,{validate:x,label:"function"})},Pl=function(t,e,n){if(0===e.length)throw new Error("You must specify at least one required field.");return K("required",e),Q(e),function(r){var o=z(r),i=F(e,(function(t){return A(o,t)}));i||X(e,o),t(e,o);var u=B(e,(function(t){return!n.validate(r[t],t)}));return u.length>0&&$(u,n.label),r}},Il=function(t,e){var n=B(e,(function(e){return!A(t,e)}));n.length>0&&J(n)},Wl=function(t){return Bl(Il,t)},Ml=Wl(["cell","row","replace","gap"]),_l=function(t){var e=yt(t,"colspan")?parseInt(wt(t,"colspan"),10):1,n=yt(t,"rowspan")?parseInt(wt(t,"rowspan"),10):1;return{element:o(t),colspan:o(e),rowspan:o(n)}},Ll=function(t,e){void 0===e&&(e=_l),Ml(t);var n=Nl(h.none()),r=function(e){return t.cell(e)},o=function(t){var n=e(t);return r(n)},i=function(t){var e=o(t);return n.get().isNone()&&n.set(h.some(e)),u=h.some({item:t,replacement:e}),e},u=h.none(),a=function(t,e){return u.fold((function(){return i(t)}),(function(n){return e(t,n.item)?n.replacement:i(t)}))};return{getOrInit:a,cursor:n.get}},Fl=function(t,e){return function(n){var r=Nl(h.none());Ml(n);var o=[],i=function(t,e){return W(o,(function(n){return e(n.item,t)}))},u=function(i){var u={scope:t},a=n.replace(i,e,u);return o.push({item:i,sub:a}),r.get().isNone()&&r.set(h.some(a)),a},a=function(t,e){return i(t,e).fold((function(){return u(t)}),(function(n){return e(t,n.item)?n.sub:u(t)}))};return{replaceOrInit:a,cursor:r.get}}},jl=function(t){Ml(t);var e=Nl(h.none()),n=function(n){return e.get().isNone()&&e.set(h.some(n)),function(){var e=t.cell({element:o(n),colspan:o(1),rowspan:o(1)});return Gt(e,"width"),Gt(n,"width"),e}};return{combine:n,cursor:e.get}},Hl={modification:Ll,transform:Fl,merging:jl},zl=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Ul=function(t,e){var n=t.property().name(e);return A(["ol","ul"],n)},ql=function(t,e){var n=t.property().name(e);return A(zl,n)},Gl=function(t,e){var n=t.property().name(e);return A(["address","pre","p","h1","h2","h3","h4","h5","h6"],n)},Vl=function(t,e){var n=t.property().name(e);return A(["h1","h2","h3","h4","h5","h6"],n)},Yl=function(t,e){return A(["div","li","td","th","blockquote","body","caption"],t.property().name(e))},Xl=function(t,e){return A(["br","img","hr","input"],t.property().name(e))},Jl=function(t,e){return"iframe"===t.property().name(e)},Kl=function(t,e){return!(ql(t,e)||Xl(t,e))&&"li"!==t.property().name(e)},$l={isBlock:ql,isList:Ul,isFormatting:Gl,isHeading:Vl,isContainer:Yl,isEmptyTag:Xl,isFrame:Jl,isInline:Kl},Ql=po(),Zl=function(t){return $l.isBlock(Ql,t)},tf=function(t){return $l.isList(Ql,t)},ef=function(t){return $l.isFormatting(Ql,t)},nf=function(t){return $l.isHeading(Ql,t)},rf=function(t){return $l.isContainer(Ql,t)},of=function(t){return $l.isEmptyTag(Ql,t)},uf=function(t){return $l.isFrame(Ql,t)},af=function(t){return $l.isInline(Ql,t)},cf={isBlock:Zl,isList:tf,isFormatting:ef,isHeading:nf,isContainer:rf,isEmptyTag:of,isFrame:uf,isInline:af},lf=function(t){var e=function(t){return"br"===ft(t)},n=function(t){return F(t,(function(t){return e(t)||ht(t)&&0===Dr(t).trim().length}))},r=function(t){return"li"===ft(t)||Mn(t,cf.isList).isSome()},o=function(t){return nn(t).map((function(t){return!!cf.isBlock(t)||!!cf.isEmptyTag(t)&&"img"!==ft(t)})).getOr(!1)},i=function(t){return Wr(t).bind((function(n){var i=o(n);return Ze(n).map((function(o){return!0===i||r(o)||e(n)||cf.isBlock(o)&&!Ge(t,o)?[]:[It.fromTag("br")]}))})).getOr([])},u=function(){var e=L(t,(function(t){var e=rn(t);return n(e)?[]:e.concat(i(t))}));return 0===e.length?[It.fromTag("br")]:e},a=u();hn(t[0]),gn(t[0],a)},ff={merge:lf},sf=function(t){var e=ur.cells(t);0===e.length&&vn(t)},df=V("grid","cursor"),mf=function(t,e,n){return gf(t,e,n).orThunk((function(){return gf(t,0,0)}))},gf=function(t,e,n){return h.from(t[e]).bind((function(t){return h.from(t.cells()[n]).bind((function(t){return h.from(t.element())}))}))},hf=function(t,e,n){return df(t,gf(t,e,n))},vf=function(t){return I(t,(function(t,e){return O(t,(function(t){return t.row()===e.row()}))?t:t.concat([e])}),[]).sort((function(t,e){return t.row()-e.row()}))},pf=function(t){return I(t,(function(t,e){return O(t,(function(t){return t.column()===e.column()}))?t:t.concat([e])}),[]).sort((function(t,e){return t.column()-e.column()}))},bf=function(t,e,n,r){var o=e.row(),i=e.row(),u=Fc.insertRowAt(t,i,o,n,r.getOrInit);return hf(u,i,e.column())},wf=function(t,e,n,r){var o=e[0].row(),i=e[0].row(),u=vf(e),a=I(u,(function(t,e){return Fc.insertRowAt(t,i,o,n,r.getOrInit)}),t);return hf(a,i,e[0].column())},yf=function(t,e,n,r){var o=e.row(),i=e.row()+e.rowspan(),u=Fc.insertRowAt(t,i,o,n,r.getOrInit);return hf(u,i,e.column())},xf=function(t,e,n,r){var o=vf(e),i=o[o.length-1].row(),u=o[o.length-1].row()+o[o.length-1].rowspan(),a=I(o,(function(t,e){return Fc.insertRowAt(t,u,i,n,r.getOrInit)}),t);return hf(a,u,e[0].column())},Cf=function(t,e,n,r){var o=e.column(),i=e.column(),u=Fc.insertColumnAt(t,i,o,n,r.getOrInit);return hf(u,e.row(),i)},Rf=function(t,e,n,r){var o=pf(e),i=o[0].column(),u=o[0].column(),a=I(o,(function(t,e){return Fc.insertColumnAt(t,u,i,n,r.getOrInit)}),t);return hf(a,e[0].row(),u)},Sf=function(t,e,n,r){var o=e.column(),i=e.column()+e.colspan(),u=Fc.insertColumnAt(t,i,o,n,r.getOrInit);return hf(u,e.row(),i)},Tf=function(t,e,n,r){var o=e[e.length-1].column(),i=e[e.length-1].column()+e[e.length-1].colspan(),u=pf(e),a=I(u,(function(t,e){return Fc.insertColumnAt(t,i,o,n,r.getOrInit)}),t);return hf(a,e[0].row(),i)},Df=function(t,e,n,r){var o=Gc.replaceRow(t,e.row(),n,r.replaceOrInit);return hf(o,e.row(),e.column())},Af=function(t,e,n,r){var o=Gc.replaceColumn(t,e.column(),n,r.replaceOrInit);return hf(o,e.row(),e.column())},Of=function(t,e,n,r){var o=Gc.replaceRow(t,e.row(),n,r.replaceOrInit);return hf(o,e.row(),e.column())},Ef=function(t,e,n,r){var o=Gc.replaceColumn(t,e.column(),n,r.replaceOrInit);return hf(o,e.row(),e.column())},kf=function(t,e,n,r){var o=Fc.splitCellIntoColumns(t,e.row(),e.column(),n,r.getOrInit);return hf(o,e.row(),e.column())},Nf=function(t,e,n,r){var o=Fc.splitCellIntoRows(t,e.row(),e.column(),n,r.getOrInit);return hf(o,e.row(),e.column())},Bf=function(t,e,n,r){var o=pf(e),i=Fc.deleteColumnsAt(t,o[0].column(),o[o.length-1].column()),u=mf(i,e[0].row(),e[0].column());return df(i,u)},Pf=function(t,e,n,r){var o=vf(e),i=Fc.deleteRowsAt(t,o[0].row(),o[o.length-1].row()),u=mf(i,e[0].row(),e[0].column());return df(i,u)},If=function(t,e,n,r){var i=e.cells();ff.merge(i);var u=Ac.merge(t,e.bounds(),n,o(i[0]));return df(u,h.from(i[0]))},Wf=function(t,e,n,r){var o=P(e,(function(t,e){return Ac.unmerge(t,e,n,r.combine(e))}),t);return df(o,h.from(e[0]))},Mf=function(t,e,n,r){var o=function(t,e){var n=lr.fromTable(t),r=vr.generate(n);return tc.toGrid(r,e,!0)},i=o(e.clipboard(),e.generators()),u=wn(e.row(),e.column()),a=Bc.merge(u,t,i,e.generators(),n);return a.fold((function(){return df(t,h.some(e.element()))}),(function(t){var n=mf(t,e.row(),e.column());return df(t,n)}))},_f=function(t,e,n){var r=lr.fromPastedRows(t,n),o=vr.generate(r);return tc.toGrid(o,e,!0)},Lf=function(t,e,n,r){var o=t[e.cells[0].row()],i=e.cells[0].row(),u=_f(e.clipboard(),e.generators(),o),a=Bc.insert(i,t,u,e.generators(),n),c=mf(a,e.cells[0].row(),e.cells[0].column());return df(a,c)},Ff=function(t,e,n,r){var o=t[e.cells[0].row()],i=e.cells[e.cells.length-1].row()+e.cells[e.cells.length-1].rowspan(),u=_f(e.clipboard(),e.generators(),o),a=Bc.insert(i,t,u,e.generators(),n),c=mf(a,e.cells[0].row(),e.cells[0].column());return df(a,c)},jf=kl.adjustWidthTo,Hf={insertRowBefore:ic(bf,uc,n,n,Hl.modification),insertRowsBefore:ic(wf,sc,n,n,Hl.modification),insertRowAfter:ic(yf,uc,n,n,Hl.modification),insertRowsAfter:ic(xf,sc,n,n,Hl.modification),insertColumnBefore:ic(Cf,uc,jf,n,Hl.modification),insertColumnsBefore:ic(Rf,sc,jf,n,Hl.modification),insertColumnAfter:ic(Sf,uc,jf,n,Hl.modification),insertColumnsAfter:ic(Tf,sc,jf,n,Hl.modification),splitCellIntoColumns:ic(kf,uc,jf,n,Hl.modification),splitCellIntoRows:ic(Nf,uc,n,n,Hl.modification),eraseColumns:ic(Bf,sc,jf,sf,Hl.modification),eraseRows:ic(Pf,sc,n,sf,Hl.modification),makeColumnHeader:ic(Af,uc,n,n,Hl.transform("row","th")),unmakeColumnHeader:ic(Ef,uc,n,n,Hl.transform(null,"td")),makeRowHeader:ic(Df,uc,n,n,Hl.transform("col","th")),unmakeRowHeader:ic(Of,uc,n,n,Hl.transform(null,"td")),mergeCells:ic(If,lc,n,n,Hl.merging),unmergeCells:ic(Wf,fc,jf,n,Hl.merging),pasteCells:ic(Mf,ac,jf,n,Hl.modification),pasteRowsBefore:ic(Lf,cc,n,n,Hl.modification),pasteRowsAfter:ic(Ff,cc,n,n,Hl.modification)},zf=function(t){return It.fromDom(t.getBody())},Uf=function(t){return t.getBoundingClientRect().width},qf=function(t){return t.getBoundingClientRect().height},Gf=function(t){return function(e){return Ge(e,zf(t))}},Vf=function(t){return t?t.replace(/px$/,""):""},Yf=function(t){return/^[0-9]+$/.test(t)&&(t+="px"),t},Xf=function(t){var e=In(t,"td[data-mce-style],th[data-mce-style]");xt(t,"data-mce-style"),k(e,(function(t){xt(t,"data-mce-style")}))},Jf=function(t){return"rtl"===zt(t,"direction")?"rtl":"ltr"},Kf={isRtl:o(!1)},$f={isRtl:o(!0)},Qf=function(t){var e=Jf(t);return"rtl"===e?$f:Kf},Zf={directionAt:Qf},ts=["tableprops","tabledelete","|","tableinsertrowbefore","tableinsertrowafter","tabledeleterow","|","tableinsertcolbefore","tableinsertcolafter","tabledeletecol"],es={"border-collapse":"collapse",width:"100%"},ns={border:"1"},rs=function(t){return t.getParam("table_default_attributes",ns,"object")},os=function(t){return t.getParam("table_default_styles",es,"object")},is=function(t){return t.getParam("table_resize_bars",!0,"boolean")},us=function(t){return t.getParam("table_tab_navigation",!0,"boolean")},as=function(t){return t.getParam("table_cell_advtab",!0,"boolean")},cs=function(t){return t.getParam("table_row_advtab",!0,"boolean")},ls=function(t){return t.getParam("table_advtab",!0,"boolean")},fs=function(t){return t.getParam("table_appearance_options",!0,"boolean")},ss=function(t){return t.getParam("table_grid",!0,"boolean")},ds=function(t){return t.getParam("table_style_by_css",!1,"boolean")},ms=function(t){return t.getParam("table_cell_class_list",[],"array")},gs=function(t){return t.getParam("table_row_class_list",[],"array")},hs=function(t){return t.getParam("table_class_list",[],"array")},vs=function(t){return t.getParam("color_picker_callback")},ps=function(t){return!1===t.getParam("table_responsive_width")},bs=function(t){var e=t.getParam("table_clone_elements");return b(e)?h.some(e.split(/[ ,]/)):Array.isArray(e)?h.some(e):h.none()},ws=function(t){var e=t.getParam("object_resizing",!0);return"table"===e||e},ys=function(t){var e=t.getParam("table_toolbar",ts);return""===e||!1===e?[]:b(e)?e.split(/[ ,]/):w(e)?e:[]},xs=function(t,e){return t.fire("newrow",{node:e})},Cs=function(t,e){return t.fire("newcell",{node:e})},Rs=function(t,e,n,r){t.fire("ObjectResizeStart",{target:e,width:n,height:r})},Ss=function(t,e,n,r){t.fire("ObjectResized",{target:e,width:n,height:r})},Ts=function(t,e){var r=function(t){return"table"===ft(zf(t))},o=function(e){var n=Gu.getGridSize(e);return!1===r(t)||n.rows()>1},i=function(e){var n=Gu.getGridSize(e);return!1===r(t)||n.columns()>1},u=bs(t),a=function(e,n,r,o){return function(i,a){Xf(i);var c=o(),l=It.fromDom(t.getDoc()),f=Uu(Zf.directionAt),s=Jr.cellOperations(r,l,u);return n(i)?e(c,i,a,s,f).bind((function(e){return k(e.newRows(),(function(e){xs(t,e.dom())})),k(e.newCells(),(function(e){Cs(t,e.dom())})),e.cursor().map((function(e){var n=t.dom.createRng();return n.setStart(e.dom(),0),n.setEnd(e.dom(),0),n}))})):h.none()}},c=a(Hf.eraseRows,o,n,e),l=a(Hf.eraseColumns,i,n,e),s=a(Hf.insertRowsBefore,f,n,e),d=a(Hf.insertRowsAfter,f,n,e),m=a(Hf.insertColumnsBefore,f,yu.halve,e),g=a(Hf.insertColumnsAfter,f,yu.halve,e),v=a(Hf.mergeCells,f,n,e),p=a(Hf.unmergeCells,f,n,e),b=a(Hf.pasteRowsBefore,f,n,e),w=a(Hf.pasteRowsAfter,f,n,e),y=a(Hf.pasteCells,f,n,e);return{deleteRow:c,deleteColumn:l,insertRowsBefore:s,insertRowsAfter:d,insertColumnsBefore:m,insertColumnsAfter:g,mergeCells:v,unmergeCells:p,pasteRowsBefore:b,pasteRowsAfter:w,pasteCells:y}},Ds=function(t,e,n){var r=lr.fromTable(t),o=vr.generate(r),i=sc(o,e);return i.map((function(t){var e=tc.toGrid(o,n,!1),r=e.slice(t[0].row(),t[t.length-1].row()+t[t.length-1].rowspan()),i=rc(r,n);return Qu.copy(i)}))},As={copyRows:Ds},Os=tinymce.util.Tools.resolve("tinymce.util.Tools"),Es=function(t,e,n){var r,o=t.select("td,th",e),i=function(e,r){for(var o=0;o<r.length;o++){var i=t.getStyle(r[o],n);if("undefined"===typeof e&&(e=i),e!==i)return""}return e};return r=i(r,o),r},ks=function(t,e,n){n&&t.formatter.apply("align"+n,{},e)},Ns=function(t,e,n){n&&t.formatter.apply("valign"+n,{},e)},Bs=function(t,e){Os.each("left center right".split(" "),(function(n){t.formatter.remove("align"+n,{},e)}))},Ps=function(t,e){Os.each("top middle bottom".split(" "),(function(n){t.formatter.remove("valign"+n,{},e)}))},Is={applyAlign:ks,applyVAlign:Ns,unApplyAlign:Bs,unApplyVAlign:Ps,getTDTHOverallStyle:Es},Ws=function(t,e,n){var r=function(t,n){return n=n||[],Os.each(t,(function(t){var o={text:t.text||t.title};t.menu?o.menu=r(t.menu):(o.value=t.value,e&&e(o)),n.push(o)})),n};return r(t,n||[])};function Ms(e){return e.control.rootControl.find("#style")[0].getEl().isEqualNode(t.document.activeElement)}var _s=function(t,e){Ms(e)?Fs(t,e):Ls(t,e)},Ls=function(t,e){var n=t.dom,r=e.control.rootControl,o=r.toJSON(),i=n.parseStyle(o.style);i["border-style"]=o.borderStyle,i["border-color"]=o.borderColor,i["background-color"]=o.backgroundColor,i.width=o.width?Yf(o.width):"",i.height=o.height?Yf(o.height):"",r.find("#style").value(n.serializeStyle(n.parseStyle(n.serializeStyle(i))))},Fs=function(t,e){var n=t.dom,r=e.control.rootControl,o=r.toJSON(),i=n.parseStyle(o.style);r.find("#borderStyle").value(i["border-style"]||""),r.find("#borderColor").value(i["border-color"]||""),r.find("#backgroundColor").value(i["background-color"]||""),r.find("#width").value(i.width||""),r.find("#height").value(i.height||"")},js=function(t,e){var n=t.parseStyle(t.getAttrib(e,"style")),r={};return n["border-style"]&&(r.borderStyle=n["border-style"]),n["border-color"]&&(r.borderColor=n["border-color"]),n["background-color"]&&(r.backgroundColor=n["background-color"]),r.style=t.serializeStyle(n),r},Hs=function(t){var e=function(){var e=vs(t);if(e)return function(n){return e.call(t,(function(t){n.control.value(t).fire("change")}),n.control.value())}};return{title:"Advanced",type:"form",defaults:{onchange:u(Ls,t)},items:[{label:"Style",name:"style",type:"textbox",onchange:u(Fs,t)},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border style",type:"listbox",name:"borderStyle",width:90,onselect:u(Ls,t),values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{label:"Border color",type:"colorbox",name:"borderColor",onaction:e()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:e()}]}]}},zs={createStyleForm:Hs,buildListItems:Ws,updateStyleField:Ls,extractAdvancedStyles:js,updateAdvancedFields:Fs,syncAdvancedStyleFields:_s},Us=function(t,e){delete t.dataset.mceStyle,t.style.cssText+=";"+e},qs=function(t,e){var n=t.dom,r={width:n.getStyle(e,"width")||n.getAttrib(e,"width"),height:n.getStyle(e,"height")||n.getAttrib(e,"height"),scope:n.getAttrib(e,"scope"),class:n.getAttrib(e,"class"),type:e.nodeName.toLowerCase(),style:"",align:"",valign:""};return Os.each("left center right".split(" "),(function(n){t.formatter.matchNode(e,"align"+n)&&(r.align=n)})),Os.each("top middle bottom".split(" "),(function(n){t.formatter.matchNode(e,"valign"+n)&&(r.valign=n)})),as(t)&&Os.extend(r,zs.extractAdvancedStyles(n,e)),r},Gs=function(t,e,n){var r,o=t.dom;function i(t,n,r){(1===e.length||r)&&o.setAttrib(t,n,r)}function u(t,n,r){(1===e.length||r)&&o.setStyle(t,n,r)}as(t)&&zs.syncAdvancedStyleFields(t,n),r=n.control.rootControl.toJSON(),t.undoManager.transact((function(){Os.each(e,(function(n){i(n,"scope",r.scope),1===e.length?i(n,"style",r.style):Us(n,r.style),i(n,"class",r.class),u(n,"width",Yf(r.width)),u(n,"height",Yf(r.height)),r.type&&n.nodeName.toLowerCase()!==r.type&&(n=o.rename(n,r.type)),1===e.length&&(Is.unApplyAlign(t,n),Is.unApplyVAlign(t,n)),r.align&&Is.applyAlign(t,n,r.align),r.valign&&Is.applyVAlign(t,n,r.valign)})),t.focus()}))},Vs=function(t){var e,n,r,o=[];if(o=t.dom.select("td[data-mce-selected],th[data-mce-selected]"),e=t.dom.getParent(t.selection.getStart(),"td,th"),!o.length&&e&&o.push(e),e=e||o[0],e){n=o.length>1?{width:"",height:"",scope:"",class:"",align:"",valign:"",style:"",type:e.nodeName.toLowerCase()}:qs(t,e),ms(t).length>0&&(r={name:"class",type:"listbox",label:"Class",values:zs.buildListItems(ms(t),(function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({block:"td",classes:[e.value]})})}))});var i={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width",onchange:u(zs.updateStyleField,t)},{label:"Height",name:"height",onchange:u(zs.updateStyleField,t)},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},r]};as(t)?t.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:n,body:[{title:"General",type:"form",items:i},zs.createStyleForm(t)],onsubmit:u(Gs,t,o)}):t.windowManager.open({title:"Cell properties",data:n,body:i,onsubmit:u(Gs,t,o)})}},Ys={open:Vs},Xs=function(t,e){var n=t.dom,r={height:n.getStyle(e,"height")||n.getAttrib(e,"height"),scope:n.getAttrib(e,"scope"),class:n.getAttrib(e,"class"),align:"",style:"",type:e.parentNode.nodeName.toLowerCase()};return Os.each("left center right".split(" "),(function(n){t.formatter.matchNode(e,"align"+n)&&(r.align=n)})),cs(t)&&Os.extend(r,zs.extractAdvancedStyles(n,e)),r},Js=function(t,e,n){var r=t.getParent(e,"table"),o=e.parentNode,i=t.select(n,r)[0];i||(i=t.create(n),r.firstChild?"CAPTION"===r.firstChild.nodeName?t.insertAfter(i,r.firstChild):r.insertBefore(i,r.firstChild):r.appendChild(i)),i.appendChild(e),o.hasChildNodes()||t.remove(o)};function Ks(t,e,n,r){var o=t.dom;function i(t,n,r){(1===e.length||r)&&o.setAttrib(t,n,r)}function u(t,n,r){(1===e.length||r)&&o.setStyle(t,n,r)}cs(t)&&zs.syncAdvancedStyleFields(t,r);var a=r.control.rootControl.toJSON();t.undoManager.transact((function(){Os.each(e,(function(e){i(e,"scope",a.scope),i(e,"style",a.style),i(e,"class",a.class),u(e,"height",Yf(a.height)),a.type!==e.parentNode.nodeName.toLowerCase()&&Js(t.dom,e,a.type),a.align!==n.align&&(Is.unApplyAlign(t,e),Is.applyAlign(t,e,a.align))})),t.focus()}))}var $s=function(t){var e,n,r,o,i,a,c=t.dom,l=[];e=c.getParent(t.selection.getStart(),"table"),n=c.getParent(t.selection.getStart(),"td,th"),Os.each(e.rows,(function(t){Os.each(t.cells,(function(e){if(c.getAttrib(e,"data-mce-selected")||e===n)return l.push(t),!1}))})),r=l[0],r&&(i=l.length>1?{height:"",scope:"",style:"",class:"",align:"",type:r.parentNode.nodeName.toLowerCase()}:Xs(t,r),gs(t).length>0&&(o={name:"class",type:"listbox",label:"Class",values:zs.buildListItems(gs(t),(function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({block:"tr",classes:[e.value]})})}))}),a={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},o]},cs(t)?t.windowManager.open({title:"Row properties",data:i,bodyType:"tabpanel",body:[{title:"General",type:"form",items:a},zs.createStyleForm(t)],onsubmit:u(Ks,t,l,i)}):t.windowManager.open({title:"Row properties",data:i,body:a,onsubmit:u(Ks,t,l,i)}))},Qs={open:$s},Zs=tinymce.util.Tools.resolve("tinymce.Env"),td={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},percentages:!0},ed=function(){return It.fromTag("table")},nd=function(){return It.fromTag("tbody")},rd=function(){return It.fromTag("tr")},od=function(){return It.fromTag("th")},id=function(){return It.fromTag("td")},ud=function(t,e,n,r,o){void 0===o&&(o=td);var i=ed();Ht(i,o.styles),bt(i,o.attributes);var u=nd();fn(i,u);for(var a=[],c=0;c<t;c++){for(var l=rd(),f=0;f<e;f++){var s=c<n||f<r?od():id();f<r&&pt(s,"scope","row"),c<n&&pt(s,"scope","col"),fn(s,It.fromTag("br")),o.percentages&&jt(s,"width",100/e+"%"),fn(l,s)}a.push(l)}return gn(u,a),i},ad=function(t){return t.dom().innerHTML},cd=function(t){var e=It.fromTag("div"),n=It.fromDom(t.dom().cloneNode(!0));return fn(e,n),ad(e)},ld=function(t,e){t.selection.select(e.dom(),!0),t.selection.collapse(!0)},fd=function(t,e){zn(e,"td,th").each(u(ld,t))},sd=function(t,e){k(In(e,"tr"),(function(e){xs(t,e.dom()),k(In(e,"th,td"),(function(e){Cs(t,e.dom())}))}))},dd=function(t){return b(t)&&-1!==t.indexOf("%")},md=function(t,e,n){var r=os(t),o={styles:r,attributes:rs(t),percentages:dd(r.width)&&!ps(t)},i=ud(n,e,0,0,o);pt(i,"data-mce-id","__mce");var u=cd(i);return t.insertContent(u),zn(zf(t),'table[data-mce-id="__mce"]').map((function(e){return ps(t)&&jt(e,"width",zt(e,"width")),xt(e,"data-mce-id"),sd(t,e),fd(t,e),e.dom()})).getOr(null)},gd={insert:md};function hd(t,e,n,r){if("TD"===e.tagName||"TH"===e.tagName)t.setStyle(e,n,r);else if(e.children)for(var o=0;o<e.children.length;o++)hd(t,e.children[o],n,r)}var vd=function(t,e){var n=t.dom,r={width:n.getStyle(e,"width")||n.getAttrib(e,"width"),height:n.getStyle(e,"height")||n.getAttrib(e,"height"),cellspacing:n.getStyle(e,"border-spacing")||n.getAttrib(e,"cellspacing"),cellpadding:n.getAttrib(e,"data-mce-cell-padding")||n.getAttrib(e,"cellpadding")||Is.getTDTHOverallStyle(t.dom,e,"padding"),border:n.getAttrib(e,"data-mce-border")||n.getAttrib(e,"border")||Is.getTDTHOverallStyle(t.dom,e,"border"),borderColor:n.getAttrib(e,"data-mce-border-color"),caption:!!n.select("caption",e)[0],class:n.getAttrib(e,"class")};return Os.each("left center right".split(" "),(function(n){t.formatter.matchNode(e,"align"+n)&&(r.align=n)})),ls(t)&&Os.extend(r,zs.extractAdvancedStyles(n,e)),r},pd=function(t,e,n){var r=t.dom,o={},i={};if(o.class=n.class,i.height=Yf(n.height),r.getAttrib(e,"width")&&!ds(t)?o.width=Vf(n.width):i.width=Yf(n.width),ds(t)?(i["border-width"]=Yf(n.border),i["border-spacing"]=Yf(n.cellspacing),Os.extend(o,{"data-mce-border-color":n.borderColor,"data-mce-cell-padding":n.cellpadding,"data-mce-border":n.border})):Os.extend(o,{border:n.border,cellpadding:n.cellpadding,cellspacing:n.cellspacing}),ds(t)&&e.children)for(var u=0;u<e.children.length;u++)hd(r,e.children[u],{"border-width":Yf(n.border),"border-color":n.borderColor,padding:Yf(n.cellpadding)});n.style?Os.extend(i,r.parseStyle(n.style)):i=Os.extend({},r.parseStyle(r.getAttrib(e,"style")),i),o.style=r.serializeStyle(i),r.setAttribs(e,o)},bd=function(t,e,n){var r,o,i=t.dom;ls(t)&&zs.syncAdvancedStyleFields(t,n),o=n.control.rootControl.toJSON(),!1===o.class&&delete o.class,t.undoManager.transact((function(){e||(e=gd.insert(t,o.cols||1,o.rows||1)),pd(t,e,o),r=i.select("caption",e)[0],r&&!o.caption&&i.remove(r),!r&&o.caption&&(r=i.create("caption"),r.innerHTML=Zs.ie?" ":'<br data-mce-bogus="1"/>',e.insertBefore(r,e.firstChild)),Is.unApplyAlign(t,e),o.align&&Is.applyAlign(t,e,o.align),t.focus(),t.addVisual()}))},wd=function(t,e){var n,r,o,i,a,c=t.dom,l={};!0===e?(n=c.getParent(t.selection.getStart(),"table"),n&&(l=vd(t,n))):(r={label:"Cols",name:"cols"},o={label:"Rows",name:"rows"}),hs(t).length>0&&(l.class&&(l.class=l.class.replace(/\s*mce\-item\-table\s*/g,"")),i={name:"class",type:"listbox",label:"Class",values:zs.buildListItems(hs(t),(function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({block:"table",classes:[e.value]})})}))}),a={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:fs(t)?[r,o,{label:"Width",name:"width",onchange:u(zs.updateStyleField,t)},{label:"Height",name:"height",onchange:u(zs.updateStyleField,t)},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[r,o,{label:"Width",name:"width",onchange:u(zs.updateStyleField,t)},{label:"Height",name:"height",onchange:u(zs.updateStyleField,t)}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},i]},ls(t)?t.windowManager.open({title:"Table properties",data:l,bodyType:"tabpanel",body:[{title:"General",type:"form",items:a},zs.createStyleForm(t)],onsubmit:u(bd,t,n)}):t.windowManager.open({title:"Table properties",data:l,body:a,onsubmit:u(bd,t,n)})},yd={open:wd},xd=Os.each,Cd=function(t,e,r,o,i){var c=Gf(t),l=function(){d().orThunk(s).each((function(e){var n=ur.table(e,c);n.filter(a(c)).each((function(e){var n=It.fromText("");cn(e,n),vn(e);var r=t.dom.createRng();r.setStart(n.dom(),0),r.setEnd(n.dom(),0),t.selection.setRng(r)}))}))},f=function(e){return function(){return h.from(t.dom.getParent(t.selection.getStart(),e)).map(It.fromDom)}},s=f("caption"),d=f("th,td"),m=function(t){return ur.table(t,c)},g=function(t){return{width:Uf(t.dom()),height:Uf(t.dom())}},v=function(t,e,n){var r=g(n);e.width===r.width&&e.height===r.height||(Rs(t,n.dom(),e.width,e.height),Ss(t,n.dom(),r.width,r.height))},p=function(e){d().each((function(n){m(n).each((function(i){var u=Ei.forMenu(o,i,n),a=g(i);e(i,u).each((function(e){v(t,a,i),t.selection.setRng(e),t.focus(),r.clear(i),Xf(i)}))}))}))},b=function(e){return d().bind((function(e){return m(e).bind((function(r){var i=It.fromDom(t.getDoc()),u=Ei.forMenu(o,r,e),a=Jr.cellOperations(n,i,h.none());return As.copyRows(r,u,a)}))}))},w=function(e){i.get().each((function(n){var i=E(n,(function(t){return Fr(t)}));d().each((function(n){m(n).each((function(u){var a=It.fromDom(t.getDoc()),c=Jr.paste(a),l=Ei.pasteRows(o,u,n,i,c);e(u,l).each((function(e){t.selection.setRng(e),t.focus(),r.clear(u)}))}))}))}))};xd({mceTableSplitCells:function(){p(e.unmergeCells)},mceTableMergeCells:function(){p(e.mergeCells)},mceTableInsertRowBefore:function(){p(e.insertRowsBefore)},mceTableInsertRowAfter:function(){p(e.insertRowsAfter)},mceTableInsertColBefore:function(){p(e.insertColumnsBefore)},mceTableInsertColAfter:function(){p(e.insertColumnsAfter)},mceTableDeleteCol:function(){p(e.deleteColumn)},mceTableDeleteRow:function(){p(e.deleteRow)},mceTableCutRow:function(t){i.set(b()),p(e.deleteRow)},mceTableCopyRow:function(t){i.set(b())},mceTablePasteRowBefore:function(t){w(e.pasteRowsBefore)},mceTablePasteRowAfter:function(t){w(e.pasteRowsAfter)},mceTableDelete:l},(function(e,n){t.addCommand(n,e)})),xd({mceInsertTable:u(yd.open,t),mceTableProps:u(yd.open,t,!0),mceTableRowProps:u(Qs.open,t),mceTableCellProps:u(Ys.open,t)},(function(e,n){t.addCommand(n,(function(t,n){e(n)}))}))},Rd={registerCommands:Cd},Sd=function(t){var e=h.from(t.dom().documentElement).map(It.fromDom).getOr(t);return{parent:o(e),view:o(t),origin:o(Cu(0,0))}},Td=function(t,e){var n=function(){return Tu(e)};return{parent:o(e),view:o(t),origin:n}},Dd=function(t,e){return{parent:o(e),view:o(t),origin:o(Cu(0,0))}},Ad={only:Sd,detached:Td,body:Dd},Od=function(t){var e=V.apply(null,t),n=[],r=function(t){if(void 0===t)throw new Error("Event bind error: undefined handler");n.push(t)},o=function(t){n=B(n,(function(e){return e!==t}))},i=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o=e.apply(null,t);k(n,(function(t){t(o)}))};return{bind:r,unbind:o,trigger:i}},Ed=function(t){var e=q(t,(function(t){return{bind:t.bind,unbind:t.unbind}})),n=q(t,(function(t){return t.trigger}));return{registry:e,trigger:n}},kd={create:Ed},Nd=function(t,e,n,r,i,u,a){return{target:o(t),x:o(e),y:o(n),stop:r,prevent:i,kill:u,raw:o(a)}},Bd=function(t,e){return function(n){if(t(n)){var o=It.fromDom(n.target),i=function(){n.stopPropagation()},u=function(){n.preventDefault()},a=r(u,i),c=Nd(o,n.clientX,n.clientY,i,u,a,n);e(c)}}},Pd=function(t,e,n,r,o){var i=Bd(n,r);return t.dom().addEventListener(e,i,o),{unbind:u(Wd,t,e,i,o)}},Id=function(t,e,n,r){return Pd(t,e,n,r,!1)},Wd=function(t,e,n,r){t.dom().removeEventListener(e,n,r)},Md=o(!0),_d=function(t,e,n){return Id(t,e,Md,n)},Ld=Object.prototype.hasOwnProperty,Fd=function(t,e){return e},jd=function(t){return function(){for(var e=new Array(arguments.length),n=0;n<e.length;n++)e[n]=arguments[n];if(0===e.length)throw new Error("Can't merge zero objects");for(var r={},o=0;o<e.length;o++){var i=e[o];for(var u in i)Ld.call(i,u)&&(r[u]=t(r[u],i[u]))}return r}},Hd=jd(Fd),zd=pa("ephox-dragster"),Ud={resolve:zd.resolve},qd=function(t){var e=Hd({layerClass:Ud.resolve("blocker")},t),n=It.fromTag("div");pt(n,"role","presentation"),Ht(n,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),ua(n,Ud.resolve("blocker")),ua(n,e.layerClass);var r=function(){return n},o=function(){vn(n)};return{element:r,destroy:o}},Gd=Wl(["compare","extract","mutate","sink"]),Vd=Wl(["element","start","stop","destroy"]),Yd=Wl(["forceDrop","drop","move","delayDrop"]),Xd=function(t,e){return Cu(e.left()-t.left(),e.top()-t.top())},Jd=function(t){return h.some(Cu(t.x(),t.y()))},Kd=function(t,e){t.mutate(e.left(),e.top())},$d=function(t,e){var n=qd(e),r=_d(n.element(),"mousedown",t.forceDrop),o=_d(n.element(),"mouseup",t.drop),i=_d(n.element(),"mousemove",t.move),u=_d(n.element(),"mouseout",t.delayDrop),a=function(){n.destroy(),o.unbind(),i.unbind(),u.unbind(),r.unbind()},c=function(t){fn(t,n.element())},l=function(){vn(n.element())};return Vd({element:n.element,start:c,stop:l,destroy:a})},Qd=Gd({compare:Xd,extract:Jd,sink:$d,mutate:Kd}),Zd=function(e,n){var r=null,o=function(){null!==r&&(t.clearTimeout(r),r=null)},i=function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];null!==r&&t.clearTimeout(r),r=t.setTimeout((function(){e.apply(null,o),r=null}),n)};return{cancel:o,throttle:i}};function tm(){var t=h.none(),e=function(){t=h.none()},n=function(e,n){var r=t.map((function(t){return e.compare(t,n)}));return t=h.some(n),r},r=function(t,e){var r=e.extract(t);r.each((function(t){var r=n(e,t);r.each((function(t){o.trigger.move(t)}))}))},o=kd.create({move:Od(["info"])});return{onEvent:r,reset:e,events:o.registry}}function em(){return{onEvent:n,reset:n}}function nm(){var t=em(),e=tm(),n=t,r=function(){n.reset(),n=e},o=function(){n.reset(),n=t},i=function(t,e){n.onEvent(t,e)},u=function(){return n===e};return{on:r,off:o,isOn:u,onEvent:i,events:e.events}}var rm=function(t,e,n){var r=!1,o=kd.create({start:Od([]),stop:Od([])}),i=nm(),u=function(){m.stop(),i.isOn()&&(i.off(),o.trigger.stop())},a=Zd(u,200),c=function(t){m.start(t),i.on(),o.trigger.start()},l=function(t){a.cancel(),i.onEvent(t,e)};i.events.move.bind((function(n){e.mutate(t,n.info())}));var f=function(){r=!0},s=function(){r=!1},d=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];r&&t.apply(null,e)}},m=e.sink(Yd({forceDrop:u,drop:d(u),move:d(l),delayDrop:d(a.throttle)}),n),g=function(){m.destroy()};return{element:m.element,go:c,on:f,off:s,destroy:g,events:o.registry}},om={setup:rm},im=function(t,e){void 0===e&&(e={});var n=void 0!==e.mode?e.mode:Qd;return om.setup(t,n,e)},um={transform:im},am=function(){var t=kd.create({drag:Od(["xDelta","yDelta"])}),e=function(e,n){t.trigger.drag(e,n)};return{mutate:e,events:t.registry}},cm=function(){var t=kd.create({drag:Od(["xDelta","yDelta","target"])}),e=h.none(),n=am();n.events.drag.bind((function(n){e.each((function(e){t.trigger.drag(n.xDelta(),n.yDelta(),e)}))}));var r=function(t){e=h.some(t)},o=function(){return e};return{assign:r,get:o,mutate:n.mutate,events:t.registry}},lm=function(t){return"true"===wt(t,"contenteditable")},fm=function(t,e){return Un(t,"[contenteditable]",e)},sm=wa.resolve("resizer-bar-dragging"),dm=function(t,e,n){var r=cm(),o=um.transform(r,{}),i=h.none(),a=function(t,e){return h.from(wt(t,e))};r.events.drag.bind((function(t){a(t.target(),"data-row").each((function(e){var n=el.getInt(t.target(),"top");jt(t.target(),"top",n+t.yDelta()+"px")})),a(t.target(),"data-column").each((function(e){var n=el.getInt(t.target(),"left");jt(t.target(),"left",n+t.xDelta()+"px")}))}));var c=function(t,e){var n=el.getInt(t,e),r=parseInt(wt(t,"data-initial-"+e),10);return n-r};o.events.stop.bind((function(){r.get().each((function(r){i.each((function(o){a(r,"data-row").each((function(t){var e=c(r,"top");xt(r,"data-initial-top"),p.trigger.adjustHeight(o,e,parseInt(t,10))})),a(r,"data-column").each((function(t){var e=c(r,"left");xt(r,"data-initial-left"),p.trigger.adjustWidth(o,e,parseInt(t,10))})),La.refresh(t,o,n,e)}))}))}));var l=function(e,n){p.trigger.startAdjust(),r.assign(e),pt(e,"data-initial-"+n,parseInt(zt(e,n),10)),ua(e,sm),jt(e,"opacity","0.2"),o.go(t.parent())},f=_d(t.parent(),"mousedown",(function(t){La.isRowBar(t.target())&&l(t.target(),"top"),La.isColBar(t.target())&&l(t.target(),"left")})),s=function(e){return Ge(e,t.view())},d=function(t){return Un(t,"table",s).filter((function(t){return fm(t,s).exists(lm)}))},m=_d(t.view(),"mouseover",(function(r){d(r.target()).fold((function(){Wt(r.target())&&La.destroy(t)}),(function(r){i=h.some(r),La.refresh(t,r,n,e)}))})),g=function(){f.unbind(),m.unbind(),o.destroy(),La.destroy(t)},v=function(r){La.refresh(t,r,n,e)},p=kd.create({adjustHeight:Od(["table","delta","row"]),adjustWidth:Od(["table","delta","column"]),startAdjust:Od([])});return{destroy:g,refresh:v,on:o.on,off:o.off,hideBars:u(La.hide,t),showBars:u(La.show,t),events:p.registry}},mm=function(t,e){var n=Hu.height,r=dm(t,e,n),o=kd.create({beforeResize:Od(["table"]),afterResize:Od(["table"]),startDrag:Od([])});return r.events.adjustHeight.bind((function(t){o.trigger.beforeResize(t.table());var e=n.delta(t.delta(),t.table());kl.adjustHeight(t.table(),e,t.row(),n),o.trigger.afterResize(t.table())})),r.events.startAdjust.bind((function(t){o.trigger.startDrag()})),r.events.adjustWidth.bind((function(t){o.trigger.beforeResize(t.table());var n=e.delta(t.delta(),t.table());kl.adjustWidth(t.table(),n,t.column(),e),o.trigger.afterResize(t.table())})),{on:r.on,off:r.off,hideBars:r.hideBars,showBars:r.showBars,destroy:r.destroy,events:o.registry}},gm={create:mm},hm=function(){var t=It.fromTag("div");return Ht(t,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),fn(Mt(),t),t},vm=function(t,e){return t.inline?Ad.body(zf(t),hm()):Ad.only(It.fromDom(t.getDoc()))},pm=function(t,e){t.inline&&vn(e.parent())},bm={get:vm,remove:pm},wm=function(t){var e,n,r=h.none(),o=h.none(),i=h.none(),u=/(\d+(\.\d+)?)%/,a=function(t){return"TABLE"===t.nodeName},c=function(e){return t.dom.getStyle(e,"width")||t.dom.getAttrib(e,"width")},l=function(){return o},f=function(){return i.getOr(Ad.only(It.fromDom(t.getBody())))},s=function(){o.each((function(t){t.destroy()})),i.each((function(e){bm.remove(t,e)}))};return t.on("init",(function(){var e=Uu(Zf.directionAt),n=bm.get(t);if(i=h.some(n),ws(t)&&is(t)){var u=gm.create(n,e);u.on(),u.events.startDrag.bind((function(e){r=h.some(t.selection.getRng())})),u.events.beforeResize.bind((function(e){var n=e.table().dom();Rs(t,n,Uf(n),qf(n))})),u.events.afterResize.bind((function(e){var n=e.table(),o=n.dom();Xf(n),r.each((function(e){t.selection.setRng(e),t.focus()})),Ss(t,o,Uf(o),qf(o)),t.undoManager.add()})),o=h.some(u)}})),t.on("ObjectResizeStart",(function(t){var r=t.target;a(r)&&(e=t.width,n=c(r))})),t.on("ObjectResized",(function(r){var o=r.target;if(a(o)){var i=o;if(u.test(n)){var c=parseFloat(u.exec(n)[1]),l=r.width*c/e;t.dom.setStyle(i,"width",l+"%")}else{var f=[];Os.each(i.rows,(function(e){Os.each(e.cells,(function(e){var n=t.dom.getStyle(e,"width",!0);f.push({cell:e,width:n})}))})),Os.each(f,(function(e){t.dom.setStyle(e.cell,"width",e.width),t.dom.setAttrib(e.cell,"width",null)}))}}})),{lazyResize:l,lazyWire:f,destroy:s}},ym=vi.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),xm=function(t){return void 0===t&&(t=void 0),ym.none(t)},Cm=Vu(Vu({},ym),{none:xm}),Rm=function(t,e){return ur.table(t,e).bind((function(e){var n=ur.cells(e),r=M(n,(function(e){return Ge(t,e)}));return r.map((function(t){return{index:o(t),all:o(n)}}))}))},Sm=function(t,e){var n=Rm(t,e);return n.fold((function(){return Cm.none(t)}),(function(e){return e.index()+1<e.all().length?Cm.middle(t,e.all()[e.index()+1]):Cm.last(t)}))},Tm=function(t,e){var n=Rm(t,e);return n.fold((function(){return Cm.none()}),(function(e){return e.index()-1>=0?Cm.middle(t,e.all()[e.index()-1]):Cm.first(t)}))},Dm={next:Sm,prev:Tm},Am=V("start","soffset","finish","foffset"),Om={create:Am},Em=vi.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),km=function(t,e,n,r){return t.fold(e,n,r)},Nm=function(t){return t.fold(i,i,i)},Bm=Em.before,Pm=Em.on,Im=Em.after,Wm={before:Bm,on:Pm,after:Im,cata:km,getStart:Nm},Mm=vi.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),_m=function(t){return Mm.exact(t.start(),t.soffset(),t.finish(),t.foffset())},Lm=function(t){return t.match({domRange:function(t){return It.fromDom(t.startContainer)},relative:function(t,e){return Wm.getStart(t)},exact:function(t,e,n,r){return t}})},Fm=Mm.domRange,jm=Mm.relative,Hm=Mm.exact,zm=function(t){var e=Lm(t);return Qe(e)},Um=Om.create,qm={domRange:Fm,relative:jm,exact:Hm,exactFromRange:_m,getWin:zm,range:Um},Gm=function(t,e){var n=t.document.createRange();return Vm(n,e),n},Vm=function(t,e){t.selectNodeContents(e.dom())},Ym=function(t,e){e.fold((function(e){t.setStartBefore(e.dom())}),(function(e,n){t.setStart(e.dom(),n)}),(function(e){t.setStartAfter(e.dom())}))},Xm=function(t,e){e.fold((function(e){t.setEndBefore(e.dom())}),(function(e,n){t.setEnd(e.dom(),n)}),(function(e){t.setEndAfter(e.dom())}))},Jm=function(t,e,n){var r=t.document.createRange();return Ym(r,e),Xm(r,n),r},Km=function(t,e,n,r,o){var i=t.document.createRange();return i.setStart(e.dom(),n),i.setEnd(r.dom(),o),i},$m=function(t){return{left:o(t.left),top:o(t.top),right:o(t.right),bottom:o(t.bottom),width:o(t.width),height:o(t.height)}},Qm=function(t){var e=t.getClientRects(),n=e.length>0?e[0]:t.getBoundingClientRect();return n.width>0||n.height>0?h.some(n).map($m):h.none()},Zm=vi.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),tg=function(t,e,n){return e(It.fromDom(n.startContainer),n.startOffset,It.fromDom(n.endContainer),n.endOffset)},eg=function(t,e){return e.match({domRange:function(t){return{ltr:o(t),rtl:h.none}},relative:function(e,n){return{ltr:Ot((function(){return Jm(t,e,n)})),rtl:Ot((function(){return h.some(Jm(t,n,e))}))}},exact:function(e,n,r,o){return{ltr:Ot((function(){return Km(t,e,n,r,o)})),rtl:Ot((function(){return h.some(Km(t,r,o,e,n))}))}}})},ng=function(t,e){var n=e.ltr();if(n.collapsed){var r=e.rtl().filter((function(t){return!1===t.collapsed}));return r.map((function(t){return Zm.rtl(It.fromDom(t.endContainer),t.endOffset,It.fromDom(t.startContainer),t.startOffset)})).getOrThunk((function(){return tg(t,Zm.ltr,n)}))}return tg(t,Zm.ltr,n)},rg=function(t,e){var n=eg(t,e);return ng(t,n)},og=function(t,e){var n=rg(t,e);return n.match({ltr:function(e,n,r,o){var i=t.document.createRange();return i.setStart(e.dom(),n),i.setEnd(r.dom(),o),i},rtl:function(e,n,r,o){var i=t.document.createRange();return i.setStart(r.dom(),o),i.setEnd(e.dom(),n),i}})},ig=function(t,e,n,r,o){if(0===o)return 0;if(e===r)return o-1;for(var i=r,u=1;u<o;u++){var a=t(u),c=Math.abs(e-a.left);if(n<=a.bottom){if(n<a.top||c>i)return u-1;i=c}}return 0},ug=function(t,e,n){return e>=t.left&&e<=t.right&&n>=t.top&&n<=t.bottom},ag=function(t,e,n,r,o){var i=function(n){var r=t.dom().createRange();return r.setStart(e.dom(),n),r.collapse(!0),r},u=function(t){var e=i(t);return e.getBoundingClientRect()},a=Dr(e).length,c=ig(u,n,r,o.right,a);return i(c)},cg=function(t,e,n,r){var o=t.dom().createRange();o.selectNode(e.dom());var i=o.getClientRects(),u=Xu(i,(function(t){return ug(t,n,r)?h.some(t):h.none()}));return u.map((function(o){return ag(t,e,n,r,o)}))},lg=function(t,e,n,r){var o=t.dom().createRange(),i=rn(e);return Xu(i,(function(e){return o.selectNode(e.dom()),ug(o.getBoundingClientRect(),n,r)?fg(t,e,n,r):h.none()}))},fg=function(t,e,n,r){return ht(e)?cg(t,e,n,r):lg(t,e,n,r)},sg=function(t,e,n,r){var o=t.dom().createRange();o.selectNode(e.dom());var i=o.getBoundingClientRect(),u=Math.max(i.left,Math.min(i.right,n)),a=Math.max(i.top,Math.min(i.bottom,r));return fg(t,e,u,a)},dg=!0,mg=!1,gg=function(t,e){return e-t.left<t.right-e?dg:mg},hg=function(t,e,n){var r=t.dom().createRange();return r.selectNode(e.dom()),r.collapse(n),r},vg=function(t,e,n){var r=t.dom().createRange();r.selectNode(e.dom());var o=r.getBoundingClientRect(),i=gg(o,n),u=i===dg?Ir:Wr;return u(e).map((function(e){return hg(t,e,i)}))},pg=function(t,e,n){var r=e.dom().getBoundingClientRect(),o=gg(r,n);return h.some(hg(t,e,o))},bg=function(t,e,n){var r=0===rn(e).length?pg:vg;return r(t,e,n)},wg=function(t,e,n){return h.from(t.dom().caretPositionFromPoint(e,n)).bind((function(e){if(null===e.offsetNode)return h.none();var n=t.dom().createRange();return n.setStart(e.offsetNode,e.offset),n.collapse(),h.some(n)}))},yg=function(t,e,n){return h.from(t.dom().caretRangeFromPoint(e,n))},xg=function(t,e,n,r){var o=t.dom().createRange();o.selectNode(e.dom());var i=o.getBoundingClientRect(),u=Math.max(i.left,Math.min(i.right,n)),a=Math.max(i.top,Math.min(i.bottom,r));return sg(t,e,u,a)},Cg=function(t,e,n){return It.fromPoint(t,e,n).bind((function(r){var o=function(){return bg(t,r,e)};return 0===rn(r).length?o():xg(t,r,e,n).orThunk(o)}))},Rg=document.caretPositionFromPoint?wg:document.caretRangeFromPoint?yg:Cg,Sg=function(t,e,n){var r=It.fromDom(t.document);return Rg(r,e,n).map((function(t){return Om.create(It.fromDom(t.startContainer),t.startOffset,It.fromDom(t.endContainer),t.endOffset)}))},Tg=function(t,e){var n=ft(t);return"input"===n?Wm.after(t):A(["br","img"],n)?0===e?Wm.before(t):Wm.after(t):Wm.on(t,e)},Dg=function(t,e){var n=t.fold(Wm.before,Tg,Wm.after),r=e.fold(Wm.before,Tg,Wm.after);return qm.relative(n,r)},Ag=function(t,e,n,r){var o=Tg(t,e),i=Tg(n,r);return qm.relative(o,i)},Og=function(t){return t.match({domRange:function(t){var e=It.fromDom(t.startContainer),n=It.fromDom(t.endContainer);return Ag(e,t.startOffset,n,t.endOffset)},relative:Dg,exact:Ag})},Eg=function(t,e,n,r){var o=$e(t),i=o.dom().createRange();return i.setStart(t.dom(),e),i.setEnd(n.dom(),r),i},kg=function(t,e,n,r){var o=Eg(t,e,n,r),i=Ge(t,n)&&e===r;return o.collapsed&&!i},Ng=function(t,e){h.from(t.getSelection()).each((function(t){t.removeAllRanges(),t.addRange(e)}))},Bg=function(t,e,n,r,o){var i=Km(t,e,n,r,o);Ng(t,i)},Pg=function(t,e,n,r,o,i){e.collapse(n.dom(),r),e.extend(o.dom(),i)},Ig=function(t,e){return rg(t,e).match({ltr:function(e,n,r,o){Bg(t,e,n,r,o)},rtl:function(e,n,r,o){var i=t.getSelection();if(i.setBaseAndExtent)i.setBaseAndExtent(e.dom(),n,r.dom(),o);else if(i.extend)try{Pg(t,i,e,n,r,o)}catch(u){Bg(t,r,o,e,n)}else Bg(t,r,o,e,n)}})},Wg=function(t,e,n,r,o){var i=Ag(e,n,r,o);Ig(t,i)},Mg=function(t,e,n){var r=Dg(e,n);Ig(t,r)},_g=function(t){var e=qm.getWin(t).dom(),n=function(t,n,r,o){return Km(e,t,n,r,o)},r=Og(t);return rg(e,r).match({ltr:n,rtl:n})},Lg=function(t){if(t.rangeCount>0){var e=t.getRangeAt(0),n=t.getRangeAt(t.rangeCount-1);return h.some(Om.create(It.fromDom(e.startContainer),e.startOffset,It.fromDom(n.endContainer),n.endOffset))}return h.none()},Fg=function(t){var e=It.fromDom(t.anchorNode),n=It.fromDom(t.focusNode);return kg(e,t.anchorOffset,n,t.focusOffset)?h.some(Om.create(e,t.anchorOffset,n,t.focusOffset)):Lg(t)},jg=function(t,e){var n=Gm(t,e);Ng(t,n)},Hg=function(t){return h.from(t.getSelection()).filter((function(t){return t.rangeCount>0})).bind(Fg)},zg=function(t){return Hg(t).map((function(t){return qm.exact(t.start(),t.soffset(),t.finish(),t.foffset())}))},Ug=function(t,e){var n=og(t,e);return Qm(n)},qg=function(t,e,n){return Sg(t,e,n)},Gg=function(t){var e=t.getSelection();e.removeAllRanges()},Vg=tinymce.util.Tools.resolve("tinymce.util.VK"),Yg=function(t,e,n,r){return $g(t,e,Dm.next(n),r)},Xg=function(t,e,n,r){return $g(t,e,Dm.prev(n),r)},Jg=function(t,e){var n=qm.exact(e,0,e,0);return _g(n)},Kg=function(t,e){var n=In(e,"tr");return H(n).bind((function(e){return zn(e,"td,th").map((function(e){return Jg(t,e)}))}))},$g=function(t,e,n,r,o){return n.fold(h.none,h.none,(function(e,n){return Ir(n).map((function(e){return Jg(t,e)}))}),(function(n){return ur.table(n,e).bind((function(e){var o=Ei.noMenu(n);return t.undoManager.transact((function(){r.insertRowsAfter(e,o)})),Kg(t,e)}))}))},Qg=["table","li","dl"],Zg=function(t,e,n,r){if(t.keyCode===Vg.TAB){var o=zf(e),i=function(t){var e=ft(t);return Ge(t,o)||A(Qg,e)},u=e.selection.getRng();if(u.collapsed){var a=It.fromDom(u.startContainer);ur.cell(a,i).each((function(o){t.preventDefault();var u=t.shiftKey?Xg:Yg,a=u(e,i,o,n,r);a.each((function(t){e.selection.setRng(t)}))}))}}},th={handle:Zg},eh=V("selection","kill"),nh={create:eh},rh=function(t,e,n,r){return{start:o(Wm.on(t,e)),finish:o(Wm.on(n,r))}},oh={create:rh},ih=function(t,e){var n=og(t,e);return Om.create(It.fromDom(n.startContainer),n.startOffset,It.fromDom(n.endContainer),n.endOffset)},uh=oh.create,ah={convertToRange:ih,makeSitus:uh},ch=function(t,e,n,r,o,i,u){return Ge(n,o)&&r===i?h.none():Un(n,"td,th",e).bind((function(n){return Un(o,"td,th",e).bind((function(r){return lh(t,e,n,r,u)}))}))},lh=function(t,e,n,r,o){return Ge(n,r)?h.none():ri.identify(n,r,e).bind((function(e){var r=e.boxes().getOr([]);return r.length>0?(o(t,r,e.start(),e.finish()),h.some(nh.create(h.some(ah.makeSitus(n,0,n,Er(n))),!0))):h.none()}))},fh=function(t,e,n,r,o){var i=function(t){return o.clear(n),o.selectRange(n,t.boxes(),t.start(),t.finish()),t.boxes()};return ri.shiftSelection(r,t,e,o.firstSelectedSelector(),o.lastSelectedSelector()).map(i)},sh={sync:ch,detect:lh,update:fh},dh=V("item","mode"),mh=function(t,e,n,r){return void 0===r&&(r=gh),t.property().parent(e).map((function(t){return dh(t,r)}))},gh=function(t,e,n,r){return void 0===r&&(r=hh),n.sibling(t,e).map((function(t){return dh(t,r)}))},hh=function(t,e,n,r){void 0===r&&(r=hh);var o=t.property().children(e),i=n.first(o);return i.map((function(t){return dh(t,r)}))},vh=[{current:mh,next:gh,fallback:h.none()},{current:gh,next:hh,fallback:h.some(mh)},{current:hh,next:hh,fallback:h.some(gh)}],ph=function(t,e,n,r,o){void 0===o&&(o=vh);var i=W(o,(function(t){return t.current===n}));return i.bind((function(n){return n.current(t,e,r,n.next).orThunk((function(){return n.fallback.bind((function(n){return ph(t,e,n,r)}))}))}))},bh=function(){var t=function(t,e){return t.query().prevSibling(e)},e=function(t){return t.length>0?h.some(t[t.length-1]):h.none()};return{sibling:t,first:e}},wh=function(){var t=function(t,e){return t.query().nextSibling(e)},e=function(t){return t.length>0?h.some(t[0]):h.none()};return{sibling:t,first:e}},yh={left:bh,right:wh},xh=function(t,e,n,r,o,i){var u=ph(t,e,r,o);return u.bind((function(e){return i(e.item())?h.none():n(e.item())?h.some(e.item()):xh(t,e.item(),n,e.mode(),o,i)}))},Ch=function(t,e,n,r){return xh(t,e,n,gh,yh.left(),r)},Rh=function(t,e,n,r){return xh(t,e,n,gh,yh.right(),r)},Sh=function(t){return function(e){return 0===t.property().children(e).length}},Th=function(t,e,n){return Ah(t,e,Sh(t),n)},Dh=function(t,e,n){return Oh(t,e,Sh(t),n)},Ah=Ch,Oh=Rh,Eh=po(),kh=function(t,e){return Th(Eh,t,e)},Nh=function(t,e){return Dh(Eh,t,e)},Bh=function(t,e,n){return Ah(Eh,t,e,n)},Ph=function(t,e,n){return Oh(Eh,t,e,n)},Ih=function(t,e,n){return Mn(t,e,n).isSome()},Wh=V("element","offset"),Mh=(V("element","deltaOffset"),V("element","start","finish"),V("begin","end"),V("element","text"),vi.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}])),_h=function(t,e,n){var r=t.getRect(e),o=t.getRect(n);return o.right>r.left&&o.left<r.right},Lh=function(t){return Un(t,"tr")},Fh=function(t,e,n,r,o,i,u){return Un(r,"td,th",u).bind((function(n){return Un(e,"td,th",u).map((function(e){return Ge(n,e)?Ge(r,n)&&Er(n)===o?i(e):Mh.none("in same cell"):Yo.sharedOne(Lh,[n,e]).fold((function(){return _h(t,e,n)?Mh.success():i(e)}),(function(t){return i(e)}))}))})).getOr(Mh.none("default"))},jh=function(t,e,n,r,o){return t.fold(e,n,r,o)},Hh=Vu(Vu({},Mh),{verify:Fh,cata:jh}),zh=(V("ancestor","descendants","element","index"),V("parent","children","element","index")),Uh=function(t){return Ze(t).bind((function(e){var n=rn(e);return qh(n,t).map((function(r){return zh(e,n,t,r)}))}))},qh=function(t,e){return M(t,u(Ge,e))},Gh=function(t){return"br"===ft(t)},Vh=function(t,e,n){return e(t,n).bind((function(t){return ht(t)&&0===Dr(t).trim().length?Vh(t,e,n):h.some(t)}))},Yh=function(t,e,n){return n.traverse(e).orThunk((function(){return Vh(e,n.gather,t)})).map(n.relative)},Xh=function(t,e){return on(t,e).filter(Gh).orThunk((function(){return on(t,e-1).filter(Gh)}))},Jh=function(t,e,n,r){return Xh(e,n).bind((function(e){return r.traverse(e).fold((function(){return Vh(e,r.gather,t).map(r.relative)}),(function(t){return Uh(t).map((function(t){return Wm.on(t.parent(),t.index())}))}))}))},Kh=function(t,e,n,r){var i=Gh(e)?Yh(t,e,r):Jh(t,e,n,r);return i.map((function(t){return{start:o(t),finish:o(t)}}))},$h=function(t){return Hh.cata(t,(function(t){return h.none()}),(function(){return h.none()}),(function(t){return h.some(Wh(t,0))}),(function(t){return h.some(Wh(t,Er(t)))}))},Qh={tryBr:Kh,process:$h},Zh=Z(["left","top","right","bottom"],[]),tv=function(t,e){return Zh({left:t.left(),top:t.top()+e,right:t.right(),bottom:t.bottom()+e})},ev=function(t,e){return Zh({left:t.left(),top:t.top()-e,right:t.right(),bottom:t.bottom()-e})},nv=function(t,e){var n=t.bottom()-t.top();return Zh({left:t.left(),top:e-n,right:t.right(),bottom:e})},rv=function(t,e){var n=t.bottom()-t.top();return Zh({left:t.left(),top:e,right:t.right(),bottom:e+n})},ov=function(t,e,n){return Zh({left:t.left()+e,top:t.top()+n,right:t.right()+e,bottom:t.bottom()+n})},iv=function(t){return t.top()},uv=function(t){return t.bottom()},av=function(t){return"("+t.left()+", "+t.top()+") -> ("+t.right()+", "+t.bottom()+")"},cv={nu:Zh,moveUp:ev,moveDown:tv,moveBottomTo:nv,moveTopTo:rv,getTop:iv,getBottom:uv,translate:ov,toString:av},lv=function(t,e,n){return n>=0&&n<Er(e)?t.getRangedRect(e,n,e,n+1):n>0?t.getRangedRect(e,n-1,e,n):h.none()},fv=function(t){return cv.nu({left:t.left,top:t.top,right:t.right,bottom:t.bottom})},sv=function(t,e){return h.some(t.getRect(e))},dv=function(t,e,n){return gt(e)?sv(t,e).map(fv):ht(e)?lv(t,e,n).map(fv):h.none()},mv=function(t,e){return gt(e)?sv(t,e).map(fv):ht(e)?t.getRangedRect(e,0,e,Er(e)).map(fv):h.none()},gv={getBoxAt:dv,getEntireBox:mv},hv=5,vv=100,pv=vi.generate([{none:[]},{retry:["caret"]}]),bv=function(t,e){return t.left()<e.left()||Math.abs(e.right()-t.left())<1||t.left()>e.right()},wv=function(t,e,n){return _n(e,cf.isBlock).fold(o(!1),(function(e){return gv.getEntireBox(t,e).exists((function(t){return bv(n,t)}))}))},yv=function(t,e,n,r,o){var i=cv.moveDown(o,hv);return Math.abs(n.bottom()-r.bottom())<1||n.top()>o.bottom()?pv.retry(i):n.top()===o.bottom()?pv.retry(cv.moveDown(o,1)):wv(t,e,o)?pv.retry(cv.translate(i,hv,0)):pv.none()},xv=function(t,e,n,r,o){var i=cv.moveUp(o,hv);return Math.abs(n.top()-r.top())<1||n.bottom()<o.top()?pv.retry(i):n.bottom()===o.top()?pv.retry(cv.moveUp(o,1)):wv(t,e,o)?pv.retry(cv.translate(i,hv,0)):pv.none()},Cv={point:cv.getTop,adjuster:xv,move:cv.moveUp,gather:kh},Rv={point:cv.getBottom,adjuster:yv,move:cv.moveDown,gather:Nh},Sv=function(t,e,n){return t.elementFromPoint(e,n).filter((function(t){return"table"===ft(t)})).isSome()},Tv=function(t,e,n,r,o){return Dv(t,e,n,e.move(r,hv),o)},Dv=function(t,e,n,r,o){return 0===o?h.some(r):Sv(t,r.left(),e.point(r))?Tv(t,e,n,r,o-1):t.situsFromPoint(r.left(),e.point(r)).bind((function(i){return i.start().fold(h.none,(function(i){return gv.getEntireBox(t,i).bind((function(u){return e.adjuster(t,i,u,n,r).fold(h.none,(function(r){return Dv(t,e,n,r,o-1)}))})).orThunk((function(){return h.some(r)}))}),h.none)}))},Av=function(t,e){return t.situsFromPoint(e.left(),e.bottom()+hv)},Ov=function(t,e){return t.situsFromPoint(e.left(),e.top()-hv)},Ev=function(t,e,n){return t.point(e)>n.getInnerHeight()?h.some(t.point(e)-n.getInnerHeight()):t.point(e)<0?h.some(-t.point(e)):h.none()},kv=function(t,e,n){var r=t.move(n,hv),o=Dv(e,t,n,r,vv).getOr(r);return Ev(t,o,e).fold((function(){return e.situsFromPoint(o.left(),t.point(o))}),(function(n){return e.scrollBy(0,n),e.situsFromPoint(o.left(),t.point(o)-n)}))},Nv={tryUp:u(kv,Cv),tryDown:u(kv,Rv),ieTryUp:Ov,ieTryDown:Av,getJumpSize:o(hv)},Bv=20,Pv=Le.detect(),Iv=function(t,e,n){return t.getSelection().bind((function(r){return Qh.tryBr(e,r.finish(),r.foffset(),n).fold((function(){return h.some(Wh(r.finish(),r.foffset()))}),(function(o){var i=t.fromSitus(o),u=Hh.verify(t,r.finish(),r.foffset(),i.finish(),i.foffset(),n.failure,e);return Qh.process(u)}))}))},Wv=function(t,e,n,r,o,i){return 0===i?h.none():Lv(t,e,n,r,o).bind((function(u){var a=t.fromSitus(u),c=Hh.verify(t,n,r,a.finish(),a.foffset(),o.failure,e);return Hh.cata(c,(function(){return h.none()}),(function(){return h.some(u)}),(function(u){return Ge(n,u)&&0===r?Mv(t,n,r,cv.moveUp,o):Wv(t,e,u,0,o,i-1)}),(function(u){return Ge(n,u)&&r===Er(u)?Mv(t,n,r,cv.moveDown,o):Wv(t,e,u,Er(u),o,i-1)}))}))},Mv=function(t,e,n,r,o){return gv.getBoxAt(t,e,n).bind((function(e){return _v(t,o,r(e,Nv.getJumpSize()))}))},_v=function(t,e,n){return Pv.browser.isChrome()||Pv.browser.isSafari()||Pv.browser.isFirefox()||Pv.browser.isEdge()?e.otherRetry(t,n):Pv.browser.isIE()?e.ieRetry(t,n):h.none()},Lv=function(t,e,n,r,o){return gv.getBoxAt(t,n,r).bind((function(e){return _v(t,o,e)}))},Fv=function(t,e,n){return Iv(t,e,n).bind((function(r){return Wv(t,e,r.element(),r.offset(),n,Bv).map(t.fromSitus)}))},jv={handle:Fv},Hv=Le.detect(),zv=function(t,e){return Ih(t,(function(t){return Ze(t).exists((function(t){return Ge(t,e)}))}))},Uv=function(t,e,n,r,i){return Un(r,"td,th",e).bind((function(r){return Un(r,"table",e).bind((function(u){return zv(i,u)?jv.handle(t,e,n).bind((function(t){return Un(t.finish(),"td,th",e).map((function(e){return{start:o(r),finish:o(e),range:o(t)}}))})):h.none()}))}))},qv=function(t,e,n,r,o,i){return Hv.browser.isIE()?h.none():i(r,e).orThunk((function(){return Uv(t,e,n,r,o).map((function(t){var e=t.range();return nh.create(h.some(ah.makeSitus(e.start(),e.soffset(),e.finish(),e.foffset())),!0)}))}))},Gv=function(t,e){return Un(t,"tr",e).bind((function(t){return Un(t,"table",e).bind((function(n){var r=In(n,"tr");return Ge(t,r[0])?Bh(n,(function(t){return Wr(t).isSome()}),e).map((function(t){var e=Er(t);return nh.create(h.some(ah.makeSitus(t,e,t,e)),!0)})):h.none()}))}))},Vv=function(t,e){return Un(t,"tr",e).bind((function(t){return Un(t,"table",e).bind((function(n){var r=In(n,"tr");return Ge(t,r[r.length-1])?Ph(n,(function(t){return Ir(t).isSome()}),e).map((function(t){return nh.create(h.some(ah.makeSitus(t,0,t,0)),!0)})):h.none()}))}))},Yv=function(t,e,n,r,o,i,u){return Uv(t,n,r,o,i).bind((function(t){return sh.detect(e,n,t.start(),t.finish(),u)}))},Xv={navigate:qv,select:Yv,firstUpCheck:Gv,lastDownCheck:Vv},Jv=function(t,e){return Un(t,"td,th",e)};function Kv(t,e,n,r){var o=h.none(),i=function(){o=h.none()},u=function(t){r.clear(e),o=Jv(t.target(),n)},a=function(i){o.each((function(o){r.clear(e),Jv(i.target(),n).each((function(i){ri.identify(o,i,n).each((function(n){var u=n.boxes().getOr([]);(u.length>1||1===u.length&&!Ge(o,i))&&(r.selectRange(e,u,n.start(),n.finish()),t.selectContents(i))}))}))}))},c=function(t){o.each(i)};return{mousedown:u,mouseover:a,mouseup:c}}var $v={traverse:nn,gather:Nh,relative:Wm.before,otherRetry:Nv.tryDown,ieRetry:Nv.ieTryDown,failure:Hh.failedDown},Qv={traverse:en,gather:kh,relative:Wm.before,otherRetry:Nv.tryUp,ieRetry:Nv.ieTryUp,failure:Hh.failedUp},Zv={down:$v,up:Qv},tp=function(t){return function(e){return e===t}},ep=tp(38),np=tp(40),rp=function(t){return t>=37&&t<=40},op={ltr:{isBackward:tp(37),isForward:tp(39)},rtl:{isBackward:tp(39),isForward:tp(37)},isUp:ep,isDown:np,isNavigation:rp},ip=function(t){return{left:t.left(),top:t.top(),right:t.right(),bottom:t.bottom(),width:t.width(),height:t.height()}},up={toRaw:ip},ap=(Le.detect().browser.isSafari(),function(e){var n=void 0!==e?e.dom():t.document,r=n.body.scrollLeft||n.documentElement.scrollLeft,o=n.body.scrollTop||n.documentElement.scrollTop;return Cu(r,o)}),cp=function(e,n,r){var o=void 0!==r?r.dom():t.document,i=o.defaultView;i.scrollBy(e,n)},lp=function(t){var e=function(e,n){return It.fromPoint(It.fromDom(t.document),e,n)},n=function(t){return t.dom().getBoundingClientRect()},r=function(e,n,r,o){var i=qm.exact(e,n,r,o);return Ug(t,i).map(up.toRaw)},o=function(){return zg(t).map((function(e){return ah.convertToRange(t,e)}))},i=function(e){var n=qm.relative(e.start(),e.finish());return ah.convertToRange(t,n)},u=function(e,n){return qg(t,e,n).map((function(t){return oh.create(t.start(),t.soffset(),t.finish(),t.foffset())}))},a=function(){Gg(t)},c=function(e){jg(t,e)},l=function(e){Wg(t,e.start(),e.soffset(),e.finish(),e.foffset())},f=function(e,n){Mg(t,e,n)},s=function(){return t.innerHeight},d=function(){var e=ap(It.fromDom(t.document));return e.top()},m=function(e,n){cp(e,n,It.fromDom(t.document))};return{elementFromPoint:e,getRect:n,getRangedRect:r,getSelection:o,fromSitus:i,situsFromPoint:u,clearSelection:a,setSelection:l,setRelativeSelection:f,selectContents:c,getInnerHeight:s,getScrollY:d,scrollBy:m}},fp=V("rows","cols"),sp=function(t,e,n,r){var o=lp(t),i=Kv(o,e,n,r);return{mousedown:i.mousedown,mouseover:i.mouseover,mouseup:i.mouseup}},dp=function(t,e,n,r){var o=lp(t),i=function(){return r.clear(e),h.none()},a=function(t,a,c,l,f,s){var d=t.raw(),m=d.which,g=!0===d.shiftKey,v=ri.retrieve(e,r.selectedSelector()).fold((function(){return op.isDown(m)&&g?u(Xv.select,o,e,n,Zv.down,l,a,r.selectRange):op.isUp(m)&&g?u(Xv.select,o,e,n,Zv.up,l,a,r.selectRange):op.isDown(m)?u(Xv.navigate,o,n,Zv.down,l,a,Xv.lastDownCheck):op.isUp(m)?u(Xv.navigate,o,n,Zv.up,l,a,Xv.firstUpCheck):h.none}),(function(t){var n=function(n){return function(){var i=Xu(n,(function(n){return sh.update(n.rows(),n.cols(),e,t,r)}));return i.fold((function(){return ri.getEdges(e,r.firstSelectedSelector(),r.lastSelectedSelector()).map((function(t){var n=op.isDown(m)||s.isForward(m)?Wm.after:Wm.before;return o.setRelativeSelection(Wm.on(t.first(),0),n(t.table())),r.clear(e),nh.create(h.none(),!0)}))}),(function(t){return h.some(nh.create(h.none(),!0))}))}};return op.isDown(m)&&g?n([fp(1,0)]):op.isUp(m)&&g?n([fp(-1,0)]):s.isBackward(m)&&g?n([fp(0,-1),fp(-1,0)]):s.isForward(m)&&g?n([fp(0,1),fp(1,0)]):op.isNavigation(m)&&!1===g?i:h.none}));return v()},c=function(t,o,i,u,a){return ri.retrieve(e,r.selectedSelector()).fold((function(){var c=t.raw(),l=c.which,f=!0===c.shiftKey;return!1===f?h.none():op.isNavigation(l)?sh.sync(e,n,o,i,u,a,r.selectRange):h.none()}),h.none)};return{keydown:a,keyup:c}},mp={mouse:sp,keyboard:dp},gp=function(t,e){k(e,(function(e){ca(t,e)}))},hp=function(t){return function(e){ua(e,t)}},vp=function(t){return function(e){gp(e,t)}},pp=function(t){var e=hp(t.selected()),n=vp([t.selected(),t.lastSelected(),t.firstSelected()]),r=function(e){var r=In(e,t.selectedSelector());k(r,n)},o=function(n,o,i,u){r(n),k(o,e),ua(i,t.firstSelected()),ua(u,t.lastSelected())};return{clear:r,selectRange:o,selectedSelector:t.selectedSelector,firstSelectedSelector:t.firstSelectedSelector,lastSelectedSelector:t.lastSelectedSelector}},bp=function(t){var e=function(e){xt(e,t.selected()),xt(e,t.firstSelected()),xt(e,t.lastSelected())},n=function(e){pt(e,t.selected(),"1")},r=function(n){var r=In(n,t.selectedSelector());k(r,e)},o=function(e,o,i,u){r(e),k(o,n),pt(i,t.firstSelected(),"1"),pt(u,t.lastSelected(),"1")};return{clear:r,selectRange:o,selectedSelector:t.selectedSelector,firstSelectedSelector:t.firstSelectedSelector,lastSelectedSelector:t.lastSelectedSelector}},wp={byClass:pp,byAttr:bp},yp=function(t){return!1===la(It.fromDom(t.target),"ephox-snooker-resizer-bar")};function xp(t,e){var i=Z(["mousedown","mouseover","mouseup","keyup","keydown"],[]),u=h.none(),a=wp.byAttr(gi);t.on("init",(function(c){var l=t.getWin(),f=zf(t),s=Gf(t),d=function(){var e=t.selection,r=It.fromDom(e.getStart()),o=It.fromDom(e.getEnd()),i=Yo.sharedOne(ur.table,[r,o]);i.fold((function(){a.clear(f)}),n)},m=mp.mouse(l,f,s,a),g=mp.keyboard(l,f,s,a),v=function(t){return!0===t.raw().shiftKey},p=function(e,n){v(e)&&(n.kill()&&e.kill(),n.selection().each((function(e){var n=qm.relative(e.start(),e.finish()),r=og(l,n);t.selection.setRng(r)})))},b=function(e){var n=x(e);if(n.raw().shiftKey&&op.isNavigation(n.raw().which)){var r=t.selection.getRng(),o=It.fromDom(r.startContainer),i=It.fromDom(r.endContainer);g.keyup(n,o,r.startOffset,i,r.endOffset).each((function(t){p(n,t)}))}},w=function(n){var r=x(n);e().each((function(t){t.hideBars()}));var o=t.selection.getRng(),i=It.fromDom(t.selection.getStart()),u=It.fromDom(o.startContainer),a=It.fromDom(o.endContainer),c=Zf.directionAt(i).isRtl()?op.rtl:op.ltr;g.keydown(r,u,o.startOffset,a,o.endOffset,c).each((function(t){p(r,t)})),e().each((function(t){t.showBars()}))},y=function(t){return t.hasOwnProperty("x")&&t.hasOwnProperty("y")},x=function(t){var e=It.fromDom(t.target),n=function(){t.stopPropagation()},i=function(){t.preventDefault()},u=r(i,n);return{target:o(e),x:o(y(t)?t.x:null),y:o(y(t)?t.y:null),stop:n,prevent:i,kill:u,raw:o(t)}},C=function(t){return 0===t.button},R=function(t){return void 0===t.buttons||(!!(Zs.ie&&Zs.ie>=12&&0===t.buttons)||0!==(1&t.buttons))},S=function(t){C(t)&&yp(t)&&m.mousedown(x(t))},T=function(t){R(t)&&yp(t)&&m.mouseover(x(t))},D=function(t){C(t)&&yp(t)&&m.mouseup(x(t))};t.on("mousedown",S),t.on("mouseover",T),t.on("mouseup",D),t.on("keyup",b),t.on("keydown",w),t.on("nodechange",d),u=h.some(i({mousedown:S,mouseover:T,mouseup:D,keyup:b,keydown:w}))}));var c=function(){u.each((function(t){}))};return{clear:a.clear,destroy:c}}var Cp=function(t){var e=function(){var e=zf(t);return ui.retrieve(e,gi.selectedSelector()).fold((function(){return void 0===t.selection.getStart()?wi.none():wi.single(t.selection)}),(function(t){return wi.multiple(t)}))};return{get:e}},Rp=Os.each,Sp=function(t){var e=[];function n(e){return function(){t.execCommand(e)}}Rp("inserttable tableprops deletetable | cell row column".split(" "),(function(n){"|"===n?e.push({text:"-"}):e.push(t.menuItems[n])})),t.addButton("table",{type:"menubutton",title:"Table",menu:e}),t.addButton("tableprops",{title:"Table properties",onclick:n("mceTableProps"),icon:"table"}),t.addButton("tabledelete",{title:"Delete table",onclick:n("mceTableDelete")}),t.addButton("tablecellprops",{title:"Cell properties",onclick:n("mceTableCellProps")}),t.addButton("tablemergecells",{title:"Merge cells",onclick:n("mceTableMergeCells")}),t.addButton("tablesplitcells",{title:"Split cell",onclick:n("mceTableSplitCells")}),t.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:n("mceTableInsertRowBefore")}),t.addButton("tableinsertrowafter",{title:"Insert row after",onclick:n("mceTableInsertRowAfter")}),t.addButton("tabledeleterow",{title:"Delete row",onclick:n("mceTableDeleteRow")}),t.addButton("tablerowprops",{title:"Row properties",onclick:n("mceTableRowProps")}),t.addButton("tablecutrow",{title:"Cut row",onclick:n("mceTableCutRow")}),t.addButton("tablecopyrow",{title:"Copy row",onclick:n("mceTableCopyRow")}),t.addButton("tablepasterowbefore",{title:"Paste row before",onclick:n("mceTablePasteRowBefore")}),t.addButton("tablepasterowafter",{title:"Paste row after",onclick:n("mceTablePasteRowAfter")}),t.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:n("mceTableInsertColBefore")}),t.addButton("tableinsertcolafter",{title:"Insert column after",onclick:n("mceTableInsertColAfter")}),t.addButton("tabledeletecol",{title:"Delete column",onclick:n("mceTableDeleteCol")})},Tp=function(t){var e=function(e){var n=t.dom.is(e,"table")&&t.getBody().contains(e);return n},n=ys(t);n.length>0&&t.addContextToolbar(e,n.join(" "))},Dp={addButtons:Sp,addToolbars:Tp},Ap=function(t,e){var n=h.none(),r=[],o=[],i=[],u=[],a=function(t){t.disabled(!0)},c=function(t){t.disabled(!1)},l=function(){var t=this;r.push(t),n.fold((function(){a(t)}),(function(e){c(t)}))},f=function(){var t=this;o.push(t),n.fold((function(){a(t)}),(function(e){c(t)}))},s=function(){var t=this;i.push(t),n.fold((function(){a(t)}),(function(e){t.disabled(e.mergable().isNone())}))},d=function(){var t=this;u.push(t),n.fold((function(){a(t)}),(function(e){t.disabled(e.unmergable().isNone())}))},m=function(){n.fold((function(){k(r,a),k(o,a),k(i,a),k(u,a)}),(function(t){k(r,c),k(o,c),k(i,(function(e){e.disabled(t.mergable().isNone())})),k(u,(function(e){e.disabled(t.unmergable().isNone())}))}))};t.on("init",(function(){t.on("nodechange",(function(r){var o=h.from(t.dom.getParent(t.selection.getStart(),"th,td"));n=o.bind((function(t){var n=It.fromDom(t),r=ur.table(n);return r.map((function(t){return Ei.forMenu(e,t,n)}))})),m()}))}));var g=function(){var t="";t='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var e=0;e<10;e++){t+="<tr>";for(var n=0;n<10;n++)t+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*e+n)+'" href="#" data-mce-x="'+n+'" data-mce-y="'+e+'"></a></td>';t+="</tr>"}return t+="</table>",t+='<div class="mce-text-center" role="presentation">1 x 1</div>',t},v=function(t,e,n,r){var o,i,u,a,c,l=r.getEl().getElementsByTagName("table")[0],f=r.isRtl()||"tl-tr"===r.parent().rel;for(l.nextSibling.innerHTML=e+1+" x "+(n+1),f&&(e=9-e),i=0;i<10;i++)for(o=0;o<10;o++)a=l.rows[i].childNodes[o].firstChild,c=(f?o>=e:o<=e)&&i<=n,t.dom.toggleClass(a,"mce-active",c),c&&(u=a);return u.parentNode},p=!1===ss(t)?{text:"Table",icon:"table",context:"table",onclick:b("mceInsertTable")}:{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(e){e.aria&&(this.parent().hideAll(),e.stopImmediatePropagation(),t.execCommand("mceInsertTable"))},onshow:function(){v(t,0,0,this.menu.items()[0])},onhide:function(){var e=this.menu.items()[0].getEl().getElementsByTagName("a");t.dom.removeClass(e,"mce-active"),t.dom.addClass(e[0],"mce-active")},menu:[{type:"container",html:g(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(e){var n,r,o=e.target;"A"===o.tagName.toUpperCase()&&(n=parseInt(o.getAttribute("data-mce-x"),10),r=parseInt(o.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"===this.parent().rel)&&(n=9-n),n===this.lastX&&r===this.lastY||(v(t,n,r,e.control),this.lastX=n,this.lastY=r))},onclick:function(e){var n=this;"A"===e.target.tagName.toUpperCase()&&(e.preventDefault(),e.stopPropagation(),n.parent().cancel(),t.undoManager.transact((function(){gd.insert(t,n.lastX+1,n.lastY+1)})),t.addVisual())}}]};function b(e){return function(){t.execCommand(e)}}var w={text:"Table properties",context:"table",onPostRender:l,onclick:b("mceTableProps")},y={text:"Delete table",context:"table",onPostRender:l,cmd:"mceTableDelete"},x={text:"Row",context:"table",menu:[{text:"Insert row before",onclick:b("mceTableInsertRowBefore"),onPostRender:f},{text:"Insert row after",onclick:b("mceTableInsertRowAfter"),onPostRender:f},{text:"Delete row",onclick:b("mceTableDeleteRow"),onPostRender:f},{text:"Row properties",onclick:b("mceTableRowProps"),onPostRender:f},{text:"-"},{text:"Cut row",onclick:b("mceTableCutRow"),onPostRender:f},{text:"Copy row",onclick:b("mceTableCopyRow"),onPostRender:f},{text:"Paste row before",onclick:b("mceTablePasteRowBefore"),onPostRender:f},{text:"Paste row after",onclick:b("mceTablePasteRowAfter"),onPostRender:f}]},C={text:"Column",context:"table",menu:[{text:"Insert column before",onclick:b("mceTableInsertColBefore"),onPostRender:f},{text:"Insert column after",onclick:b("mceTableInsertColAfter"),onPostRender:f},{text:"Delete column",onclick:b("mceTableDeleteCol"),onPostRender:f}]},R={separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:b("mceTableCellProps"),onPostRender:f},{text:"Merge cells",onclick:b("mceTableMergeCells"),onPostRender:s},{text:"Split cell",onclick:b("mceTableSplitCells"),onPostRender:d}]};t.addMenuItem("inserttable",p),t.addMenuItem("tableprops",w),t.addMenuItem("deletetable",y),t.addMenuItem("row",x),t.addMenuItem("column",C),t.addMenuItem("cell",R)},Op={addMenuItems:Ap},Ep=function(t){return t.get().fold((function(){}),(function(t){return E(t,(function(t){return t.dom()}))}))},kp=function(t,e){var n=E(t,It.fromDom);e.set(h.from(n))},Np=function(t,e){return{insertTable:function(e,n){return gd.insert(t,e,n)},setClipboardRows:function(t){return kp(t,e)},getClipboardRows:function(){return Ep(e)}}};function Bp(t){var e=wm(t),n=xp(t,e.lazyResize),r=Ts(t,e.lazyWire),o=Cp(t),i=Nl(h.none());return Rd.registerCommands(t,r,n,o,i),Ii.registerEvents(t,o,r,n),Op.addMenuItems(t,o),Dp.addButtons(t),Dp.addToolbars(t),t.on("PreInit",(function(){t.serializer.addTempAttr(gi.firstSelected()),t.serializer.addTempAttr(gi.lastSelected())})),us(t)&&t.on("keydown",(function(n){th.handle(n,t,r,e.lazyWire)})),t.on("remove",(function(){e.destroy(),n.destroy()})),Np(t,i)}function Pp(){}e.add("table",Bp)})(window)})()}}]);