(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["PermissionsManagment~f71cff67"],{"224c":function(e,t,a){"use strict";a.d(t,"f",(function(){return r})),a.d(t,"g",(function(){return l})),a.d(t,"a",(function(){return o})),a.d(t,"d",(function(){return s})),a.d(t,"e",(function(){return i})),a.d(t,"c",(function(){return c})),a.d(t,"b",(function(){return u}));var n=a("a27e");function r(){return Object(n["a"])({url:"rbac",method:"get"})}function l(){return Object(n["a"])({url:"rbac/role_page",method:"get"})}function o(e){return Object(n["a"])({url:"rbac",method:"post",data:e})}function s(e){return Object(n["a"])({url:"rbac/"+e,method:"get"})}function i(e){return Object(n["a"])({url:"rbac/edit",method:"post",data:e})}function c(e){return Object(n["a"])({url:"rbac/"+e+"/",method:"delete"})}function u(e){return Object(n["a"])({url:"rbac/copyRole",method:"post",data:e})}},"42e6":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h5",{staticClass:"mt-0"},[e._v(e._s(e.$lang.permissions_managment_tips))]),a("el-button",{attrs:{size:"small",icon:"el-icon-plus",type:"success"},on:{click:e.permissionsAdd}},[e._v(e._s(e.$lang.add_a_group))]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v(e._s(e.$lang.copy_a_group))]),a("el-table",{staticClass:"mt-10",staticStyle:{width:"100%"},attrs:{border:"",data:e.tableData.filter((function(t){return!e.search||t.name.toLowerCase().includes(e.search.toLowerCase())}))}},[a("div",{attrs:{slot:"empty"},slot:"empty"},[!e.tableData.length&&e.tableLoading?a("span",[a("i",{staticClass:"el-icon-loading"}),e._v(" "+e._s(e.$lang.loading)+" ... ")]):e._e(),e.tableData.length||e.tableLoading?e._e():a("span",[e._v(e._s(e.$lang.no_data))])]),a("el-table-column",{attrs:{label:"ID",prop:"id",width:"70",align:"center"}}),a("el-table-column",{attrs:{label:e.$lang.group_name2,prop:"name"}}),a("el-table-column",{attrs:{label:e.$lang.explain,prop:"remark"}}),a("el-table-column",{attrs:{label:e.$lang.state,width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(" "+e._s(1===t.row.status?e.$lang.normal:e.$lang.forbidden)+" ")])]}}])}),a("el-table-column",{attrs:{label:e.$lang.group_menbers,prop:"user_login"}}),a("el-table-column",{attrs:{align:"left",label:e.$lang.operation,width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"span-primary",attrs:{size:"small",type:"text",icon:"el-icon-edit",disabled:1===t.row.id},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v(e._s(e.$lang.edit))]),a("el-button",{staticClass:"span-danger",attrs:{size:"small",type:"text",icon:"el-icon-delete",disabled:1===t.row.id},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v(e._s(e.$lang.delete))])]}}])})],1),a("el-dialog",{attrs:{title:e.$lang.copy_a_group,visible:e.dialogVisible,width:"35%"},on:{"update:visible":function(t){e.dialogVisible=t},closed:e.handleClose}},[a("el-form",{ref:"form",attrs:{model:e.formData,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:e.$lang.old_group,prop:"role_id"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:e.$lang.old_group_pla},model:{value:e.formData.role_id,callback:function(t){e.$set(e.formData,"role_id",t)},expression:"formData.role_id"}},e._l(e.tableData,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:e.$lang.new_group_name1,prop:"role_name"}},[a("el-input",{attrs:{type:"text",placeholder:e.$lang.new_group_name1_pla},model:{value:e.formData.role_name,callback:function(t){e.$set(e.formData,"role_name",t)},expression:"formData.role_name"}})],1),a("el-form-item",{attrs:{label:e.$lang.new_group_desc,prop:"role_remark"}},[a("el-input",{attrs:{type:"text",placeholder:e.$lang.new_group_desc_pla},model:{value:e.formData.role_remark,callback:function(t){e.$set(e.formData,"role_remark",t)},expression:"formData.role_remark"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$lang.cancel))]),a("el-button",{attrs:{type:"primary",loading:e.subLoading},on:{click:e.submit}},[e._v(e._s(e.$lang.confirm))])],1)],1)],1)},r=[],l=(a("96cf"),a("1da1")),o=a("224c"),s={metaInfo:{title:window.zjmf_cw_lang.group_permissions},data:function(){return{subLoading:!1,dialogVisible:!1,tableLoading:!1,tableData:[],search:"",dialogFormVisible:!1,seleceArray:[],addFromData:{type:[]},rules:{role_id:[{required:!0,message:this.$lang.old_group_pla,trigger:"change"}],role_name:[{required:!0,message:this.$lang.new_group_name1_pla,trigger:"blur"}]},formData:{role_id:"",role_name:"",role_remark:""}}},methods:{submit:function(){var e=this;this.subLoading=!0,Object(o["b"])(this.formData).then((function(t){200===t.data.status?(e.dialogVisible=!1,e.getList(),e.$message.success(t.data.msg)):e.$message.error(t.data.msg),e.subLoading=!1})).catch((function(t){e.subLoading=!1,e.$message.error(res.data.msg)}))},handleClose:function(){this.subLoading=!1,this.$refs["form"].resetFields()},handleEdit:function(e,t){this.$router.push({name:"permissionsEdit",query:{id:t.id}})},handleDelete:function(e,t){var a=this,n=t.id;this.$confirm(this.$lang.whether_to_delete_group,this.$lang.hint,{confirmButtonText:this.$lang.confirm,cancelButtonText:this.$lang.cancel,type:"warning"}).then((function(){a.deletePermiss(n)})).catch((function(){}))},permissionsAdd:function(){this.$router.push({name:"permissionsEdit"})},getList:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.tableLoading=!0,t.next=3,Object(o["f"])();case 3:if(a=t.sent,n=a.data,200===n.status){t.next=8;break}return e.$message.error(n.msg),t.abrupt("return");case 8:e.tableData=n.roles,e.tableLoading=!1;case 10:case"end":return t.stop()}}),t)})))()},deletePermiss:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(o["c"])(e);case 2:n=a.sent,r=n.data,204===r.status&&(t.getList(),t.$message({type:"success",message:t.$lang.successfully_delete}));case 5:case"end":return a.stop()}}),a)})))()}},created:function(){this.getList()}},i=s,c=a("2877"),u=Object(c["a"])(i,n,r,!1,null,null,null);t["default"]=u.exports}}]);