(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["BusinessStatement~31ecd969"],{"10c2":function(e,t,a){"use strict";var r=a("3b12"),n=a.n(r);n.a},"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"19d6":function(e,t,a){"use strict";a.d(t,"g",(function(){return n})),a.d(t,"f",(function(){return l})),a.d(t,"e",(function(){return s})),a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return c})),a.d(t,"d",(function(){return u}));var r=a("a27e");function n(e){return Object(r["a"])({url:"accounts",params:e})}function l(){return Object(r["a"])({url:"search_page"})}function s(e){return Object(r["a"])({url:"accounts/create?uid="+e})}function i(e){return Object(r["a"])({url:"accounts",method:"post",data:e})}function o(e){return Object(r["a"])({url:"accounts/".concat(e),method:"delete"})}function c(e){return Object(r["a"])({url:"accounts/".concat(e)})}function u(e,t){return Object(r["a"])({url:"accounts/".concat(e),method:"put",data:t})}},"3b12":function(e,t,a){},"841c":function(e,t,a){"use strict";var r=a("d784"),n=a("825a"),l=a("1d80"),s=a("129f"),i=a("14c3");r("search",1,(function(e,t,a){return[function(t){var a=l(this),r=void 0==t?void 0:t[e];return void 0!==r?r.call(t,a):new RegExp(t)[e](String(a))},function(e){var r=a(t,e,this);if(r.done)return r.value;var l=n(e),o=String(this),c=l.lastIndex;s(c,0)||(l.lastIndex=0);var u=i(l,o);return s(l.lastIndex,c)||(l.lastIndex=c),null===u?-1:u.index}]}))},af9c:function(e,t,a){"use strict";a.d(t,"n",(function(){return n})),a.d(t,"m",(function(){return l})),a.d(t,"j",(function(){return s})),a.d(t,"a",(function(){return i})),a.d(t,"e",(function(){return o})),a.d(t,"q",(function(){return c})),a.d(t,"c",(function(){return u})),a.d(t,"k",(function(){return d})),a.d(t,"o",(function(){return m})),a.d(t,"l",(function(){return p})),a.d(t,"d",(function(){return f})),a.d(t,"p",(function(){return _})),a.d(t,"r",(function(){return b})),a.d(t,"b",(function(){return g})),a.d(t,"i",(function(){return h})),a.d(t,"f",(function(){return v})),a.d(t,"g",(function(){return y})),a.d(t,"h",(function(){return w}));var r=a("a27e");function n(e){return Object(r["a"])({url:"order/search_page",params:e})}function l(e){return Object(r["a"])({url:"order/search",params:e})}function s(e){return Object(r["a"])({url:"order/check",params:e})}function i(e){return Object(r["a"])({url:"order/cancel",params:e})}function o(e){return Object(r["a"])({url:"orders/delete",method:"delete",params:e})}function c(e){return Object(r["a"])({url:"order/create_page",params:e})}function u(e){return Object(r["a"])({url:"order/create",method:"post",data:e})}function d(e){return Object(r["a"])({url:"orders/"+e})}function m(e){return Object(r["a"])({url:"orders/set_config",params:e})}function p(e){return Object(r["a"])({url:"get_total",method:"post",data:e})}function f(e){return Object(r["a"])({url:"order/save_promo_code",method:"post",data:e})}function _(e){return Object(r["a"])({url:"orders/active",method:"post",data:e})}function b(){return Object(r["a"])({url:"order/promo_code_page"})}function g(e){return Object(r["a"])({url:"orders/change_status",method:"post",data:e})}function h(e){return Object(r["a"])({url:"order/order_commission",method:"post",data:e})}function v(e){return Object(r["a"])({url:"order/getclients",params:{username:e}})}function y(e){return Object(r["a"])({url:"invoice/renew",method:"get",params:e})}function w(e){return Object(r["a"])({url:"zjmf_finance_api/renew",method:"get",params:e})}},c9e0:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"statement custom-tabs"},[a("el-tabs",{on:{"tab-click":e.tabsSearch},model:{value:e.typeTabActive,callback:function(t){e.typeTabActive=t},expression:"typeTabActive"}},e._l(e.typeOptions,(function(e,t){return a("el-tab-pane",{key:t,attrs:{label:e.label,name:e.value}})})),1),a("h5",{staticClass:"mt-0"},[e._v(e._s(e.$lang.transaction_stream_water_hint))]),a("div",{staticClass:"features_warpper"},[a("el-button",{attrs:{size:"small",loading:e.flowloading},on:{click:e.changeFlowArea}},[e._v(e._s(e.$lang.add_transaction_stream_water))]),a("el-button",{attrs:{size:"small"},on:{click:e.changeSearchArea}},[e._v(" "+e._s(e.searchArea?e.$lang.pack_up_the_search:e.$lang.advanced_search)+" ")])],1),a("div",{staticStyle:{"margin-top":"15px"}},[a("transition",{attrs:{name:"el-zoom-in-top"}},[e.searchArea?[a("el-form",{ref:"elForm",staticClass:"unfold-search mt-10 mb-20",attrs:{inline:"",model:e.search,"label-width":"100px"}},[a("el-form-item",{attrs:{label:e.$lang.show,prop:"show"}},[a("el-select",{style:{width:"160px"},attrs:{size:"small",clearable:""},model:{value:e.search.show,callback:function(t){e.$set(e.search,"show",t)},expression:"search.show"}},e._l(e.showOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),1)],1),a("el-form-item",{attrs:{label:e.$lang.describe,prop:"description"}},[a("el-input",{style:{width:"160px"},attrs:{size:"small",placeholder:e.$lang.enter_describe,clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getTableData(t)}},model:{value:e.search.description,callback:function(t){e.$set(e.search,"description",t)},expression:"search.description"}})],1),a("el-form-item",{attrs:{label:e.$lang.sum,prop:"amount"}},[a("el-input",{style:{width:"160px"},attrs:{size:"small",placeholder:e.$lang.please_enter_sum,clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getTableData(t)}},model:{value:e.search.amount,callback:function(t){e.$set(e.search,"amount",t)},expression:"search.amount"}})],1),a("el-form-item",{attrs:{label:e.$lang.payment_account_number,prop:"trans_id"}},[a("el-input",{style:{width:"160px"},attrs:{size:"small",placeholder:e.$lang.please_enter_payment_account_number,clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getTableData(t)}},model:{value:e.search.trans_id,callback:function(t){e.$set(e.search,"trans_id",t)},expression:"search.trans_id"}})],1),a("el-form-item",{attrs:{label:e.$lang.start_time,prop:"start_time"}},[a("el-date-picker",{style:{width:"180px"},attrs:{size:"small",type:"datetime",placeholder:e.$lang.select_start_time,clearable:""},model:{value:e.search.start_time,callback:function(t){e.$set(e.search,"start_time",t)},expression:"search.start_time"}})],1),a("el-form-item",{attrs:{label:e.$lang.end_time,prop:"end_time"}},[a("el-date-picker",{style:{width:"180px"},attrs:{size:"small",type:"datetime",placeholder:e.$lang.select_end_time,clearable:""},model:{value:e.search.end_time,callback:function(t){e.$set(e.search,"end_time",t)},expression:"search.end_time"}})],1),a("el-form-item",{attrs:{label:e.$lang.payment_mode,prop:"gateway"}},[a("el-select",{style:{width:"160px"},attrs:{size:"small",placeholder:e.$lang.select_payment,clearable:""},model:{value:e.search.gateway,callback:function(t){e.$set(e.search,"gateway",t)},expression:"search.gateway"}},e._l(e.paymentOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.title,value:e.name}})})),1)],1),a("el-form-item",{attrs:{label:e.$lang.sell,prop:"sale_id"}},[a("el-select",{style:{width:"160px"},attrs:{size:"small",placeholder:e.$lang.select_sell,clearable:""},model:{value:e.search.sale_id,callback:function(t){e.$set(e.search,"sale_id",t)},expression:"search.sale_id"}},e._l(e.saleOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:" "}},[a("el-button",{attrs:{size:"mini",type:"primary",loading:e.btnLoading},on:{click:e.getTableData}},[e._v(e._s(e.$lang.search))]),a("el-button",{attrs:{size:"mini"},on:{click:e.resetSearchForm}},[e._v(e._s(e.$lang.empty))])],1)],1)]:e._e()],2),e.flowArea?[a("el-row",{attrs:{gutter:100}},[a("el-form",{ref:"addForm",attrs:{model:e.addformData,rules:e.addrules,"label-width":"85px"}},[a("el-col",{attrs:{xs:24,span:12}},[a("el-form-item",{attrs:{label:e.$lang.associated_with_user,rules:[{required:!0}]}},[a("el-autocomplete",{style:{width:"100%"},attrs:{"trigger-on-focus":!0,size:"small","fetch-suggestions":e.querySearchAsync,placeholder:e.$lang.enter_associated_with_user},on:{input:e.clearUid,select:e.handleSelect},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.item;return[a("el-row",[a("el-col",{attrs:{span:24}},[a("span",{staticStyle:{"font-size":"14px"}},[e._v(e._s(r.username))]),a("span",[e._v(e._s(r.companyname?" ("+r.companyname+")":""))]),a("span",[e._v(e._s(r.id?" - #"+r.id:""))])]),a("el-col",{staticStyle:{"margin-top":"-10px"},attrs:{span:24}},[a("span",{staticStyle:{"font-size":"12px",color:"#999"}},[e._v(e._s(r.email))])])],1)]}}],null,!1,1605673202),model:{value:e.addformData.username,callback:function(t){e.$set(e.addformData,"username",t)},expression:"addformData.username"}})],1)],1),a("el-col",{attrs:{xs:24,span:12}},[a("el-form-item",{attrs:{label:e.$lang.time,prop:"pay_time"}},[a("el-date-picker",{style:{width:"100%"},attrs:{size:"small",type:"datetime","value-format":"timestamp",placeholder:e.$lang.select_time,clearable:""},model:{value:e.addformData.pay_time,callback:function(t){e.$set(e.addformData,"pay_time",t)},expression:"addformData.pay_time"}})],1)],1),a("el-col",{attrs:{xs:24,span:12}},[a("el-form-item",{attrs:{label:e.$lang.describe,prop:"description"}},[a("el-input",{style:{width:"100%"},attrs:{size:"small",placeholder:e.$lang.enter_describe,clearable:""},model:{value:e.addformData.description,callback:function(t){e.$set(e.addformData,"description",t)},expression:"addformData.description"}})],1)],1),a("el-col",{attrs:{xs:24,span:12}},[a("el-form-item",{attrs:{label:e.$lang.payment_account_number,prop:"trans_id"}},[a("el-input",{style:{width:"100%"},attrs:{size:"small",placeholder:e.$lang.please_enter_payment_account_number,clearable:""},model:{value:e.addformData.trans_id,callback:function(t){e.$set(e.addformData,"trans_id",t)},expression:"addformData.trans_id"}})],1)],1),a("el-col",{attrs:{xs:24,span:12}},[a("el-form-item",{attrs:{label:e.$lang.bill_serial_number,prop:"invoice_id"}},[a("el-select",{style:{width:"100%"},attrs:{size:"small",placeholder:e.$lang.select_bill_serial_number,filterable:"",clearable:""},model:{value:e.addformData.invoice_id,callback:function(t){e.$set(e.addformData,"invoice_id",t)},expression:"addformData.invoice_id"}},e._l(e.invoiceOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1)],1),a("el-col",{attrs:{xs:24,span:12}},[a("el-form-item",{attrs:{label:e.$lang.payment_term,prop:"gateway"}},[a("el-select",{style:{width:"100%"},attrs:{size:"small",placeholder:e.$lang.select_payment_term,clearable:""},model:{value:e.addformData.gateway,callback:function(t){e.$set(e.addformData,"gateway",t)},expression:"addformData.gateway"}},e._l(e.gatewayOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.title,value:e.name,disabled:e.disabled}})})),1)],1)],1),a("el-col",{attrs:{xs:24,span:12}},[a("el-form-item",{attrs:{label:e.$lang.income,prop:"amount_in"}},[a("el-input-number",{style:{width:"100%"},attrs:{size:"small",controls:!1,precision:2,placeholder:e.$lang.enter_income,clearable:""},model:{value:e.addformData.amount_in,callback:function(t){e.$set(e.addformData,"amount_in",t)},expression:"addformData.amount_in"}})],1)],1),a("el-col",{attrs:{xs:24,span:12}},[a("el-form-item",{attrs:{label:e.$lang.expenditure,prop:"amount_out"}},[a("el-input-number",{style:{width:"100%"},attrs:{size:"small",controls:!1,precision:2,placeholder:e.$lang.enter_expenditure,clearable:""},model:{value:e.addformData.amount_out,callback:function(t){e.$set(e.addformData,"amount_out",t)},expression:"addformData.amount_out"}})],1)],1),a("el-col",{attrs:{xs:24,span:12}},[a("el-form-item",{attrs:{label:e.$lang.currency_type,prop:"currency"}},[a("el-select",{style:{width:"100%"},attrs:{size:"small",placeholder:e.$lang.select_currency_type,clearable:""},model:{value:e.addformData.currency,callback:function(t){e.$set(e.addformData,"currency",t)},expression:"addformData.currency"}},e._l(e.currencyOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.code,value:e.code,disabled:e.disabled}})})),1)],1)],1),a("el-col",{attrs:{xs:24,span:12}},[a("el-form-item",{attrs:{label:e.$lang.advance,prop:"refund"}},[a("el-checkbox",{attrs:{"true-label":"1","false-label":"0"},model:{value:e.addformData.refund,callback:function(t){e.$set(e.addformData,"refund",t)},expression:"addformData.refund"}},[e._v(e._s(e.$lang.add_to_user_balance)+" ")])],1)],1),a("el-col",{staticClass:"tac",attrs:{span:24}},[a("el-button",{attrs:{size:"small",type:"primary",loading:e.btnLoading},on:{click:e.addSubmitForm}},[e._v(e._s(e.$lang.submit))]),a("el-button",{attrs:{size:"small"},on:{click:e.resetForm}},[e._v(e._s(e.$lang.reset))])],1)],1)],1)]:e._e()],2),a("el-table",{staticClass:"mt-20",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""},on:{"sort-change":e.sortChange}},[a("div",{attrs:{slot:"empty"},slot:"empty"},[!e.tableData.length&&e.tableLoading?a("span",[a("i",{staticClass:"el-icon-loading"}),e._v(" "+e._s(e.$lang.loading)+" ... ")]):e._e(),e.tableData.length||e.tableLoading?e._e():a("span",[e._v(e._s(e.$lang.no_data))])]),a("el-table-column",{attrs:{label:e.$lang.client_name,prop:"username"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{path:"/customer-view/abstract",query:{id:t.row.uid}}}},[a("el-link",{on:{click:function(a){return e.goToView(t.row.uid)}}},[e._v(e._s(t.row.username))]),a("div",{style:{color:"#798494"}},[e._v(e._s(t.row.companyname))])],1)]}}])}),a("el-table-column",{attrs:{label:e.$lang.time,prop:"create_time",width:"135",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.pay_time?e.$moment(1e3*t.row.pay_time).format("YYYY-MM-DD HH:mm"):"-"))])]}}])}),a("el-table-column",{attrs:{label:e.$lang.payment_term,prop:"gateway"}}),a("el-table-column",{attrs:{label:e.$lang.describe,prop:"description"}}),a("el-table-column",{attrs:{label:e.$lang.sum,prop:"amount_in",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-row",[parseFloat(r.amount_in-r.amount_out)>0||parseFloat(r.amount_in-r.amount_out)<0?a("el-col",[e._v(" "+e._s(r.prefix)+e._s(parseFloat(r.amount_in-r.amount_out).toFixed(2))+e._s(r.suffix)+" ")]):0===parseFloat(r.amount_in-r.amount_out)?a("el-col",[e._v(" "+e._s(r.prefix)+e._s(parseFloat(r.amount_in).toFixed(2))+e._s(r.suffix)+" ")]):e._e()],1)]}}])}),a("el-table-column",{attrs:{label:e.$lang.sell,prop:"sale_id",width:"110"}}),a("el-table-column",{attrs:{label:e.$lang.serial_number,prop:"trans_id",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("div",{staticClass:"flowtd"},[a("div",{staticClass:"flowtd-top"},[e._v(e._s(e.$lang.bill)+": "),a("router-link",{attrs:{to:{path:"/bill-detail",query:{id:r.invoice_id,uid:r.uid}},tag:"div"}},[a("el-link",[e._v("("+e._s("#"+r.invoice_id)+")")])],1)],1),a("div",{staticClass:"flowtd-bottom"},[e._v(e._s(e.$lang.serial_number)+":"+e._s(r.trans_id||"-"))])])]}}])}),a("el-table-column",{attrs:{label:e.$lang.type,prop:"type_zh",width:"80",align:"center"}}),a("el-table-column",{attrs:{label:e.$lang.operation,width:"135",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"span-primary",attrs:{size:"small",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.editStatement(t.row)}}},[e._v(e._s(e.$lang.edit))]),a("el-button",{staticClass:"span-danger",attrs:{size:"small",type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v(e._s(e.$lang.delete))])]}}])})],1),a("div",{staticClass:"clearfix"},[a("span",{staticClass:"mr-20 fr"},[a("span",{staticClass:"total-label"},[e._v(e._s(e.$lang.this_page_in_total)+": ")]),a("span",[e._v(e._s(e.price))])])]),a("el-pagination",{staticClass:"mt-10 mb-10",attrs:{"current-page":e.search.page,"page-sizes":[10,15,20,25,50,100],"page-size":e.search.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.currentChange,"update:currentPage":function(t){return e.$set(e.search,"page",t)},"update:current-page":function(t){return e.$set(e.search,"page",t)},"update:pageSize":function(t){return e.$set(e.search,"limit",t)},"update:page-size":function(t){return e.$set(e.search,"limit",t)}}}),a("el-dialog",e._g(e._b({attrs:{visible:e.dialogVisible,title:e.$lang.edit_flow_record},on:{open:e.onOpen,close:e.onClose}},"el-dialog",e.$attrs,!1),e.$listeners),[a("el-row",{attrs:{gutter:100}},[a("el-form",{ref:"editForm",attrs:{model:e.editformData,rules:e.editrules,"label-width":"80px"}},[a("el-col",{attrs:{xs:24,span:12}},[a("el-form-item",{attrs:{label:e.$lang.running_water_id,prop:"id"}},[a("el-input",{style:{width:"100%"},attrs:{size:"small",placeholder:e.$lang.enter_running_water_id,readonly:"",clearable:""},model:{value:e.editformData.id,callback:function(t){e.$set(e.editformData,"id",t)},expression:"editformData.id"}})],1)],1),a("el-col",{attrs:{xs:24,span:12}},[a("el-form-item",{attrs:{label:e.$lang.payment_mode,prop:"gateway"}},[a("el-select",{style:{width:"100%"},attrs:{size:"small",placeholder:e.$lang.select_payment,clearable:""},model:{value:e.editformData.gateway,callback:function(t){e.$set(e.editformData,"gateway",t)},expression:"editformData.gateway"}},e._l(e.gatewayDiaOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.title,value:e.name,disabled:e.disabled}})})),1)],1)],1),a("el-col",{attrs:{xs:24,span:12}},[a("el-form-item",{attrs:{label:e.$lang.time,prop:"pay_time"}},[a("el-date-picker",{style:{width:"100%"},attrs:{size:"small",type:"date","value-format":"timestamp",placeholder:e.$lang.select_time,clearable:""},model:{value:e.editformData.pay_time,callback:function(t){e.$set(e.editformData,"pay_time",t)},expression:"editformData.pay_time"}})],1)],1),a("el-col",{attrs:{xs:24,span:12}},[a("el-form-item",{attrs:{label:e.$lang.income,prop:"amount_in"}},[a("el-input-number",{style:{width:"100%"},attrs:{size:"small",controls:!1,precision:2,placeholder:e.$lang.enter_income,clearable:""},model:{value:e.editformData.amount_in,callback:function(t){e.$set(e.editformData,"amount_in",t)},expression:"editformData.amount_in"}})],1)],1),a("el-col",{attrs:{xs:24,span:12}},[a("el-form-item",{attrs:{label:e.$lang.expenditure,prop:"amount_out"}},[a("el-input-number",{style:{width:"100%"},attrs:{size:"small",controls:!1,precision:2,placeholder:e.$lang.enter_expenditure,clearable:""},model:{value:e.editformData.amount_out,callback:function(t){e.$set(e.editformData,"amount_out",t)},expression:"editformData.amount_out"}})],1)],1),a("el-col",{attrs:{xs:24,span:12}},[a("el-form-item",{attrs:{label:e.$lang.bill_id,prop:"invoice_id"}},[a("el-select",{style:{width:"100%"},attrs:{size:"small",placeholder:e.$lang.select_bill_serial_number,filterable:"",clearable:""},model:{value:e.editformData.invoice_id,callback:function(t){e.$set(e.editformData,"invoice_id",t)},expression:"editformData.invoice_id"}},e._l(e.invoiceOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.close}},[e._v(e._s(e.$lang.cancel))]),a("el-button",{attrs:{size:"small",type:"primary",loading:e.btnLoading},on:{click:e.handelConfirm}},[e._v(e._s(e.$lang.confirm))])],1)],1),a("div",{staticClass:"summary"},[a("h2",[e._v(e._s(e.$lang.summation))]),a("el-table",{attrs:{data:e.summary,border:""}},[a("div",{attrs:{slot:"empty"},slot:"empty"},[!e.summary.length&&e.tableLoading02?a("span",[a("i",{staticClass:"el-icon-loading"}),e._v(" "+e._s(e.$lang.loading)+" ... ")]):e._e(),e.summary.length||e.tableLoading02?e._e():a("span",[e._v(e._s(e.$lang.no_data))])]),a("el-table-column",{attrs:{prop:"code",label:e.$lang.currency}}),a("el-table-column",{attrs:{prop:"info.amount_in",label:e.$lang.total_income},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.info.amount_in)+" ")]}}])}),a("el-table-column",{attrs:{prop:"info.amount_out",label:e.$lang.total_spend},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.info.amount_out)+" ")]}}])}),a("el-table-column",{attrs:{prop:"info.surplus",label:e.$lang.total_surplus},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.info.surplus)+" ")]}}])})],1)],1)],1)},n=[],l=(a("4160"),a("b0c0"),a("a9e3"),a("d3b7"),a("ac1f"),a("25f0"),a("841c"),a("1276"),a("159b"),a("96cf"),a("1da1")),s=a("af9c"),i=a("19d6"),o={metaInfo:{title:window.zjmf_cw_lang.deal_flow},filters:{typeFilter:function(e){switch(e){case"recharge":return"充值";case"host":return"产品";case"renew":return"续费";case"all":return"全部";case"combine":return"合并账单"}}},data:function(){return{price:"",flowloading:!1,searchArea:!1,flowArea:!1,tableLoading02:!1,tableLoading:!1,saleOptions:[],activeName:"",tableData:[],total:0,limit:Number(localStorage.getItem("limit"))||50,currentPage:1,temp:{},dialogVisible:!1,summary:[],search:{username:"",sale_id:"",uid:void 0,page:1,limit:Number(localStorage.getItem("limit"))||50,order:"id",sort:"DESC",show:void 0,description:void 0,trans_id:void 0,start_time:void 0,end_time:void 0,amount:void 0,gateway:void 0,type:""},showOptions:[{label:this.$lang.payment_has_been_received,value:"amount_in"},{label:this.$lang.payment_has_been_sent,value:"amount_out"}],paymentOptions:[],addformData:{refund:0,uid:void 0,pay_time:null,description:void 0,trans_id:void 0,invoice_id:void 0,gateway:void 0,amount_in:0,amount_out:0,fees:0,currency:void 0},addrules:{uid:[{required:!0,message:this.$lang.select_the_associated_user,trigger:"change"}],pay_time:[{required:!0,message:this.$lang.select_time,trigger:"change"}],description:[{required:!0,message:this.$lang.enter_describe,trigger:"change"}],trans_id:[],invoice_id:[],gateway:[],amount_in:[],amount_out:[],currency:[],fees:[]},uidOptions:[],invoiceOptions:[],gatewayOptions:[],currencyOptions:[],editformData:{id:void 0,currency:1,gateway:void 0,pay_time:null,amount_in:void 0,amount_out:void 0,fees:void 0,invoice_id:void 0},editrules:{id:[{required:!0,message:this.$lang.enter_running_water_id,trigger:"blur"}],currency:[],gateway:[],pay_time:[],amount_in:[],amount_out:[],fees:[],invoice_id:[]},gatewayDiaOptions:[],btnLoading:!1,typeTabActive:"",typeOptions:[{label:this.$lang.all,value:""},{label:this.$lang.recharge,value:"recharge"},{label:this.$lang.product,value:"host"},{label:this.$lang.renew,value:"renew"}]}},methods:{tabsSearch:function(e){window.cancel(),this.search.type=e.name,this.getTableData()},changeSearchArea:function(){this.flowArea=!1,this.searchArea=!this.searchArea},changeFlowArea:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.flowloading=!0,t.next=3,e.handleClick();case 3:e.searchArea=!1,e.flowArea=!e.flowArea,e.flowloading=!1;case 6:case"end":return t.stop()}}),t)})))()},clearUid:function(){this.addformData.uid=""},handleSelect:function(e){"notFound"!==e.type&&(this.addformData.username=e.username,this.addformData.uid=e.id)},querySearchAsync:function(e,t){var a=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var n,l,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(s["f"])(e);case 2:if(n=r.sent,l=n.data,200===l.status){r.next=7;break}return a.$message.error(l.msg),r.abrupt("return");case 7:l.data.length?t(l.data):(i=[{username:a.$lang.no_relevant_data_could_be_found,type:"notFound"}],t(i));case 8:case"end":return r.stop()}}),r)})))()},getTableData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$urlUpdate(e.search,location.href,e.$route.query),e.tableLoading=!0,e.activeName="",e.btnLoading=!0,e.tableLoading02=!0,t.next=7,Object(i["g"])(e.search);case 7:if(a=t.sent,r=a.data,200===r.status){t.next=14;break}return e.$message.error(e.$lang.request_failed),t.abrupt("return",!1);case 14:e.tableData=r.data,e.total=r.page.total,e.summary=e.objToArr(r.count),e.price=r.amount_in_totals;case 18:e.btnLoading=!1,e.tableLoading=!1,e.tableLoading02=!1;case 21:case"end":return t.stop()}}),t)})))()},sortChange:function(e,t,a){this.search.order=e.prop,"ascending"===e.order?this.search.sort="AESC":this.search.sort="DESC",this.getTableData()},goToView:function(e){this.$router.push({path:"/customer-view/abstract",query:{id:e}})},getPaymentData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["f"])();case 2:if(a=t.sent,r=a.data,200===r.status){t.next=7;break}return e.$message.error(r.msg),t.abrupt("return");case 7:e.paymentOptions=r.gateway,e.saleOptions=r.salelist;case 9:case"end":return t.stop()}}),t)})))()},handleClick:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["e"])();case 2:if(a=t.sent,r=a.data,200===r.status){t.next=7;break}return e.$message.error(r.msg),t.abrupt("return");case 7:e.gatewayOptions=r.data.gateways,e.currencyOptions=r.data.currency,e.addformData.currency=e.currencyOptions.length?e.currencyOptions[0].code:void 0,e.addformData.pay_time=Number((new Date).getTime().toString().substr(0,10)+"000");case 11:case"end":return t.stop()}}),t)})))()},userSelectChange:function(e){var t=this;(this.uidOptions||[]).forEach((function(a){a.id===e&&(t.invoiceOptions=a.invoices)}))},handleDelete:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.$confirm(t.$lang.delete_flow_record_hint,t.$lang.hint,{confirmButtonText:t.$lang.confirm,cancelButtonText:t.$lang.cancel,type:"warning"}).then((function(){Object(i["b"])(e.id).then((function(e){200!==e.data.status?t.$message.error(e.data.msg):(t.$message.success(t.$lang.stream_has_been_deleted),t.getTableData())}))})).catch((function(){}));case 1:case"end":return a.stop()}}),a)})))()},editStatement:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.dialogVisible=!0,t.editformData.id=e.id,a.next=4,Object(i["c"])(e.id);case 4:r=a.sent,t.gatewayDiaOptions=r.data.gateway,t.invoiceOptions=r.data.invoices,r.data.list.pay_time=r.data.list.pay_time?1e3*r.data.list.pay_time:(new Date).getTime(),t.editformData=r.data.list;case 9:case"end":return a.stop()}}),a)})))()},resetSearchForm:function(){this.$refs.elForm.resetFields(),this.search.show=void 0},addSubmitForm:function(){var e=this;this.$refs.addForm.validate(function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return",!1);case 2:if(e.addformData.uid){t.next=5;break}return e.$message.error(e.$lang.enter_associated_user),t.abrupt("return");case 5:return e.btnLoading=!0,t.next=8,Object(i["a"])(e.addformData);case 8:r=t.sent,200===r.data.status?(e.$message.success(r.data.msg),e.getTableData(),e.$refs.addForm.resetFields(),Object.assign(e.addformData,e.$options.data().addformData),e.$nextTick((function(){e.$refs.addForm.clearValidate(),e.addformData.username=""}))):e.$message.error(r.data.msg),e.btnLoading=!1;case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},resetForm:function(){this.$refs.addForm.resetFields()},handleSizeChange:function(e){this.search.page=1,this.getTableData()},currentChange:function(e){this.getTableData()},onOpen:function(){},onClose:function(){this.$refs.editForm.resetFields(),this.dialogVisible=!1},close:function(){this.dialogVisible=!1,this.$emit("update:visible",!1)},handelConfirm:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.editForm.validate(function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return",!1);case 2:return e.btnLoading=!0,t.next=5,Object(i["d"])(e.editformData.id,e.editformData);case 5:r=t.sent,200!==r.data.status?e.$message.error(r.data.msg):(e.close(),e.$message.success(r.data.msg),e.summary=[],e.getTableData()),e.btnLoading=!1;case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},objToArr:function(e){var t=[];for(var a in e){var r={code:a,info:e[a]};t.push(r)}return t}},created:function(){var e=location.href.split("searchObj")[1]?this.$arrangeUrl(encodeURI(location.href.split("searchObj")[1])):void 0;if(e)for(var t in JSON.parse(e))this.search[t]=JSON.parse(e)[t];this.getPaymentData(),this.getTableData()}},c=o,u=(a("10c2"),a("2877")),d=Object(u["a"])(c,r,n,!1,null,"4b621598",null);t["default"]=d.exports}}]);