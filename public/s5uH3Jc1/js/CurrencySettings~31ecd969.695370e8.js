(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["CurrencySettings~31ecd969"],{8418:function(e,t,a){"use strict";var r=a("c04e"),n=a("9bf2"),c=a("5c6c");e.exports=function(e,t,a){var l=r(t);l in e?n.f(e,l,c(0,a)):e[l]=a}},"99af":function(e,t,a){"use strict";var r=a("23e7"),n=a("d039"),c=a("e8b5"),l=a("861d"),s=a("7b0b"),o=a("50c4"),i=a("8418"),u=a("65f0"),d=a("1dde"),f=a("b622"),g=a("2d00"),m=f("isConcatSpreadable"),p=9007199254740991,b="Maximum allowed index exceeded",h=g>=51||!n((function(){var e=[];return e[m]=!1,e.concat()[0]!==e})),_=d("concat"),$=function(e){if(!l(e))return!1;var t=e[m];return void 0!==t?!!t:c(e)},v=!h||!_;r({target:"Array",proto:!0,forced:v},{concat:function(e){var t,a,r,n,c,l=s(this),d=u(l,0),f=0;for(t=-1,r=arguments.length;t<r;t++)if(c=-1===t?l:arguments[t],$(c)){if(n=o(c.length),f+n>p)throw TypeError(b);for(a=0;a<n;a++,f++)a in c&&i(d,f,c[a])}else{if(f>=p)throw TypeError(b);i(d,f++,c)}return d.length=f,d}})},faa5:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"currency"},[a("h5",{staticClass:"mt-0"},[e._v(e._s(e.$lang.currency_tips_text))]),a("el-button",{attrs:{size:"small",icon:"el-icon-bottom",type:"primary",plain:"",loading:e.rateLoading},on:{click:e.updateRate}},[e._v(e._s(e.$lang.exchange_rate_update)+" ")]),a("el-button",{attrs:{size:"small",icon:"el-icon-bottom",type:"success",plain:"",loading:e.priceLoading},on:{click:e.updataPrice}},[e._v(e._s(e.$lang.price_update)+" ")]),a("el-table",{staticClass:"mt-10",staticStyle:{width:"100%"},attrs:{data:e.tableData.filter((function(t){return!e.search||t.name.toLowerCase().includes(e.search.toLowerCase())})),border:""}},[a("div",{attrs:{slot:"empty"},slot:"empty"},[!e.tableData.length&&e.tableLoading?a("span",[a("i",{staticClass:"el-icon-loading"}),e._v(" "+e._s(e.$lang.loading)+" ... ")]):e._e(),e.tableData.length||e.tableLoading?e._e():a("span",[e._v(e._s(e.$lang.no_data))])]),a("el-table-column",{attrs:{label:"ID",prop:"id",width:"80",align:"center"}}),a("el-table-column",{attrs:{label:e.$lang.currency_code,prop:"code",width:"120",align:"center"}}),a("el-table-column",{attrs:{label:e.$lang.prefix_for_example,prop:"prefix",width:"150",align:"center"}}),a("el-table-column",{attrs:{label:e.$lang.suffix,prop:"suffix",width:"80",align:"center"}}),a("el-table-column",{attrs:{label:e.$lang.format,prop:"format"}}),a("el-table-column",{attrs:{label:e.$lang.exchange_rate,prop:"rate"}}),a("el-table-column",{attrs:{label:e.$lang.operation,width:"325"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"span-success",attrs:{size:"small",type:"text",icon:"el-icon-edit",disabled:1===t.row.default},on:{click:function(a){return e.setDefault(t.row)}}},[e._v(e._s(e.$lang.set_default_currency))]),a("el-button",{staticClass:"span-primary",attrs:{size:"small",type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.editCurrency(t.row)}}},[e._v(" "+e._s(e.$lang.edit)+" ")]),a("el-button",{staticClass:"span-danger",attrs:{size:"small",type:"text",icon:"el-icon-delete",disabled:1===t.row.default},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v(e._s(e.$lang.delete))])]}}])})],1),a("el-dialog",e._g(e._b({attrs:{title:e.editFlag?e.$lang.edit_currency:e.$lang.add_currency,visible:e.dialogVisible},on:{open:e.onOpen,close:e.onClose,"update:visible":function(t){e.dialogVisible=t}}},"el-dialog",e.$attrs,!1),e.$listeners),[a("el-row",[a("el-form",{ref:"elForm",attrs:{model:e.formData,rules:e.rules,"label-width":"80px"}},[a("el-col",{attrs:{span:22}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$lang.currency_code,prop:"code"}},[a("el-input",{style:{width:"100%"},attrs:{size:"small",placeholder:e.$lang.currency_code_pla,clearable:""},model:{value:e.formData.code,callback:function(t){e.$set(e.formData,"code",t)},expression:"formData.code"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$lang.prefix,prop:"prefix"}},[a("el-input",{style:{width:"100%"},attrs:{size:"small",placeholder:e.$lang.prefix_pla,clearable:""},model:{value:e.formData.prefix,callback:function(t){e.$set(e.formData,"prefix",t)},expression:"formData.prefix"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$lang.suffix,prop:"suffix"}},[a("el-input",{style:{width:"100%"},attrs:{size:"small",placeholder:e.$lang.suffix_pla,clearable:""},model:{value:e.formData.suffix,callback:function(t){e.$set(e.formData,"suffix",t)},expression:"formData.suffix"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.$lang.exchange_rate,prop:"rate"}},[a("el-input",{style:{width:"100%"},attrs:{size:"small",placeholder:e.$lang.exchange_rate_pla,clearable:""},model:{value:e.formData.rate,callback:function(t){e.$set(e.formData,"rate",t)},expression:"formData.rate"}})],1)],1)],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.close}},[e._v(e._s(e.$lang.cancel))]),a("el-button",{attrs:{size:"small",type:"primary",loading:e.btnLoading},on:{click:e.submitDialog}},[e._v(e._s(e.$lang.confirm))])],1)],1)],1)},n=[],c=(a("99af"),a("a9e3"),a("96cf"),a("1da1")),l=a("a27e");function s(e,t){return Object(l["a"])({url:"currency/currency_list",params:{limit:e,page:t}})}function o(e){return Object(l["a"])({url:"currency/add_currency",method:"post",data:e})}function i(e){return Object(l["a"])({url:"currency/delete_currency/".concat(e),method:"get"})}function u(e){return Object(l["a"])({url:"currency/edit_currency/".concat(e)})}function d(e){return Object(l["a"])({url:"currency/edit_currency_post",method:"post",data:e})}function f(){return Object(l["a"])({url:"currency/update_rate"})}function g(){return Object(l["a"])({url:"currency/update_price"})}function m(e){return Object(l["a"])({url:"currency/default_currency/".concat(e)})}var p={inject:["reload"],metaInfo:{title:window.zjmf_cw_lang.currency_allocation},data:function(){return{tableLoading:!1,rateLoading:!1,priceLoading:!1,tableData:[],search:"",dialogVisible:!1,addData:{},editFlag:!1,formData:{code:void 0,prefix:void 0,suffix:void 0,format:void 0,rate:void 0,editRow:void 0},rules:{code:[{required:!0,message:this.$lang.currency_code_pla,trigger:"blur"}],prefix:[],suffix:[],format:[],rate:[]},formatOptions:[{label:"1234.56",value:"1234.56"},{label:"1,234.56",value:"1,234.56"},{label:"1.234,56",value:"1.234,56"},{label:"1,234",value:"1,234"}],btnLoading:!1}},methods:{editCurrency:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.editFlag=!0,a.next=3,u(e.id);case 3:if(r=a.sent,n=r.data.currency,n){a.next=8;break}return t.$message.error(t.$lang.there_an_error),a.abrupt("return");case 8:t.formData=n,t.dialogVisible=!0;case 10:case"end":return a.stop()}}),a)})))()},handleDelete:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.$confirm(t.$lang.del_currency_go_on,t.$lang.hint,{confirmButtonText:t.$lang.confirm,cancelButtonText:t.$lang.cancel,type:"warning"}).then((function(){i(e.id).then((function(e){200!==e.data.status?t.$message.error(e.data.msg):(t.$message.success(t.$lang.stream_has_been_deleted),t.reload())}))})).catch((function(){t.reload()}));case 1:case"end":return a.stop()}}),a)})))()},getCurrencyList:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.tableLoading=!0,t.next=3,s();case 3:a=t.sent,r=a.data,200!==r.status?e.$message.error(e.$lang.request_failed):e.tableData=r.currencies,e.tableLoading=!1;case 7:case"end":return t.stop()}}),t)})))()},setDefault:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.$confirm("".concat(t.$lang.yaoba).concat(e.code).concat(t.$lang.setting_default_curreny_go_on),t.$lang.hint,{confirmButtonText:t.$lang.confirm,cancelButtonText:t.$lang.cancel,type:"warning"}).then((function(){m(e.id).then((function(e){200!==e.data.status?t.$message.error(e.data.msg):(t.$message.success(e.data.msg),t.reload())}))})).catch((function(){}));case 1:case"end":return a.stop()}}),a)})))()},onOpen:function(){},onClose:function(){this.$refs.elForm.resetFields(),this.editFlag=!1,this.formData={}},close:function(){this.dialogVisible=!1,this.editFlag=!1,this.formData={}},submitDialog:function(){var e=this;this.editFlag?this.$refs.elForm.validate(function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=4;break}e.$message.error(e.$lang.please_fill_the_content_correctly),t.next=8;break;case 4:return t.next=6,d(e.formData);case 6:r=t.sent,200===r.status?(e.$message.success(e.$lang.update_success),e.getCurrencyList(),setTimeout((function(){e.close()}),500)):e.$message.error(r.msg);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):this.$refs.elForm.validate(function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=5;break}return e.$message.error(e.$lang.please_fill_the_content_correctly),t.abrupt("return");case 5:return e.addData.code=e.formData.code,e.addData.prefix=e.formData.prefix,e.addData.suffix=e.formData.suffix,e.addData.format=e.formData.format,e.addData.rate=Number(e.formData.rate),e.btnLoading=!0,t.next=13,o(e.formData);case 13:r=t.sent,200!==r.data.status?e.$message.error(r.data.msg):(e.$message.success(e.$lang.successfully_added),setTimeout((function(){e.getCurrencyList()}),800)),e.btnLoading=!1;case 16:e.close();case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},updateRate:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.rateLoading=!0,t.next=3,f();case 3:if(a=t.sent,200!==a.data.status)e.$message.error(a.data.msg);else{for(r=function(t){var r=a.data.data[t];setTimeout((function(){e.$message.success(r.msg)}),800)},n=0;n<a.data.data.length;n++)r(n);e.reload()}e.rateLoading=!1;case 6:case"end":return t.stop()}}),t)})))()},updataPrice:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.priceLoading=!0,t.next=3,g();case 3:a=t.sent,200!==a.data.status?e.$message.error(a.data.msg):(e.$message.success(a.data.msg),e.reload()),e.priceLoading=!1;case 6:case"end":return t.stop()}}),t)})))()}},created:function(){this.getCurrencyList()}},b=p,h=a("2877"),_=Object(h["a"])(b,r,n,!1,null,null,null);t["default"]=_.exports}}]);