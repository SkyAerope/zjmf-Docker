(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["knowledgeBase~f71cff67"],{26476:function(e,t,a){"use strict";a.d(t,"l",(function(){return s})),a.d(t,"b",(function(){return r})),a.d(t,"d",(function(){return l})),a.d(t,"a",(function(){return o})),a.d(t,"g",(function(){return i})),a.d(t,"e",(function(){return c})),a.d(t,"m",(function(){return u})),a.d(t,"f",(function(){return d})),a.d(t,"n",(function(){return f})),a.d(t,"k",(function(){return p})),a.d(t,"j",(function(){return h})),a.d(t,"p",(function(){return m})),a.d(t,"h",(function(){return g})),a.d(t,"o",(function(){return b})),a.d(t,"i",(function(){return k}));var n=a("a27e");function s(e){return Object(n["a"])({url:"resource_party/resourcepartylist",params:e})}function r(e){return Object(n["a"])({url:"resource_party/checkresourceparty",method:"post",data:e})}function l(e){return Object(n["a"])({url:"agent/agentlist",params:e})}function o(e){return Object(n["a"])({url:"agent/checkagent",method:"post",data:e})}function i(e){return Object(n["a"])({url:"link_cause/list",method:"get",params:e})}function c(e){return Object(n["a"])({url:"link_cause/create",method:"get",params:e})}function u(e){return Object(n["a"])({url:"link_cause/add",method:"post",data:e})}function d(e){return Object(n["a"])({url:"link_cause/edit",method:"get",params:e})}function f(e){return Object(n["a"])({url:"link_cause/save",method:"post",data:e})}function p(e){return Object(n["a"])({url:"link_knowledge/list",method:"get",params:e})}function h(e){return Object(n["a"])({url:"link_knowledge/edit",method:"get",params:e})}function m(e){return Object(n["a"])({url:"link_knowledge/save",method:"post",data:e})}function g(e){return Object(n["a"])({url:"link_knowledge/create",method:"get",params:e})}function b(e){return Object(n["a"])({url:"link_knowledge/add",method:"post",data:e})}function k(e){return Object(n["a"])({url:"link_knowledge/delete",method:"get",params:e})}t["c"]={getUserListReq:function(e){return n["a"].get("interflow/userMap",{params:e})},getSettingReq:function(e){return n["a"].get("interflow/seting",{params:e})},setSettingReq:function(e){return n["a"].post("interflow/seting",e)},managementListReq:function(e){return n["a"].get("pl_index/automatic/",e)},installManagementReq:function(e){return n["a"].post("pl_install",e)},managementToggleReq:function(e){return n["a"].post("pl_toggle",e)},managementSettingReq:function(e){return n["a"].post("pl_setting_post",e)},managementUninstallReq:function(e){return n["a"].post("pl_uninstall",e)},botListReq:function(e){return n["a"].get("interflow/botAccount",{params:e})},addBotReq:function(e){return n["a"].post("interflow/botAccountPost",e)},delBotReq:function(e){return n["a"].post("interflow/botAccountDelete",e)},botLoginReq:function(e){return n["a"].post("interflow/botAccountLogin",e)},botLoginOutReq:function(e){return n["a"].post("interflow/botAccountLoginOut",e)},getSelectReq:function(e){return n["a"].get("interflow/funcLoadList",{params:e})},getDetailReq:function(e){return n["a"].get("interflow/funcLoadContent",{params:e})},setDetailReq:function(e){return n["a"].post("interflow/funcRegister",e)},getModListReq:function(e){return n["a"].get("interflow/funcRegisterList",{params:e})},getKeyWordsListReq:function(e){return n["a"].get("interflow/keywordList",{params:e})},getKeyWordsDeatailsReq:function(e){return n["a"].get("interflow/keywordInfo",{params:e})},delKeyWordsReq:function(e){return n["a"].post("interflow/keywordDel",e)},setKeyWordsReq:function(e){return n["a"].post("interflow/keywordSave",e)},getInstructionReq:function(e){return n["a"].get("interflow/executeMap",{params:e})},getTemplateParamsReq:function(e){return n["a"].get("interflow/templateParams",{params:e})},changeKeywordsReq:function(e){return n["a"].post("interflow/keywordExecuteSwitch",e)},checkBotStatusReq:function(e){return n["a"].get("interflow/botCheckStatus",{params:e})}}},"32bf":function(e,t,a){"use strict";var n=a("bb68"),s=a.n(n);s.a},bb68:function(e,t,a){},cc46:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"knowledge-base"},[a("h2",[e._v("知识库管理")]),a("div",{staticStyle:{"margin-bottom":"10px"}},[a("el-button",{attrs:{type:"primary",size:"small",loading:e.createLoading},on:{click:e.createCate}},[e._v("创建知识库")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"title",label:"标题"}}),a("el-table-column",{attrs:{prop:"level_view_name",label:"分类"}}),a("el-table-column",{attrs:{prop:"keywords",label:"关键字"}}),a("el-table-column",{attrs:{prop:"type_name",label:"类型"}}),a("el-table-column",{attrs:{prop:"address",label:"管理",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("div",[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.editRow(n)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.deleteRow(n)}}},[e._v("删除")])],1)]}}])})],1),a("el-dialog",{attrs:{title:e.editFlag?"编辑知识库":"创建知识库",visible:e.showCreateDialog,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.showCreateDialog=t}}},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.formData,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入标题"},model:{value:e.formData.title,callback:function(t){e.$set(e.formData,"title",t)},expression:"formData.title"}})],1),a("el-form-item",{attrs:{label:"分类",prop:"link_cause"}},[a("TreeSelect",{style:{width:"100%"},attrs:{defaultExpandAll:!1,leaf:"",filterable:!0,props:e.defaultProps,data:e.cateData,nowrap:""},on:{change:e.changeTreeHandler},model:{value:e.formData.link_cause,callback:function(t){e.$set(e.formData,"link_cause",t)},expression:"formData.link_cause"}})],1),a("el-form-item",{attrs:{label:"关键字",prop:"keyword"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入关键字，多个用 ',' 隔开"},model:{value:e.formData.keyword,callback:function(t){e.$set(e.formData,"keyword",t)},expression:"formData.keyword"}})],1),a("el-form-item",{attrs:{label:"类型",prop:"type"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"请选择类型"},model:{value:e.formData.type,callback:function(t){e.$set(e.formData,"type",t)},expression:"formData.type"}},e._l(e.typeOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"回复",prop:"reply"}},[a("el-input",{attrs:{size:"small",type:"textarea",rows:5,placeholder:"请输入回复"},model:{value:e.formData.reply,callback:function(t){e.$set(e.formData,"reply",t)},expression:"formData.reply"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:e.createCateSubmit}},[e._v("确 定")]),a("el-button",{on:{click:e.handleClose}},[e._v("取 消")])],1)],1)],1)},s=[],r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wl-tree-select",style:{width:e.width+"px"}},[a("el-popover",{attrs:{placement:"bottom",width:e.width,trigger:e.trigger,disabled:e.disabled,transition:"fade-in"},model:{value:e.options_show,callback:function(t){e.options_show=t},expression:"options_show"}},[a("el-scrollbar",{staticClass:"wl-treeselect-popover"},[e.filterable?a("el-input",{attrs:{size:e.size,placeholder:e.$lang.please_input_key_words},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}):e._e(),a("el-tree",{ref:"tree-select",staticClass:"wl-options-tree",attrs:{"highlight-current":"",data:e.selfData,props:e.selfProps,"node-key":e.nodeKey,"show-checkbox":e.checkbox,"check-strictly":e.checkStrictly,"filter-node-method":e.filterNode,"default-checked-keys":e.checked_keys,"default-expand-all":e.defaultExpandAll,"check-on-click-node":e.checkOnClickNode,"expand-on-click-node":e.expandOnClickNode,"default-expanded-keys":e.defaultExpandedKeys},on:{check:e.handleCheckChange,"node-click":e.treeItemClick},scopedSlots:e._u([{key:"default",fn:function(t){t.node;var n=t.data;return[a("div",{class:"tree-item-disabled-"+n.is_display},[e._v(" "+e._s(n.name)+" ")])]}}])})],1),a("div",{staticClass:"selected-box",class:[{"wl-disabled":e.disabled,"no-wrap":e.nowrap},e.sizeClass],attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"tag-box"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.selecteds.length>0,expression:"selecteds.length > 0"}]},[e.collapseTags?[a("el-tag",{staticClass:"wl-select-tag",attrs:{closable:"",size:e.size,title:e.collapseTagsItem[e.selfProps.label]},on:{close:function(t){return e.tabClose(e.collapseTagsItem[e.nodeKey])}}},[e._v(e._s(e.collapseTagsItem[e.selfProps.label]))]),this.selecteds.length>1?a("el-tag",{staticClass:"wl-select-tag",attrs:{size:e.size}},[e._v("+"+e._s(this.selecteds.length-1))]):e._e()]:e._l(e.selecteds,(function(t){return a("el-tag",{key:t[e.nodeKey],staticClass:"wl-select-tag",attrs:{closable:"",size:e.size,title:t[e.selfProps.label]},on:{close:function(a){return e.tabClose(t[e.nodeKey])}}},[e._v(e._s(t[e.selfProps.label]))])}))],2),a("p",{directives:[{name:"show",rawName:"v-show",value:0==e.selecteds.length,expression:"selecteds.length == 0"}],staticClass:"wl-placeholder-box"},[e._v(" "+e._s(e.placeholder)+" ")])]),a("div",{staticClass:"icon-box"},[a("transition",{attrs:{name:"fade-rotate",mode:"out-in"}},[e.options_show?a("i",{key:"btm",staticClass:"el-icon-arrow-up"}):a("i",{key:"top",staticClass:"el-icon-arrow-down"})])],1)])],1)],1)},l=[],o=(a("4de4"),a("c975"),a("d81d"),a("a9e3"),a("5530")),i=a("b452"),c={name:"WlTreeSelect",data:function(){return{selecteds:[],options_show:!1,checked_keys:[],guid:"00000000-0000-0000-0000-000000000000",filterText:""}},props:{data:{type:Array,default:function(){return[]}},props:{type:Object,default:function(){return{}}},nodeKey:{type:String,default:"id"},value:[String,Number,Array,Object],checkbox:{type:Boolean,default:!1},collapseTags:{type:Boolean,default:!1},leaf:{type:Boolean,default:!1},width:String,trigger:{type:String,default:"click"},disabled:{type:Boolean,default:!1},nowrap:{type:Boolean,default:!1},noCheckedClose:{type:Boolean,default:!1},placeholder:{type:String,default:function(){return this.$lang.please_choose}},size:{type:String,default:"medium"},defaultExpandAll:{type:Boolean,default:!0},defaultExpandedKeys:{type:Array,default:function(){return[]}},filterable:{type:Boolean,default:!1},filterFnc:Function,checkStrictly:{type:Boolean,default:!1},expandOnClickNode:{type:Boolean,default:!1},checkOnClickNode:{type:Boolean,default:!1}},model:{prop:"value",event:"change"},mounted:function(){},methods:{handleCheckChange:function(e,t){var a=t.checkedKeys,n=this.$refs["tree-select"].getCheckedNodes(this.leaf);this.selecteds=n,this.$emit("change",n),0===a.length&&this.noCheckedClose&&(this.options_show=!1)},treeItemClick:function(e,t){this.checkbox||1!=e.is_display&&(this.selecteds=[e],this.options_show=!1,this.$emit("change",this.selecteds))},tabClose:function(e){this.disabled||(this.checkbox?(this.$refs["tree-select"].setChecked(e,!1,!0),this.selecteds=this.$refs["tree-select"].getCheckedNodes(),0===this.selecteds.length&&this.noCheckedClose&&(this.options_show=!1)):(this.selecteds=[],this.$refs["tree-select"].setCurrentKey(null),this.options_show=!1),this.$emit("change",this.selecteds))},clear:function(){this.selecteds=[]},chaeckDefaultValue:function(e){var t=this;if(!e||Array.isArray(e)&&0===e.length){if(this.selecteds=[],!this.checkbox)return;return this.checked_keys=[],void this.$nextTick((function(){t.$refs["tree-select"].setCheckedKeys([])}))}if(this.checkbox){var a=i["DataType"].isObject(e[0])?e.map((function(e){return e[t.nodeKey]})):e;return this.$set(this,"checked_keys",a),void this.$nextTick((function(){t.selecteds=t.$refs["tree-select"].getCheckedNodes(t.leaf)}))}var n=Array.isArray(e)?e[0]:e;i["DataType"].isObject(n)?(this.selecteds=[n],this.$nextTick((function(){t.$refs["tree-select"].setCurrentNode(n)}))):this.$nextTick((function(){t.$refs["tree-select"].setCurrentKey(n);var e=t.$refs["tree-select"].getCurrentNode();t.selecteds=e?[e]:[]}))},closeOptions:function(){this.options_show=!1},filterNode:function(e,t){return this.filterFnc?this.filterFnc(e,t):!e||-1!==t[this.selfProps.label].indexOf(e)}},watch:{value:{handler:function(e){this.chaeckDefaultValue(e)},immediate:!0},filterText:function(e){this.$refs["tree-select"].filter(e)}},computed:{selfData:function(){return this.data},selfProps:function(){return Object(o["a"])({label:"name",children:"children",disabled:function(e){return e.disabled}},this.props)},sizeClass:function(){var e="size-medium";switch(this.size){case"medium":e="size-medium";break;case"small":e="size-small";break;case"default":e="size-default";break;case"mini":e="size-mini";break;default:e="size-medium";break}return e},collapseTagsItem:function(){return this.selecteds[0]||{}}}},u=c,d=(a("32bf"),a("2877")),f=Object(d["a"])(u,r,l,!1,null,null,null),p=f.exports,h=a("26476"),m={components:{TreeSelect:p},data:function(){return{cateData:[],defaultProps:{children:"son",label:"name",value:"id",disabled:"is_display"},editFlag:!1,showCreateDialog:!1,submitLoading:!1,createLoading:!1,tableData:[],formData:{title:void 0,link_cause:void 0,keyword:void 0,type:void 0,reply:void 0},typeOptions:[],rules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],link_cause:[{required:!0,message:"请选择分类",trigger:"blur"}],keyword:[{required:!0,message:"请输入关键词",trigger:"blur"}],type:[{required:!0,message:"请选择类型",trigger:"blur"}],reply:[{required:!0,message:"请输入回复",trigger:"blur"}]}}},created:function(){},mounted:function(){this.getData()},methods:{editRow:function(e){var t=this;this.currentId=e.id,this.editFlag=!0,Object(h["g"])().then((function(a){200===a.data.status&&(t.cateData=a.data.data,Object(h["j"])({id:e.id}).then((function(e){200===e.data.status&&(t.typeOptions=e.data.data.type,t.formData.title=e.data.data.data.title,t.formData.link_cause=e.data.data.data.link_cause,t.formData.type=e.data.data.data.type,t.formData.keyword=e.data.data.data.keywords,t.formData.reply=e.data.data.data.reply,t.showCreateDialog=!0)})))}))},deleteRow:function(e){var t=this;this.$confirm("将删除该知识库, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(h["i"])({id:e.id}).then((function(e){200!==e.data.status?t.$message.error(e.data.msg):(t.$message.success(e.data.msg),t.getData())}))})).catch((function(){}))},getData:function(){var e=this;Object(h["k"])().then((function(t){200===t.data.status&&(e.tableData=t.data.data)}))},changeTreeHandler:function(e){this.formData.link_cause=e[0].id},handleClose:function(){this.formData={title:void 0,link_cause:void 0,keyword:void 0,type:void 0,reply:void 0},this.showCreateDialog=!1},createCate:function(){var e=this;this.createLoading=!0,this.editFlag=!1,this.currentId=!1,Object(h["h"])().then((function(t){200===t.data.status&&(e.typeOptions=t.data.data.type)})),Object(h["g"])().then((function(t){200===t.data.status&&(e.cateData=t.data.data)})),this.createLoading=!1,this.showCreateDialog=!0},createCateSubmit:function(){var e=this;this.$refs["form"].validate((function(t){if(t)if(e.editFlag){var a=e.formData,n=a.title,s=a.type,r=a.keyword,l=a.link_cause,o=a.reply,i={title:n,type:s,keyword:r,link_cause:l,reply:o,id:e.currentId};e.submitLoading=!0,Object(h["p"])(i).then((function(t){200===t.data.status&&(e.$message.success(t.data.msg),e.handleClose(),e.getData()),e.submitLoading=!1}))}else e.submitLoading=!0,Object(h["o"])(e.formData).then((function(t){200===t.data.status&&(e.$message.success(t.data.msg),e.handleClose(),e.getData()),e.submitLoading=!1}))}))}},computed:{},watch:{}},g=m,b=Object(d["a"])(g,n,s,!1,null,"4987f698",null);t["default"]=b.exports}}]);