(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["commentList~31ecd969"],{"031a":function(t,e,n){"use strict";var r=n("72b68"),a=n.n(r);a.a},"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"1b4c":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h2",[t._v("评论审核")]),n("el-divider"),n("el-table",{staticClass:"mt-10",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""},on:{"sort-change":t.sortChange}},[n("div",{attrs:{slot:"empty"},slot:"empty"},[!t.tableData.length&&t.tableLoading?n("span",[n("i",{staticClass:"el-icon-loading"}),t._v(" 正在加载 ... ")]):t._e(),t.tableData.length||t.tableLoading?t._e():n("span",[t._v("暂无数据")])]),n("el-table-column",{attrs:{prop:"id",label:"ID",sortable:"",width:"70",align:"center"}}),n("el-table-column",{attrs:{prop:"username",label:"用户",sortable:"",width:"120"}}),n("el-table-column",{attrs:{prop:"name",label:"应用名称",sortable:"",width:"150"}}),n("el-table-column",{attrs:{prop:"type",label:"应用类型",sortable:"",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("span",[t._v(t._s(t._f("typeFilter")(r.type)))])]}}])}),n("el-table-column",{attrs:{prop:"content",label:"评论语",sortable:""}}),n("el-table-column",{attrs:{prop:"score",label:"星级",sortable:"",width:"100px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("span",[t._v(t._s(r.score)+"星")])]}}])}),n("el-table-column",{attrs:{prop:"status_zh",label:"状态",sortable:"",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("span",[t._v(t._s(t._f("statusFilter")(r.status)))])]}}])}),"2"===t.$route.query.appstatus?n("el-table-column",{attrs:{prop:"update_time",label:"提交时间",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("span",[t._v(t._s(r.update_time?t.$moment(1e3*r.update_time).format("YYYY-MM-DD HH:mm"):t.$moment(1e3*r.create_time).format("YYYY-MM-DD HH:mm")))])]}}],null,!1,3420365007)}):t._e(),n("el-table-column",{attrs:{label:"操作",width:"1"===t.$route.query.appstatus?"80":"135",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[0===r.status?n("el-button",{staticClass:"span-success",attrs:{size:"small",type:"text"},on:{click:function(e){return t.checkComment(r,1)}}},[t._v("通过")]):t._e(),0===r.status?n("el-button",{staticClass:"span-danger",attrs:{size:"small",type:"text"},on:{click:function(e){return t.checkComment(r,2)}}},[t._v("驳回")]):t._e(),n("el-button",{staticClass:"span-primary",attrs:{size:"small",type:"text"},on:{click:function(e){return t.editComment(r)}}},[t._v("编辑")])]}}])})],1),n("el-pagination",{staticClass:"mt-10",attrs:{"current-page":t.search.page,"page-sizes":[10,15,20,25,50,100],"page-size":t.search.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.getData,"update:currentPage":function(e){return t.$set(t.search,"page",e)},"update:current-page":function(e){return t.$set(t.search,"page",e)},"update:pageSize":function(e){return t.$set(t.search,"limit",e)},"update:page-size":function(e){return t.$set(t.search,"limit",e)}}}),n("el-dialog",{attrs:{title:"编辑评论",visible:t.commentDialogVis,width:"500px"},on:{"update:visible":function(e){t.commentDialogVis=e},close:t.commentDialogClose}},[n("el-form",{ref:"editComment",attrs:{model:t.editCommentFormData,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"评论",prop:"content",rules:[{required:!0,message:"评论内容不能为空",trigger:"blur"}]}},[n("el-input",{style:{width:"260px"},attrs:{type:"textarea",autosize:{minRows:5,maxRows:5},placeholder:"请输入"},model:{value:t.editCommentFormData.content,callback:function(e){t.$set(t.editCommentFormData,"content",e)},expression:"editCommentFormData.content"}})],1),n("el-form-item",{attrs:{label:"星级",prop:"content"}},[n("el-rate",{staticStyle:{"margin-top":"10px"},attrs:{"void-icon-class":"el-icon-star-on"},model:{value:t.editCommentFormData.score,callback:function(e){t.$set(t.editCommentFormData,"score",e)},expression:"editCommentFormData.score"}})],1)],1),n("span",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:function(e){t.commentDialogVis=!1}}},[t._v("取 消")]),n("el-button",{attrs:{size:"small",type:"primary",loading:t.btnLoading},on:{click:t.editCommentSubmit}},[t._v("发布")])],1)],1)],1)},a=[],o=(n("a9e3"),n("ac1f"),n("841c"),n("96cf"),n("1da1")),s=n("8bd6"),i={metaInfo:function(){return{title:window.zjmf_cw_lang.comment_review}},data:function(){return{tableLoading:!1,search:{page:1,limit:Number(localStorage.getItem("limit"))||50,order:"id",sort:"desc"},tableData:[],total:0,commentDialogVis:!1,btnLoading:!1,editCommentFormData:{id:0,content:"",score:1}}},filters:{typeFilter:function(t){switch(t){case"finance":return"魔方财务";case"zjmf_cloud":return"魔方云";case"zjmf_dcim":return"DCIM"}},statusFilter:function(t){switch(t){case 0:return"未审核";case 1:return"审核通过";case 2:return"审核未通过";case 3:return"已删除"}}},methods:{getData:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.tableLoading=!0,e.next=3,Object(s["c"])(t.search);case 3:n=e.sent,r=n.data,200!==r.status?t.$message.error(r.msg):(t.tableData=r.data.evaluation,t.total=r.data.count),t.tableLoading=!1;case 7:case"end":return e.stop()}}),e)})))()},handleSizeChange:function(t){this.search.page=1,this.getData()},sortChange:function(t,e,n){this.search.order=t.prop,"ascending"===t.order?this.search.sort="asc":this.search.sort="desc",this.getData()},checkComment:function(t,e){var n=this;1===e?this.$confirm("确定是否审核通过？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n.checkApp(t.id,e)})).catch((function(){})):2===e&&this.$prompt("请输入驳回原因","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^[\s\S]*.*[^\s][\s\S]*$/,inputErrorMessage:"请输入原因"}).then((function(r){n.checkApp(t.id,e,r.value)})).catch((function(){n.$message.info("取消输入")}))},checkApp:function(t,e,n){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var o,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(s["f"])({id:t,status:e,reason:n});case 2:o=a.sent,i=o.data,200!==i.status?r.$message.error(i.msg):(r.$message.success(i.msg),r.getData());case 5:case"end":return a.stop()}}),a)})))()},editComment:function(t){this.editCommentFormData.id=t.id,this.editCommentFormData.content=t.content,this.editCommentFormData.score=parseInt(t.score),this.commentDialogVis=!0},commentDialogClose:function(){this.$refs.editComment.resetFields(),this.$refs.editComment.clearValidate()},editCommentSubmit:function(){var t=this;this.$refs.editComment.validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(n){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return",!1);case 2:return t.btnLoading=!0,e.next=5,Object(s["n"])(t.editCommentFormData);case 5:r=e.sent,a=r.data,t.btnLoading=!1,200!==a.status?t.$message.error(a.msg):(t.getData(),t.$message.success(a.msg),t.commentDialogVis=!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},created:function(){this.getData()}},c=i,u=(n("031a"),n("2877")),l=Object(u["a"])(c,r,a,!1,null,"e8967678",null);e["default"]=l.exports},"72b68":function(t,e,n){},"841c":function(t,e,n){"use strict";var r=n("d784"),a=n("825a"),o=n("1d80"),s=n("129f"),i=n("14c3");r("search",1,(function(t,e,n){return[function(e){var n=o(this),r=void 0==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var o=a(t),c=String(this),u=o.lastIndex;s(u,0)||(o.lastIndex=0);var l=i(o,c);return s(o.lastIndex,u)||(o.lastIndex=u),null===l?-1:l.index}]}))},"8bd6":function(t,e,n){"use strict";n.d(e,"m",(function(){return a})),n.d(e,"e",(function(){return o})),n.d(e,"i",(function(){return s})),n.d(e,"s",(function(){return i})),n.d(e,"k",(function(){return c})),n.d(e,"d",(function(){return u})),n.d(e,"b",(function(){return l})),n.d(e,"j",(function(){return d})),n.d(e,"h",(function(){return m})),n.d(e,"l",(function(){return p})),n.d(e,"u",(function(){return f})),n.d(e,"t",(function(){return h})),n.d(e,"c",(function(){return b})),n.d(e,"f",(function(){return g})),n.d(e,"n",(function(){return v})),n.d(e,"p",(function(){return w})),n.d(e,"q",(function(){return _})),n.d(e,"r",(function(){return D})),n.d(e,"a",(function(){return C})),n.d(e,"o",(function(){return j})),n.d(e,"g",(function(){return x}));var r=n("a27e");function a(t){return Object(r["a"])({url:"developer/developerlist",params:t})}function o(t){return Object(r["a"])({url:"developer/checkdeveloper",method:"post",data:t})}function s(t){return Object(r["a"])({url:"developer/developerapplist",params:t})}function i(t){return Object(r["a"])({url:"developer/toggleretired",method:"post",data:t})}function c(t){return Object(r["a"])({url:"developer/developerapp",params:t})}function u(t){return Object(r["a"])({url:"developer/checkdeveloperapp",method:"post",data:t})}function l(t){return Object(r["a"])({url:"developer/appaccounts",params:t})}function d(t){return Object(r["a"])({url:"developer/developerapplogs",params:t})}function m(t){return Object(r["a"])({url:"developer/developerapp",method:"delete",params:t})}function p(t){return Object(r["a"])({url:"developer/developerdetail",params:t})}function f(t){return Object(r["a"])({url:"withdraw/withdraw",params:t})}function h(t){return Object(r["a"])({url:"withdraw/withdraw",method:"post",data:t})}function b(t){return Object(r["a"])({url:"developer/app_evaluations",params:t})}function g(t){return Object(r["a"])({url:"developer/check_app_evaluations",method:"post",data:t})}function v(t){return Object(r["a"])({url:"developer/edit_app_evaluation",method:"put",data:t})}function w(t){return Object(r["a"])({url:"developer/hotapplist",params:t})}function _(t){return Object(r["a"])({url:"developer/hot_app",method:"put",data:t})}function D(t){return Object(r["a"])({url:"developer/recommendapplist",params:t})}function C(t){return Object(r["a"])({url:"developer/recommend_app",method:"post",data:t})}function j(t){return Object(r["a"])({url:"developer/recommend_app",method:"put",data:t})}function x(t){return Object(r["a"])({url:"developer/recommend_app",method:"delete",params:t})}}}]);