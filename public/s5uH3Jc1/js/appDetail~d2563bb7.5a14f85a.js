(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["appDetail~d2563bb7"],{"915b":function(a,t,i){"use strict";i.r(t);var s=function(){var a=this,t=a.$createElement,i=a._self._c||t;return i("div",{staticClass:"detail"},[i("div",{staticClass:"detail_main"},[i("div",{staticClass:"main_left"},[i("div",{staticClass:"app_left_main"},[i("div",{staticClass:"left_main_img"},[i("img",{attrs:{src:a.pageData.product.icon[0],alt:"",width:"100%"}})]),i("div",{staticClass:"left_main_author"},[i("span",{staticClass:"left_main_author_name"},[a._v(a._s(a.pageData.developer.name))]),i("span",{staticClass:"bgGray"},[a._v("应用作者")])]),i("div",{staticClass:"left_main_title"},[i("span",[a._v(a._s(a.pageData.product.name||"-"))])]),i("div",{staticClass:"left_main_simple"},[i("span",[a._v(a._s(a.pageData.product.info||"-"))])]),i("div",{staticClass:"left_main_date"},[i("span",{staticClass:"color-999"},[a._v("发布日期： "+a._s(a.$moment(1e3*a.pageData.product.unretired_time).format("YYYY-MM-DD"))+" ")])]),i("div",{staticClass:"left_main_type"},[i("span",[a._v("应用类型：")]),i("span",[a._v(a._s(a.appType||"-"))])]),i("div",{staticClass:"left_main_ways"},[i("span",[a._v("购买方式：")]),i("span",{staticClass:"waysPurchase"},[a._v(a._s(a.pageData.product.pay_type_zh||"-"))])]),i("div",{staticClass:"left_main_bottom"},[0===a.pageData.product.status?i("el-button",{staticClass:"buyNowBtn",on:{click:a.goBuy}},[a._v("立即购买")]):a._e(),3===a.pageData.product.status?i("el-button",{staticClass:"buyNowBtn",on:{click:a.upload}},[a._v("立即更新")]):a._e()],1)])]),i("div",{staticClass:"main_right"},[i("el-tabs",{model:{value:a.activeName,callback:function(t){a.activeName=t},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"应用描述",name:"first"}},[i("div",{staticClass:"html_box",domProps:{innerHTML:a._s(a.pageData.product.description)}})]),i("el-tab-pane",{attrs:{label:"使用说明",name:"instruction"}},[i("pre",{staticClass:"html_box",domProps:{innerHTML:a._s(a.pageData.product.instruction)}})]),i("el-tab-pane",{attrs:{label:"版本记录",name:"fourth"}},[i("div",{staticClass:"html_box",domProps:{innerHTML:a._s(a.pageData.product.version_description)}})])],1)],1)]),[i("loginDia",{ref:"loginDia",attrs:{visible:a.loginVis,title:"使用智简魔方官网账号登录"},on:{"update:visible":function(t){a.loginVis=t},"login-success":a.loginCallBack}}),i("configDia",{ref:"configDia",attrs:{visible:a.configVis,title:"配置"},on:{"update:visible":function(t){a.configVis=t},"config-success":a.configCallBack}}),i("orderDia",{ref:"orderDia",attrs:{visible:a.orderVis,title:"支付订单"},on:{"update:visible":function(t){a.orderVis=t},"order-success":a.orderCallBack}}),i("payDia",{ref:"payDia",attrs:{visible:a.payVis,title:"结算"},on:{"update:visible":function(t){a.payVis=t},"pay-success":a.payCallBack}})]],2)},e=[],n=(i("96cf"),i("1da1")),r=i("42f7"),o=i("43b4"),c=i("1169"),l=i("9146"),p=i("a3ab"),u={inject:["reload"],components:{loginDia:r["a"],configDia:o["a"],orderDia:c["a"],payDia:l["a"]},data:function(){return{loginVis:!1,configVis:!1,orderVis:!1,payVis:!1,isLogin:!1,activeName:"first",appType:"",pageData:{product:{icon:[]},developer:{name:""}}}},created:function(){this.$route.params.isLogin&&(this.isLogin=this.$route.params.isLogin),this.appDetail()},mounted:function(){},methods:{loginCallBack:function(a){a&&(this.isLogin=a,this.loginVis=!1,this.$refs.loginDia.formData.username="",this.$refs.loginDia.formData.password="")},configCallBack:function(a){var t=this;a&&(this.orderVis=!0,setTimeout((function(){t.configVis=!1,Object.assign(t.$refs.configDia,t.$refs.configDia.$options.data())}),200))},orderCallBack:function(a,t){var i=this;if(1===t)return this.orderVis=!1,Object.assign(this.$refs.orderDia,this.$refs.orderDia.$options.data()),void this.$router.push({name:"appStore"});a&&(this.payVis=!0,setTimeout((function(){i.orderVis=!1,Object.assign(i.$refs.orderDia,i.$refs.orderDia.$options.data())}),100))},payCallBack:function(a){a&&(this.$refs.payDia.close(),this.payVis=!1,Object.assign(this.$refs.payDia,this.$refs.payDia.$options.data()),this.$router.push({name:"appStore"}))},goBuy:function(){if(this.isLogin){var a=this.$route.query.id;this.$refs.configDia.id=a,this.configVis=!0}else this.$message.error("请先登录再购买"),this.loginVis=!0},upload:function(){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var i,s,e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a.isLogin){t.next=13;break}return i=a.$route.query.id,t.next=4,Object(p["l"])(i);case 4:if(s=t.sent,e=s.data,200===e.status){t.next=9;break}return a.$message.error(e.msg),t.abrupt("return");case 9:a.$message.success(e.msg),a.appDetail(),t.next=15;break;case 13:a.$message.error("请先登录再购买"),a.loginVis=!0;case 15:case"end":return t.stop()}}),t)})))()},appDetail:function(){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var i,s,e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=a.$route.query.id,t.next=3,Object(p["a"])(i);case 3:if(s=t.sent,e=s.data,200===e.status){t.next=8;break}return a.$message.error(e.msg),t.abrupt("return");case 8:a.pageData=e.data,n=e.data.product.type,a.appType=e.data.product_type[n];case 11:case"end":return t.stop()}}),t)})))()}},computed:{},watch:{}},d=u,f=(i("b887"),i("2877")),g=Object(f["a"])(d,s,e,!1,null,"78db8c22",null);t["default"]=g.exports},9344:function(a,t,i){},b887:function(a,t,i){"use strict";var s=i("9344"),e=i.n(s);e.a}}]);