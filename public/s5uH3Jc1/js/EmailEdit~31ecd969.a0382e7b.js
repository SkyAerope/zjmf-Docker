(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["EmailEdit~31ecd969"],{"2f11":function(e,t,a){"use strict";a.d(t,"i",(function(){return r})),a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return l})),a.d(t,"j",(function(){return s})),a.d(t,"e",(function(){return o})),a.d(t,"b",(function(){return c})),a.d(t,"d",(function(){return u})),a.d(t,"h",(function(){return m})),a.d(t,"g",(function(){return d})),a.d(t,"f",(function(){return f})),a.d(t,"l",(function(){return p})),a.d(t,"k",(function(){return b}));var n=a("a27e");function r(){return Object(n["a"])({url:"email_template/email_list"})}function i(){return Object(n["a"])({url:"email_template/create_template"})}function l(e){return Object(n["a"])({url:"email_template/create_template_post",method:"post",data:e})}function s(){return Object(n["a"])({url:"email_template/manage_language"})}function o(e){return Object(n["a"])({url:"email_template/disabled",method:"post",data:e})}function c(e){return Object(n["a"])({url:"email_template/manage_language_post",method:"post",data:e})}function u(e){return Object(n["a"])({url:"email_template/delete_template/".concat(e)})}function m(e){return Object(n["a"])({url:"email_template/edit_template/".concat(e)})}function d(e){return Object(n["a"])({url:"email_template/edit_template_post",method:"post",data:e})}function f(e){return Object(n["a"])({url:"email_template/disabled_template",method:"post",data:e})}function p(e){return Object(n["a"])({url:"email_template/operator_switch",method:"post",data:e})}function b(e){return Object(n["a"])({url:"config_message/send_email",method:"post",data:e})}},"45d6":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"emailedit"},[a("h2",[e._v(e._s(e.emailForm.name))]),a("el-divider"),a("el-row",[a("el-col",{attrs:{span:12,offset:6,xs:{span:24,offset:0}}},[a("el-form",{ref:"emailFormRef",attrs:{model:e.emailForm,rules:e.emailFormRules,"label-width":e.labelWidth}},[a("el-form-item",{attrs:{label:e.$lang.attachment}},[a("el-upload",{attrs:{action:e.attachmentAction,"file-list":e.attachmentfileList,"before-upload":e.beforeUpload,"on-success":e.uploadSuccess,"on-remove":e.uploadRemove,multiple:"",limit:5,"with-credentials":"",name:"file"}},[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-upload"}},[e._v(e._s(e.$lang.click_upload))]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(e._s(e.$lang.upload_file_one_mb))])],1)],1),a("el-form-item",{attrs:{label:e.$lang.whether_to_disable}},[a("el-radio-group",{model:{value:e.emailForm.disabled,callback:function(t){e.$set(e.emailForm,"disabled",t)},expression:"emailForm.disabled"}},[a("el-radio-button",{attrs:{label:"0"}},[e._v(e._s(e.$lang.not_disabled))]),a("el-radio-button",{attrs:{label:"1"}},[e._v(e._s(e.$lang.forbidden))])],1)],1)],1)],1)],1),a("el-divider"),e._l(e.emailForm.child,(function(t){return a("div",{key:t.id,staticClass:"emailedit_module"},[a("div",{staticClass:"mb-10"},[e._v(e._s(t.language?t.language:e.$lang.the_default)+e._s(e.$lang.versions))]),a("el-input",{attrs:{size:"small",placeholder:e.$lang.enter_content},model:{value:t.subject,callback:function(a){e.$set(t,"subject",a)},expression:"item.subject"}}),a("tinymce-editor",{ref:"editorRef",refInFor:!0,attrs:{height:700,insertTxt:e.insertTxt},model:{value:t.message,callback:function(a){e.$set(t,"message",a)},expression:"item.message"}})],1)})),a("el-row",[a("el-col",{staticClass:"tac",attrs:{span:24}},[a("el-button",{attrs:{size:"small",type:"primary",loading:e.btnLoading},on:{click:e.submitForm}},[e._v(e._s(e.$lang.submit))]),a("el-button",{attrs:{size:"small"},on:{click:e.goBack}},[e._v(e._s(e.$lang.get_back))])],1)],1),a("h4",[e._v(e._s(e.$lang.mergeable_region))]),a("div",{staticClass:"emailedit_baseArgs"},e._l(e.base_args,(function(t,n){return a("el-row",{key:n},[a("el-col",{attrs:{xs:8,md:4}},[e._v(e._s(t.name))]),a("el-col",{attrs:{xs:16,md:20}},[a("span",{staticClass:"cursor-pointer",on:{click:function(a){return e.argHandleClick(t.arg)}}},[e._v(e._s(t.arg))])])],1)})),1)],2)},r=[],i=(a("99af"),a("4160"),a("b0c0"),a("159b"),a("96cf"),a("1da1")),l=a("2f11"),s={metaInfo:{title:window.zjmf_cw_lang.mail_editing},data:function(){return{type:this.$route.query.type?this.$route.query.type:"",labelWidth:window.document.body.clientWidth>768?"150px":null,emailId:"",emailForm:{},base_args:[],emailFormRules:{fromname:[{required:!0,message:this.$lang.please_enter_the_sender_name,trigger:"blur"}]},attachmentAction:this.$baseUrl+"/upload_file",uploadImgUrl:this.$baseUrl+"/upload_image",attachmentfileList:[],btnLoading:!1,insertTxt:""}},methods:{getId:function(){this.emailId=this.$route.query.id},getData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["h"])(e.emailId);case 2:if(a=t.sent,n=a.data,200===n.status){t.next=6;break}return t.abrupt("return",!1);case 6:e.emailForm=n.emailtemplate,e.emailForm.fromemail=void 0,e.base_args=(n.base_args?n.base_args:[]).concat(n.client_args?n.client_args:[]).concat(n.combine?n.combine:[]),e.attachmentfileList=[],(n.emailtemplate.attachments||[]).forEach((function(t){e.attachmentfileList.push({name:t.savename,url:t.url})}));case 11:case"end":return t.stop()}}),t)})))()},beforeUpload:function(e){var t=e.size/1024/1024<1;return t||this.$message.error(this.$lang.upload_file_one_mb_error),t},uploadSuccess:function(e,t,a){this.attachmentfileList=a},uploadRemove:function(e,t){this.attachmentfileList=t},submitForm:function(){var e=this;this.$refs.emailFormRef.validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(a){var n,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=18;break}return e.emailForm.subject=[],e.emailForm.message=[],e.emailForm.child.forEach((function(t){e.emailForm.subject[t.id]=t.subject,e.emailForm.message[t.id]=t.message})),e.emailForm.file=[],(e.attachmentfileList||[]).forEach((function(t){e.emailForm.file.push(t.response?t.response.data.savename:t.name)})),e.emailForm.attachments=void 0,e.emailForm.child=[],n=e.$qs.stringify(e.emailForm),e.btnLoading=!0,t.next=12,Object(l["g"])(n);case 12:r=t.sent,i=r.data,200!==i.status?(e.$message.error(i.msg),e.getData()):(e.$message.success(i.msg),e.$router.push("/email-list")),e.btnLoading=!1,t.next=19;break;case 18:return t.abrupt("return",!1);case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},argHandleClick:function(e){this.insertTxt=e},goBack:function(){this.$router.go(-1)},resetForm:function(){this.$refs.emailFormRef.resetFields(),(this.emailForm.child||[]).forEach((function(e){e.subject="",e.message=""}))}},created:function(){this.getId(),this.getData()}},o=s,c=(a("f1b0"),a("2877")),u=Object(c["a"])(o,n,r,!1,null,"bfadcfdc",null);t["default"]=u.exports},8418:function(e,t,a){"use strict";var n=a("c04e"),r=a("9bf2"),i=a("5c6c");e.exports=function(e,t,a){var l=n(t);l in e?r.f(e,l,i(0,a)):e[l]=a}},"99af":function(e,t,a){"use strict";var n=a("23e7"),r=a("d039"),i=a("e8b5"),l=a("861d"),s=a("7b0b"),o=a("50c4"),c=a("8418"),u=a("65f0"),m=a("1dde"),d=a("b622"),f=a("2d00"),p=d("isConcatSpreadable"),b=9007199254740991,_="Maximum allowed index exceeded",g=f>=51||!r((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),h=m("concat"),v=function(e){if(!l(e))return!1;var t=e[p];return void 0!==t?!!t:i(e)},$=!g||!h;n({target:"Array",proto:!0,forced:$},{concat:function(e){var t,a,n,r,i,l=s(this),m=u(l,0),d=0;for(t=-1,n=arguments.length;t<n;t++)if(i=-1===t?l:arguments[t],v(i)){if(r=o(i.length),d+r>b)throw TypeError(_);for(a=0;a<r;a++,d++)a in i&&c(m,d,i[a])}else{if(d>=b)throw TypeError(_);c(m,d++,i)}return m.length=d,m}})},f1b0:function(e,t,a){"use strict";var n=a("fce0"),r=a.n(n);r.a},fce0:function(e,t,a){}}]);