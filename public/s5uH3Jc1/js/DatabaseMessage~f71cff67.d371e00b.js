(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["DatabaseMessage~f71cff67"],{"51bf":function(t,e,n){"use strict";n.d(e,"l",(function(){return r})),n.d(e,"h",(function(){return o})),n.d(e,"c",(function(){return u})),n.d(e,"j",(function(){return s})),n.d(e,"f",(function(){return c})),n.d(e,"i",(function(){return i})),n.d(e,"d",(function(){return l})),n.d(e,"g",(function(){return d})),n.d(e,"b",(function(){return b})),n.d(e,"e",(function(){return f})),n.d(e,"n",(function(){return p})),n.d(e,"o",(function(){return m})),n.d(e,"m",(function(){return g})),n.d(e,"p",(function(){return _})),n.d(e,"a",(function(){return w})),n.d(e,"q",(function(){return h})),n.d(e,"k",(function(){return v}));var a=n("a27e");function r(){return Object(a["a"])({url:"system/info"})}function o(){return Object(a["a"])({url:"system/lastversion"})}function u(){return Object(a["a"])({url:"system/commoninfo"})}function s(){return Object(a["a"])({url:"system/phpinfo"})}function c(){return Object(a["a"])({url:"system/databaseinfo"})}function i(){return Object(a["a"])({url:"system/optimizeTables",method:"post"})}function l(){return Object(a["a"])({url:"system/downdatabackup",method:"post",responseType:"blob"})}function d(){return Object(a["a"])({url:"upgrade/version"})}function b(){return Object(a["a"])({url:"upgrade/checkautoupdate"})}function f(){return Object(a["a"])({url:"upgrade/autoupdate"})}function p(t){return Object(a["a"])({url:"upgrade/checkupdateunzip",method:"POST",data:t})}function m(t){return Object(a["a"])({url:"upgrade/checkupdatecopy",method:"POST",data:t})}function g(t){return Object(a["a"])({url:"system/toggleversion",method:"post",data:t})}function _(){return Object(a["a"])({url:"system/updatecontent"})}function w(t){return Object(a["a"])({url:"system/license",method:"put",data:t})}function h(){return Object(a["a"])({url:"/upgrade/sqlupdate"})}function v(){return Object(a["a"])({url:"system/authorize"})}},"99d3c":function(t,e,n){},c67e:function(t,e,n){"use strict";var a=n("99d3c"),r=n.n(a);r.a},cf86:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"databasemsg_header"},[n("el-row",[n("el-col",{attrs:{span:24}},[n("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-refresh",loading:t.optLoading},on:{click:t.optimize}},[t._v(t._s(t.$lang.optimization_data_table)+" ")]),n("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-download",loading:t.downloading},on:{click:t.download}},[t._v(" "+t._s(t.$lang.download_database_backup))])],1)],1)],1),n("div",{staticClass:"databasemsg_footer"},[n("el-row",[n("el-col",{attrs:{span:24}},[n("span",[t._v(" "+t._s(t.$lang.total_number_tables)+"："+t._s(t.total_count)+" ")]),n("span",[t._v(" "+t._s(t.$lang.total_number_rows)+"："+t._s(t.total_rows)+" ")]),n("span",[t._v(" "+t._s(t.$lang.total_dimensions)+"："+t._s(t.total_size)+" ")])])],1)],1),n("div",{staticClass:"databasemsg_table"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[n("div",{attrs:{slot:"empty"},slot:"empty"},[!t.tableData.length&&t.tableLoading?n("span",[n("i",{staticClass:"el-icon-loading"}),t._v(" "+t._s(t.$lang.loading)+" ... ")]):t._e(),t.tableData.length||t.tableLoading?t._e():n("span",[t._v(t._s(t.$lang.no_data))])]),n("el-table-column",{attrs:{prop:"name",label:t.$lang.table_name}}),n("el-table-column",{attrs:{prop:"rows",label:t.$lang.table_rows}}),n("el-table-column",{attrs:{prop:"size",label:t.$lang.table_dimensions}})],1)],1)])},r=[],o=(n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("96cf"),n("1da1")),u=n("51bf"),s={metaInfo:{title:window.zjmf_cw_lang.database_status},data:function(){return{tableLoading:!1,tableData:[],total_count:void 0,total_rows:void 0,total_size:void 0,optLoading:!1,downloading:!1}},methods:{getData:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.tableLoading=!0,e.next=3,Object(u["f"])();case 3:if(n=e.sent,a=n.data,200===a.status){e.next=7;break}return e.abrupt("return",!1);case 7:t.tableData=a.data.report_array,t.total_count=a.data.total_count,t.total_rows=a.data.total_rows,t.total_size=a.data.total_size,t.tableLoading=!1;case 12:case"end":return e.stop()}}),e)})))()},optimize:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.optLoading=!0,e.next=3,Object(u["i"])();case 3:if(n=e.sent,a=n.data,200===a.status){e.next=7;break}return e.abrupt("return",!1);case 7:t.getData(),t.$message({message:"优化成功!",type:"success"}),t.optLoading=!1;case 10:case"end":return e.stop()}}),e)})))()},download:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.downloading=!0,e.next=3,Object(u["d"])();case 3:n=e.sent,t.downloadBinary(n.data,n.headers),t.downloading=!1;case 6:case"end":return e.stop()}}),e)})))()},downloadBinary:function(t,e){return Object(o["a"])(regeneratorRuntime.mark((function n(){var a,r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=new Blob([t],{type:"".concat(t.type,";charset=utf-8")}),r=document.createElement("a"),o=window.URL.createObjectURL(a),r.href=o,r.download=e.file_name,document.body.appendChild(r),r.click(),document.body.removeChild(r);case 8:case"end":return n.stop()}}),n)})))()}},created:function(){this.getData()}},c=s,i=(n("c67e"),n("2877")),l=Object(i["a"])(c,a,r,!1,null,"bf6b2060",null);e["default"]=l.exports}}]);