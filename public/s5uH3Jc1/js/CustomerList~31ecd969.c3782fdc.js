(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["CustomerList~31ecd969"],{"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"41f5":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"customerlist"},[a("h5",{staticStyle:{"margin-top":"0"}},[e._v(e._s(e.$lang.click_name_manage)),a("el-link",{on:{click:e.openDoc}},[e._v(e._s(e.$lang.help_document))])],1),a("div",{staticClass:"mb-20"},[a("el-button",{attrs:{size:"small",type:"success",icon:"el-icon-circle-plus-outline"},on:{click:e.goToAddCustomer}},[e._v(e._s(e.$lang.add_customer)+" ")]),a("el-button",{staticClass:"ml-10",attrs:{size:"small"},on:{click:function(t){e.showSearchArea=!e.showSearchArea}}},[e._v(" "+e._s(e.showSearchArea?e.$lang.pack_up_the_search:e.$lang.advanced_search)+" ")])],1),a("transition",{attrs:{name:"el-zoom-in-top"}},[e.showSearchArea?a("el-form",{ref:"elForm",staticClass:"mt-20 unfold-search",attrs:{inline:"",model:e.search,"label-width":"120px"}},[e._l(e.searchOptions,(function(t,r){return a("el-form-item",{key:r,attrs:{label:t.label==e.$lang.mail?e.$lang.email:t.label,prop:t.value}},["status"===t.value?[a("el-select",{key:e.tempIndex,style:{width:"150px"},attrs:{size:"small",clearable:"",placeholder:e.$lang.please_choose},model:{value:e.search[t.value],callback:function(a){e.$set(e.search,t.value,a)},expression:"search[item.value]"}},e._l(e.StatusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)]:"api_status"===t.value?[a("el-select",{style:{width:"150px"},attrs:{size:"small",clearable:"",placeholder:e.$lang.please_choose},model:{value:e.search[t.value],callback:function(a){e.$set(e.search,t.value,a)},expression:"search[item.value]"}},e._l(e.apiDtatusOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})})),1)]:"sale"===t.value?[a("el-select",{style:{width:"150px"},attrs:{size:"small",filterable:"",clearable:"",placeholder:e.$lang.please_choose},model:{value:e.search[t.value],callback:function(a){e.$set(e.search,t.value,a)},expression:"search[item.value]"}},e._l(e.searchData[t.value],(function(e,t){return a("el-option",{key:t,attrs:{label:e.user_nickname,value:e.id}})})),1)]:"client_groups"===t.value?[a("el-select",{style:{width:"150px"},attrs:{size:"small",filterable:"",clearable:"",placeholder:e.$lang.please_choose},model:{value:e.search[t.value],callback:function(a){e.$set(e.search,t.value,a)},expression:"search[item.value]"}},e._l(e.searchData[t.value],(function(e,t){return a("el-option",{key:t,attrs:{label:e.group_name,value:e.id}})})),1)]:[a("el-input",{style:{width:"150px"},attrs:{size:"small",placeholder:e.$lang.input_key_words,clearable:""},on:{change:e.inputChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getData(t)}},model:{value:e.search[t.value],callback:function(a){e.$set(e.search,t.value,a)},expression:"search[item.value]"}})]],2)})),a("el-form-item",{attrs:{label:"实名状态"}},[a("el-select",{key:e.tempIndex,style:{width:"150px"},attrs:{size:"small",clearable:"",placeholder:"请选择实名状态"},model:{value:e.search.certifi,callback:function(t){e.$set(e.search,"certifi",t)},expression:"search.certifi"}},[a("el-option",{attrs:{value:1,label:"已实名"}}),a("el-option",{attrs:{value:0,label:"未实名"}})],1)],1),a("el-form-item",{attrs:{label:" "}},[a("el-button",{attrs:{size:"mini",type:"primary",loading:e.btnLoading},on:{click:e.searchClick}},[e._v(e._s(e.$lang.search))]),a("el-button",{attrs:{size:"mini"},on:{click:e.clearSearchHandleClick}},[e._v(e._s(e.$lang.empty))])],1)],2):e._e()],1),a("el-row",{staticClass:"mt-10"},[a("el-col",[a("el-table",{attrs:{data:e.customerListTableData,border:""},on:{"sort-change":e.changeSort}},[a("div",{attrs:{slot:"empty"},slot:"empty"},[!e.customerListTableData.length&&e.tableLoading?a("span",[a("i",{staticClass:"el-icon-loading"}),e._v(" "+e._s(e.$lang.load_data)+" ")]):e._e(),e.customerListTableData.length||e.tableLoading?e._e():a("span",[e._v(e._s(e.$lang.no_data))])]),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"70",sortable:"custom",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("router-link",{attrs:{to:{path:"/customer-view/abstract",query:{id:r.id}}}},[a("el-link",{on:{click:function(t){return e.goToView(r.id)}}},[e._v(e._s(r.id))])],1)]}}])}),a("el-table-column",{attrs:{prop:"username",label:e.$lang.name},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("div",{staticClass:"first-row"},[a("router-link",{attrs:{to:{path:"/customer-view/abstract",query:{id:r.id}}}},[a("el-link",{style:{color:r.group_colour},attrs:{type:"primary"},on:{click:function(t){return e.goToView(r.id)}}},[e._v(" "+e._s(r.username)+" ")])],1),r.company_status===e.$lang.certified?a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.$lang.enterprise_certified,placement:"right"}},[a("i",{staticClass:"iconfont icon-qiyerenzheng color-suc indent2"})]):r.company_status!=e.$lang.certified&&r.person_status===e.$lang.certified?a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.$lang.person_certified,placement:"right"}},[a("i",{staticClass:"iconfont icon-gerenrenzheng1 color-suc indent2"})]):e._e()],1),a("div",{staticClass:"second-row"},[e._v(" "+e._s(r.companyname||"")+" ")])]}}])}),a("el-table-column",{attrs:{prop:"phonenumber",label:e.$lang.phone_email,"min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-row",[r.phonenumber?a("el-col",{staticStyle:{"min-height":"17px"}},[e._v(e._s(r.phonenumber))]):e._e(),r.email?a("el-col",{staticClass:"second-row",staticStyle:{"min-height":"17px"}},[e._v(e._s(r.email))]):e._e()],1)]}}])}),a("el-table-column",{attrs:{prop:"host_total",label:e.$lang.server,"min-width":"70"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("router-link",{attrs:{to:{path:"/customer-view/product-list",query:{id:r.id,currency_id:r.currency_id}}}},[a("el-link",[e._v(e._s(r.host_total))])],1)]}}])}),a("el-table-column",{attrs:{prop:"amount_in",label:e.$lang.income_expenditure,width:"115",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("div",[a("span",[e._v(e._s(r.prefix)+e._s(r.amount_in))])]),a("div",{staticClass:"second-row"},[a("span",[e._v(e._s(r.prefix)+e._s(r.amount_out))])])]}}])}),a("el-table-column",{attrs:{prop:"credit",label:e.$lang.remain_sum,"min-width":"90",sortable:"custom"}}),a("el-table-column",{attrs:{prop:"group_name",label:e.$lang.customer_group,width:"135",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("span",{style:{color:r.group_colour||"#333"}},[e._v(e._s(r.group_name||"-"))])]}}])}),a("el-table-column",{attrs:{prop:"status",label:e.$lang.state,sortable:"custom",width:"85",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[0===r.status?a("el-tag",{attrs:{size:"small",type:"danger"}},[e._v(e._s(r.client_status))]):1===r.status?a("el-tag",{attrs:{size:"small",type:"success"}},[e._v(e._s(r.client_status))]):a("el-tag",{attrs:{size:"small",type:"info"}},[e._v(e._s(r.client_status))])]}}])}),a("el-table-column",{attrs:{prop:"user_nickname",label:e.$lang.sell},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[r.sale_id?a("span",[e._v(e._s(r.user_nickname))]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"credit_limit",label:e.$lang.credit_amount,width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("div",[a("span",[e._v(e._s(r.prefix)+e._s(r.credit_limit_used))])]),a("div",{staticClass:"second-row"},[a("span",[e._v(e._s(r.prefix)+e._s(r.credit_limit))])])]}}])}),"0"!=e.allow_resource_api?a("el-table-column",{attrs:{prop:"create_time",label:e.$lang.API_open_time,sortable:"custom",width:"135",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.api_create_time?e.$moment(1e3*a.api_create_time).format("YYYY-MM-DD HH:mm"):"-")+" ")]}}],null,!1,2208644475)}):e._e()],1)],1)],1),e.adPageFlag&&!e.OriginalSearch?a("el-pagination",{attrs:{"current-page":e.search.page,"page-sizes":[10,15,20,25,50,100],"page-size":e.search.limit,layout:"total, prev, pager, next, jumper",total:e.vuexTotal},on:{"current-change":e.adSizeChange,"update:currentPage":function(t){return e.$set(e.search,"page",t)},"update:current-page":function(t){return e.$set(e.search,"page",t)},"update:pageSize":function(t){return e.$set(e.search,"limit",t)},"update:page-size":function(t){return e.$set(e.search,"limit",t)}}}):a("el-pagination",{attrs:{"current-page":e.search.page,"page-sizes":[10,15,20,25,50,100],"page-size":e.search.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.getData,"update:currentPage":function(t){return e.$set(e.search,"page",t)},"update:current-page":function(t){return e.$set(e.search,"page",t)},"update:pageSize":function(t){return e.$set(e.search,"limit",t)},"update:page-size":function(t){return e.$set(e.search,"limit",t)}}})],1)},n=[],s=(a("a9e3"),a("9129"),a("ac1f"),a("5319"),a("841c"),a("1276"),a("96cf"),a("1da1")),i=a("ade3"),l=a("f6b0"),c=a("dd77"),o={metaInfo:{title:window.zjmf_cw_lang.customer_list},data:function(){return{levelOptions:[],tempIndex:0,searchData:[],showSearchArea:!1,allow_resource_api:"",levelLength:1,activeName:"999",adPageFlag:!1,OriginalSearch:void 0,first:!0,vuexTotal:this.$store.state.searchObj.total,searchStr:"",searchSelect:"username",customerListTableData:[],total:0,search:Object(i["a"])({page:1,limit:Number(localStorage.getItem("limit"))||50,order:"id",sort:"DESC",username:void 0,companyname:void 0,email:void 0,phonenumber:void 0,status:void 0,qq:void 0,custom:void 0,level:void 0,api_status:void 0,sale:void 0,client_groups:void 0,certifi:void 0},"level",void 0),StatusOptions:[{label:this.$lang.normal,value:1},{label:this.$lang.disable,value:0}],apiDtatusOptions:[],searchOptions:[],btnLoading:!1,tableLoading:!1}},methods:{inputChange:function(){this.tempIndex++},clearSearchHandleClick:function(){this.$refs["elForm"].resetFields(),this.clearSearch(),this.search.username=void 0,this.adPageFlag=!1,this.OriginalSearch=!0,this.search.page=1,this.search.api_status=void 0,this.search.status=void 0,this.search.certifi=void 0},openDoc:function(){open("https://www.idcsmart.com/wiki_list/650.html")},adSearch:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,n,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r={},Object.assign(r,t.$route.query),r.page=e,r.table=t.$route.query.type,r.limit=Number(localStorage.getItem("limit"))||50,a.next=7,Object(c["a"])(r);case 7:n=a.sent,s=n.data,t.customerListTableData=s.list,t.vuexTotal=s.total,t.btnLoading=!1,i=JSON.parse(JSON.stringify(t.$route.query)),i.page=e,delete i.request_time,t.$router.replace({query:i});case 16:case"end":return a.stop()}}),a)})))()},adSizeChange:function(e){this.adSearch(e)},searchClick:function(){this.adPageFlag=!1,this.OriginalSearch=!0,this.btnLoading=!0,this.search.page=1,this.getData()},getData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r,n,s,i,o,u,d,h,p,m,f,g;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$urlUpdate(e.search,location.href,e.$route.query),!e.$route.query.type||e.OriginalSearch){t.next=29;break}return t.next=4,Object(l["r"])();case 4:for(s in a=t.sent,r=a.data,e.searchData=r.seachData,n=[],r.search)n.push({label:r.search[s],value:s});return e.searchOptions=n.reverse(),e.adPageFlag=!0,i={},Object.assign(i,e.$route.query),i.table=e.$route.query.type,i.limit=Number(localStorage.getItem("limit"))||50,0!=i.customize&&(i.customfields=[],i.customfields[i.customize]=i.value),e.search.page=Number(e.$route.query.page)||1,delete i.type,delete i.customize,t.next=21,Object(c["a"])(e.$qs.stringify(i));case 21:o=t.sent,u=o.data,e.customerListTableData=u.list,e.levelOptions=u.level_search,e.vuexTotal=u.total,e.btnLoading=!1,t.next=59;break;case 29:if(!e.$store.state.adFlag||!e.first){t.next=38;break}e.adPageFlag=e.$store.state.adFlag,e.customerListTableData=e.$store.state.searchObj.list,e.vuexTotal=e.$store.state.searchObj.total,e.btnLoading=!1,e.first=!1,e.$store.commit("setAdFlag",!1),t.next=59;break;case 38:for(h in d={},Object.assign(d,e.search),d)Number.isNaN(parseInt(h))?d[h]||"0"==d[h]||delete d[h]:(d[h]&&(d["custom[".concat(h,"]")]=d[h]),delete d[h]);return e.tableLoading=!0,t.next=44,Object(l["r"])(e.$qs.stringify(d));case 44:for(g in p=t.sent,m=p.data,e.searchData=m.seachData,e.allow_resource_api=m.allow_resource_api,e.apiDtatusOptions=m.api_status,e.customerListTableData=m.list,e.levelOptions=m.level_search,e.levelLength=m.level_search.length,m.level_search.unshift({id:999,level_name:e.$lang.all}),e.total=m.total,e.btnLoading=!1,e.tableLoading=!1,f=[],m.search)f.push({label:m.search[g],value:g});e.searchOptions=f.reverse();case 59:case"end":return t.stop()}}),t)})))()},clearSearch:function(){"status"===this.searchSelect?(this.searchStr="",this.search.page=1,this.search.limit=Number(localStorage.getItem("limit"))||50,this.search.order="id",this.search.sort="DESC"):(this.search.page=1,this.search.limit=Number(localStorage.getItem("limit"))||50,this.search.order="id",this.search.sort="DESC"),this.search.username=void 0,this.search.companyname=void 0,this.search.email=void 0,this.search.phonenumber=void 0,this.search.status=void 0,this.search.qq=void 0},goToView:function(e){this.$router.push({path:"/customer-view/abstract",query:{id:e}})},goToAddCustomer:function(){this.$router.push("/customer-add")},handleSizeChange:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.search.page=1,e.getData();case 2:case"end":return t.stop()}}),t)})))()},changeSort:function(e){if("amount_in"!==e.column.property&&"amount_out"!==e.column.property){if(!e.order)return this.getData(),!1;"descending"===e.order?(this.search.order=e.prop,this.search.sort="DESC"):(this.search.order=e.prop,this.search.sort="AESC"),this.getData()}}},beforeDestroy:function(){this.$store.commit("searchQuery",{}),this.$store.commit("setAdFlag",!1)},watch:{vuexData:function(e){this.adPageFlag=!0,this.customerListTableData=e.list,this.vuexTotal=e.total,this.btnLoading=!1,this.OriginalSearch=!1,this.first=!1,this.$store.commit("setAdFlag",!1)}},computed:{vuexData:function(){return this.$store.state.searchObj}},created:function(){var e=location.href.split("searchObj")[1]?this.$arrangeUrl(encodeURI(location.href.split("searchObj")[1])):void 0;if(e)for(var t in JSON.parse(e))this.search[t]=JSON.parse(e)[t];this.getData()}},u=o,d=(a("f50d"),a("2877")),h=Object(d["a"])(u,r,n,!1,null,"3a7c7393",null);t["default"]=h.exports},"841c":function(e,t,a){"use strict";var r=a("d784"),n=a("825a"),s=a("1d80"),i=a("129f"),l=a("14c3");r("search",1,(function(e,t,a){return[function(t){var a=s(this),r=void 0==t?void 0:t[e];return void 0!==r?r.call(t,a):new RegExp(t)[e](String(a))},function(e){var r=a(t,e,this);if(r.done)return r.value;var s=n(e),c=String(this),o=s.lastIndex;i(o,0)||(s.lastIndex=0);var u=l(s,c);return i(s.lastIndex,o)||(s.lastIndex=o),null===u?-1:u.index}]}))},9129:function(e,t,a){var r=a("23e7");r({target:"Number",stat:!0},{isNaN:function(e){return e!=e}})},ade3:function(e,t,a){"use strict";function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"a",(function(){return r}))},dd77:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var r=a("a27e");function n(e){return Object(r["a"])({url:"searchfornamelist",method:"post",data:e})}},e610:function(e,t,a){},f50d:function(e,t,a){"use strict";var r=a("e610"),n=a.n(r);n.a},f6b0:function(e,t,a){"use strict";a.d(t,"r",(function(){return n})),a.d(t,"t",(function(){return s})),a.d(t,"o",(function(){return i})),a.d(t,"a",(function(){return l})),a.d(t,"s",(function(){return c})),a.d(t,"u",(function(){return o})),a.d(t,"n",(function(){return u})),a.d(t,"m",(function(){return d})),a.d(t,"h",(function(){return h})),a.d(t,"k",(function(){return p})),a.d(t,"i",(function(){return m})),a.d(t,"g",(function(){return f})),a.d(t,"f",(function(){return g})),a.d(t,"d",(function(){return _})),a.d(t,"w",(function(){return v})),a.d(t,"z",(function(){return b})),a.d(t,"c",(function(){return y})),a.d(t,"b",(function(){return w})),a.d(t,"q",(function(){return $})),a.d(t,"C",(function(){return O})),a.d(t,"l",(function(){return k})),a.d(t,"D",(function(){return S})),a.d(t,"v",(function(){return j})),a.d(t,"A",(function(){return x})),a.d(t,"B",(function(){return D})),a.d(t,"e",(function(){return z})),a.d(t,"x",(function(){return C})),a.d(t,"p",(function(){return L})),a.d(t,"j",(function(){return q})),a.d(t,"y",(function(){return T}));var r=a("a27e");function n(e){return Object(r["a"])({url:"client_list",method:"post",data:e})}function s(e){return Object(r["a"])({url:"summary?client_id=".concat(e)})}function i(){return Object(r["a"])({url:"create_client"})}function l(e){return Object(r["a"])({url:"create_client_post",method:"post",data:e})}function c(e){return Object(r["a"])({url:"profile/".concat(e)})}function o(e,t){return Object(r["a"])({url:"profile/getclients/".concat(e),params:t})}function u(e){return Object(r["a"])({url:"profile_post",method:"post",data:e})}function d(e){return Object(r["a"])({url:"delete_client/".concat(e)})}function h(e){return Object(r["a"])({url:"close_client/".concat(e)})}function p(e){return Object(r["a"])({url:"user_invoice",params:e})}function m(e,t){return Object(r["a"])({url:"close_client/".concat(e),params:t})}function f(e){return Object(r["a"])({url:"client_ticket",params:e})}function g(e){return Object(r["a"])({url:"log_record",params:e})}function _(e){return Object(r["a"])({url:"zjmf_finance_api/logs",params:e})}function v(e){return Object(r["a"])({url:"login_by_user/"+e})}function b(e){return Object(r["a"])({url:"certifi_person_detail/".concat(e)})}function y(e){return Object(r["a"])({url:"add_user_invoice",method:"post",data:e})}function w(e){return Object(r["a"])({url:"add_recharge_invoice/"+e.uid,method:"post",data:e})}function $(e){return Object(r["a"])({url:"get_user",params:e})}function O(e){return Object(r["a"])({url:"request_cancel_list",params:e})}function k(e){return Object(r["a"])({url:"request_cancel_list/".concat(e),method:"delete"})}function S(e){return Object(r["a"])({url:"searchlist",params:{value:e}})}function j(e){return Object(r["a"])({url:"hostbyuid",params:e})}function x(e){return Object(r["a"])({url:"clients_services/host_batch_renew_page",method:"post",data:e})}function D(e){return Object(r["a"])({url:"clients_services/host_batch_renew",method:"post",data:e})}function z(e){return Object(r["a"])({url:"clients_services/apply_credit",method:"post",data:e})}function C(e){return Object(r["a"])({url:"invoice/paid",params:e})}function L(e){return Object(r["a"])({url:"get_combine_invoices",params:e})}function q(e){return Object(r["a"])({url:"combine_invoices",method:"post",data:e})}function T(e){return Object(r["a"])({url:"post_client_notes",method:"post",data:e})}}}]);