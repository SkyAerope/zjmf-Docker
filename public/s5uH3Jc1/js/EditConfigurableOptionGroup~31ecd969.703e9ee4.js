(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["EditConfigurableOptionGroup~31ecd969"],{"0395":function(t,e,n){"use strict";var r=n("760f"),o=n.n(r);o.a},2532:function(t,e,n){"use strict";var r=n("23e7"),o=n("5a34"),a=n("1d80"),i=n("ab13");r({target:"String",proto:!0,forced:!i("includes")},{includes:function(t){return!!~String(a(this)).indexOf(o(t),arguments.length>1?arguments[1]:void 0)}})},"33e2":function(t,e,n){"use strict";n.d(e,"m",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"l",(function(){return i})),n.d(e,"k",(function(){return u})),n.d(e,"b",(function(){return s})),n.d(e,"f",(function(){return l})),n.d(e,"e",(function(){return c})),n.d(e,"d",(function(){return d})),n.d(e,"g",(function(){return p})),n.d(e,"h",(function(){return g})),n.d(e,"i",(function(){return f})),n.d(e,"a",(function(){return m})),n.d(e,"j",(function(){return b})),n.d(e,"s",(function(){return _})),n.d(e,"q",(function(){return h})),n.d(e,"n",(function(){return w})),n.d(e,"r",(function(){return $})),n.d(e,"p",(function(){return v})),n.d(e,"o",(function(){return k}));var r=n("a27e");function o(t){return Object(r["a"])({url:"options/groups_list",params:t})}function a(t){return Object(r["a"])({url:"options/create_groups_post",method:"post",data:t})}function i(t,e){return Object(r["a"])({url:"options/edit_groups/"+t+"?type="+e})}function u(t){return Object(r["a"])({url:"options/edit_groups_post",method:"post",data:t})}function s(t){return Object(r["a"])({url:"options/add_options",method:"post",data:t})}function l(t){return Object(r["a"])({url:"options/delete_sub_options/"+t})}function c(t){return Object(r["a"])({url:"options/delete_options/"+t})}function d(t){return Object(r["a"])({url:"options/delete_groups/"+t})}function p(){return Object(r["a"])({url:"options/duplicate_groups"})}function g(t){return Object(r["a"])({url:"options/duplicate_groups_post",method:"post",data:t})}function f(t,e){return Object(r["a"])({url:"options/edit_config/"+t,params:e})}function m(t){return Object(r["a"])({url:"options/add_options_page",params:t})}function b(t){return Object(r["a"])({url:"options/edit_config_post",method:"post",data:t})}function _(t){return Object(r["a"])({url:"options/search_page",params:t})}function h(t){return Object(r["a"])({url:"options/saveLinkAgeLevel",method:"post",data:t})}function w(t){return Object(r["a"])({url:"options/delLinkAgeSub",method:"post",data:t})}function $(t){return Object(r["a"])({url:"options/saveLinkAgeOrder",method:"post",data:t})}function v(t){return Object(r["a"])({url:"options/saveConfigOptionInfo",method:"post",data:t})}function k(t){return Object(r["a"])({url:"options/getNextLinkAgeList",params:t})}},"5a34":function(t,e,n){var r=n("44e7");t.exports=function(t){if(r(t))throw TypeError("The method doesn't accept regular expressions");return t}},"6a8e":function(t,e,n){"use strict";n.d(e,"f",(function(){return o})),n.d(e,"g",(function(){return a})),n.d(e,"d",(function(){return i})),n.d(e,"c",(function(){return u})),n.d(e,"b",(function(){return s})),n.d(e,"e",(function(){return l})),n.d(e,"h",(function(){return c})),n.d(e,"j",(function(){return d})),n.d(e,"i",(function(){return p})),n.d(e,"a",(function(){return g}));var r=n("a27e");function o(t,e){return Object(r["a"])({url:"common/get_product_list",params:{type:t,id:e}})}function a(t){return Object(r["a"])({url:"common/get_promo_code",params:{type:t}})}function i(){return Object(r["a"])({url:"common/get_getways"})}function u(t){return Object(r["a"])({url:"common/get_email_tem",params:{type:t}})}function s(){return Object(r["a"])({url:"common/get_client_groups"})}function l(t){return Object(r["a"])({url:"common/host_list",params:{uid:t}})}function c(){return Object(r["a"])({url:"common/get_sms_country"})}function d(){return Object(r["a"])({url:"common/product_config_options"})}function p(t){return Object(r["a"])({url:"common/get_upstream_ticket_department_list",params:{id:t}})}function g(t){return Object(r["a"])({url:"check_product_as",method:"post",data:t})}},"760f":function(t,e,n){},ab13:function(t,e,n){var r=n("b622"),o=r("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[o]=!1,"/./"[t](e)}catch(r){}}return!1}},c0e4:function(t,e,n){"use strict";n.r(e);var r,o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h2",[t._v(t._s(t.groupId?t.$lang.edit:t.$lang.establish)+t._s(t.$lang.global_configuration))]),n("el-divider"),n("el-row",[n("el-col",{staticClass:"from-box",attrs:{xs:24,sm:16,md:11,lg:10,xl:9}},[n("el-form",{ref:"elForm",attrs:{model:t.groupFormData,rules:t.groupRules,"label-width":"100px"}},[n("el-row",[n("el-form-item",{attrs:{label:t.$lang.group_name1,prop:"name"}},[n("el-input",{style:{width:"100%"},attrs:{size:"small",placeholder:t.$lang.group_name1_pla,clearable:""},model:{value:t.groupFormData.name,callback:function(e){t.$set(t.groupFormData,"name",e)},expression:"groupFormData.name"}})],1),n("el-form-item",{attrs:{label:t.$lang.describe,prop:"description"}},[n("el-input",{style:{width:"100%"},attrs:{size:"small",placeholder:t.$lang.enter_describe,clearable:""},model:{value:t.groupFormData.description,callback:function(e){t.$set(t.groupFormData,"description",e)},expression:"groupFormData.description"}})],1),n("el-form-item",{attrs:{label:t.$lang.designated_products,prop:"p_id"}},[n("el-select",{style:{width:"100%"},attrs:{size:"small","collapse-tags":"",placeholder:t.$lang.designated_products_pla,multiple:"",filterable:"",clearable:""},on:{change:function(e){return t.$forceUpdate()}},model:{value:t.groupFormData.p_id,callback:function(e){t.$set(t.groupFormData,"p_id",e)},expression:"groupFormData.p_id"}},t._l(t.groupList,(function(e){return n("el-option-group",{key:"group"+e.id,attrs:{label:e.name}},t._l(e.product,(function(t,e){return n("el-option",{key:"pro"+e,attrs:{label:t.name+"-"+t.type,value:t.id}})})),1)})),1)],1)],1)],1)],1)],1),t.groupId?n("el-row",[n("el-col",{staticClass:"tac",attrs:{span:24}},[n("el-button",{attrs:{size:"small"},on:{click:t.addOptionHandleClick}},[t._v(t._s(t.$lang.add_configuration_item))])],1)],1):t._e(),t.groupId?n("el-row",[n("el-col",{attrs:{span:24}},[n("el-table",{staticClass:"mt-10",staticStyle:{width:"100%"},attrs:{data:t.optionTableData,"default-sort":{prop:"order"}}},[n("el-table-column",{attrs:{prop:"id",label:"ID",sortable:"",width:"80"}}),n("el-table-column",{attrs:{prop:"gid",label:t.$lang.group+"ID",sortable:""}}),n("el-table-column",{attrs:{prop:"option_name",label:t.$lang.configuration_item_name,sortable:""}}),n("el-table-column",{attrs:{prop:"option_type",label:t.$lang.configuration_item_type,sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t._f("typeFilter")(e.row.option_type)))])]}}],null,!1,3657754979)}),n("el-table-column",{attrs:{prop:"order",label:t.$lang.sort,sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{style:{width:"50%"},attrs:{size:"small"},model:{value:e.row.order,callback:function(n){t.$set(e.row,"order",n)},expression:"scope.row.order"}})]}}],null,!1,3229212557)}),n("el-table-column",{attrs:{prop:"hidden",label:t.$lang.whether_to_hide,sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:e.row.hidden,callback:function(n){t.$set(e.row,"hidden",n)},expression:"scope.row.hidden"}})]}}],null,!1,4118246352)}),n("el-table-column",{attrs:{prop:"upgrade",label:t.$lang.upgrade_and_downgrade_allowed,sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:e.row.upgrade,callback:function(n){t.$set(e.row,"upgrade",n)},expression:"scope.row.upgrade"}})]}}],null,!1,1112597802)}),n("el-table-column",{attrs:{prop:"is_discount",label:t.$lang.application_discount_code,sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:e.row.is_discount,callback:function(n){t.$set(e.row,"is_discount",n)},expression:"scope.row.is_discount"}})]}}],null,!1,549255074)}),n("el-table-column",{attrs:{prop:"title",label:t.$lang.operation,width:"135",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{staticClass:"span-primary",attrs:{size:"small",type:"text",icon:"el-icon-edit"},on:{click:function(n){return t.editOptionHanleClick(e.row.id)}}},[t._v(t._s(t.$lang.edit))]),n("el-button",{staticClass:"span-danger",attrs:{size:"small",type:"text",icon:"el-icon-delete"},on:{click:function(n){return t.deleteOptionHandleClick(e.row.id)}}},[t._v(t._s(t.$lang.delete))])]}}],null,!1,1920992514)})],1)],1)],1):t._e(),n("el-row",{staticClass:"mt-10"},[n("el-col",{staticClass:"tac",attrs:{span:24}},[n("el-button",{attrs:{size:"small",type:"primary",loading:t.btnLoading},on:{click:t.saveChangesSubmitForm}},[t._v(" "+t._s(t.groupId?t.$lang.save_the_changes:t.$lang.confirm_creation)+" ")]),n("el-button",{attrs:{size:"small"},on:{click:t.backtToGroupListHandleClick}},[t._v(t._s(t.$lang.get_back))]),n("el-button",{attrs:{size:"small"},on:{click:t.resetForm}},[t._v(t._s(t.$lang.reset))])],1)],1)],1)},a=[],i=(n("a4d3"),n("e01a"),n("4160"),n("caad"),n("b0c0"),n("ac1f"),n("2532"),n("5319"),n("159b"),n("96cf"),n("1da1")),u=n("33e2"),s=n("6a8e"),l={inject:["reload"],metaInfo:function(){return{title:this.groupId?window.zjmf_cw_lang.edit_global_configuration:window.zjmf_cw_lang.creation_global_configuration}},data:function(){return{prePage:this.$route.query.prePage,groupId:this.$route.query.groupId,groupList:[],groupFormData:{name:void 0,description:void 0,p_id:[],global:1},groupRules:{name:[{required:!0,message:this.$lang.group_name1_pla,trigger:"blur"}],description:[{required:!0,message:this.$lang.enter_describe,trigger:"blur"}],p_id:[]},optionTableData:[],preWindow:null,btnLoading:!1}},beforeCreate:function(){r=this},filters:{typeFilter:function(t){switch(t){case 1:return r.$lang.drop_down;case 2:return r.$lang.single_choice;case 3:return r.$lang.yes_or_no;case 4:return r.$lang.amount;case 5:return r.$lang.operate_system;case 6:return r.$lang.cpu_core_radio;case 7:return r.$lang.cpu_core_range;case 8:return r.$lang.memory_radio;case 9:return r.$lang.memory_range;case 10:return r.$lang.bandwidth_radio;case 11:return r.$lang.bandwidth_range;case 12:return r.$lang.data_center;case 13:return r.$lang.single_chioce_system_disk_capacity;case 14:return r.$lang.single_chioce_system_disk_capacity_range}}},methods:{getProductList:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["f"])();case 2:n=e.sent,r=n.data,200!==r.status?t.$message.error(r.msg):(t.groupList=r.client_groups,t.groupId&&t.getEditGroupsPage());case 5:case"end":return e.stop()}}),e)})))()},getEditGroupsPage:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(u["l"])(t.groupId,1);case 2:n=e.sent,r=n.data,200===r.status&&(o=[],(t.groupList||[]).forEach((function(t){(t.product||[]).forEach((function(t){o.push(t.id)}))})),t.groupFormData=r.group,t.groupFormData.p_id=[],(r.pid||[]).forEach((function(e){o.includes(e.pid)&&t.groupFormData.p_id.push(e.pid)})),t.optionTableData=r.options);case 5:case"end":return e.stop()}}),e)})))()},saveChangesSubmitForm:function(){var t=this;this.$refs.elForm.validate(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(n){var r,o,a,i,s,l,c,d,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n){e.next=4;break}return e.abrupt("return");case 4:if(t.groupId){e.next=14;break}return t.btnLoading=!0,e.next=8,Object(u["c"])(t.groupFormData);case 8:r=e.sent,o=r.data,200===o.status?(t.$message.success(o.msg),t.groupId=o.groupid,t.$router.replace({path:"/edit-configurable-option-group",query:{groupId:o.groupid,prePage:t.prePage}}),t.getEditGroupsPage()):t.$message.error(o.msg),t.btnLoading=!1,e.next=27;break;case 14:return a=[],i=[],s=[],l=[],(t.optionTableData||[]).forEach((function(t){a[t.id]=t.order,i[t.id]=t.hidden,s[t.id]=t.upgrade,l[t.id]=t.is_discount})),c={gid:t.groupFormData.id,name:t.groupFormData.name,description:t.groupFormData.description,productlinks:t.groupFormData.p_id,order:a,hidden:i,upgrade:s,is_discount:l,global:t.groupFormData.global,upstream_id:t.groupFormData.upstream_id},t.btnLoading=!0,e.next=23,Object(u["k"])(t.$qs.stringify(c));case 23:d=e.sent,p=d.data,200===p.status?(t.$message.success(p.msg),t.getEditGroupsPage()):t.$message.error(p.msg),t.btnLoading=!1;case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},backtToGroupListHandleClick:function(){this.$router.push({path:"/configurable-option",query:{type:this.prePage}})},resetForm:function(){this.$refs.elForm.resetFields()},addOptionHandleClick:function(){var t=this,e=this.$baseUrl+"/#/edit-configurable-option1?groupId="+this.groupId;this.preWindow=window.open(e,"newwindow","height=800,width=1800,top=0,left=0,toolbar=no,menubar=no,scrollbars=no, resizable=no,location=no, status=no");var n=setInterval((function(){t.preWindow.closed&&(clearInterval(n),t.reload())}),500)},editOptionHanleClick:function(t){var e=this,n=this.$baseUrl+"/#/edit-configurable-option1?groupId="+this.groupId+"&optionId="+t;this.preWindow&&this.preWindow.close(),this.preWindow=window.open(n,"newwindow","height=800,width=1800,top=0,left=0,toolbar=no,menubar=no,scrollbars=no, resizable=no,location=no, status=no");var r=setInterval((function(){e.preWindow.closed&&(clearInterval(r),e.reload())}),500)},deleteOptionHandleClick:function(t){var e=this;this.$confirm(this.$lang.will_delete_data,this.$lang.hint,{confirmButtonText:this.$lang.confirm,cancelButtonText:this.$lang.cancel,type:"warning"}).then((function(){Object(u["e"])(t).then((function(t){200===t.data.status?(e.$message.success(t.data.msg),e.getEditGroupsPage()):e.$message.warning(t.data.msg)}))})).catch((function(){}))}},created:function(){this.getProductList()}},c=l,d=(n("0395"),n("2877")),p=Object(d["a"])(c,o,a,!1,null,"1796f07e",null);e["default"]=p.exports},caad:function(t,e,n){"use strict";var r=n("23e7"),o=n("4d64").includes,a=n("44d2"),i=n("ae40"),u=i("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:!u},{includes:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),a("includes")}}]);